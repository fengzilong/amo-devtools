{"version":3,"file":null,"sources":["../node_modules/reo/dist/reo.js"],"sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.reo = factory());\n}(this, (function () { 'use strict';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\n// shim for es5\nvar slice = [].slice;\nvar tstr = ({}).toString;\n\nfunction extend(o1, o2 ){\n  for(var i in o2) { if( o1[i] === undefined){\n    o1[i] = o2[i]\n  } }\n  return o2;\n}\n\n\nvar shim = function(){\n  // String proto ;\n  extend(String.prototype, {\n    trim: function(){\n      return this.replace(/^\\s+|\\s+$/g, '');\n    }\n  });\n\n\n  // Array proto;\n  extend(Array.prototype, {\n    indexOf: function(obj, from){\n      var this$1 = this;\n\n      from = from || 0;\n      for (var i = from, len = this.length; i < len; i++) {\n        if (this$1[i] === obj) { return i; }\n      }\n      return -1;\n    },\n    // polyfill from MDN \n    // https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\n    forEach: function(callback, ctx){\n      var k = 0;\n\n      // 1. Let O be the result of calling ToObject passing the |this| value as the argument.\n      var O = Object(this);\n\n      var len = O.length >>> 0; \n\n      if ( typeof callback !== \"function\" ) {\n        throw new TypeError( callback + \" is not a function\" );\n      }\n\n      // 7. Repeat, while k < len\n      while( k < len ) {\n\n        var kValue;\n\n        if ( k in O ) {\n\n          kValue = O[ k ];\n\n          callback.call( ctx, kValue, k, O );\n        }\n        k++;\n      }\n    },\n    // @deprecated\n    //  will be removed at 0.5.0\n    filter: function(fun, context){\n\n      var t = Object(this);\n      var len = t.length >>> 0;\n      if (typeof fun !== \"function\")\n        { throw new TypeError(); }\n\n      var res = [];\n      for (var i = 0; i < len; i++)\n      {\n        if (i in t)\n        {\n          var val = t[i];\n          if (fun.call(context, val, i, t))\n            { res.push(val); }\n        }\n      }\n\n      return res;\n    }\n  });\n\n  // Function proto;\n  extend(Function.prototype, {\n    bind: function(context){\n      var fn = this;\n      var preArgs = slice.call(arguments, 1);\n      return function(){\n        var args = preArgs.concat(slice.call(arguments));\n        return fn.apply(context, args);\n      }\n    }\n  })\n  \n  // Array\n  extend(Array, {\n    isArray: function(arr){\n      return tstr.call(arr) === \"[object Array]\";\n    }\n  })\n}\n\n// http://stackoverflow.com/questions/1354064/how-to-convert-characters-to-html-entities-using-plain-javascript\nvar entities = {\n  'quot':34, \n  'amp':38, \n  'apos':39, \n  'lt':60, \n  'gt':62, \n  'nbsp':160, \n  'iexcl':161, \n  'cent':162, \n  'pound':163, \n  'curren':164, \n  'yen':165, \n  'brvbar':166, \n  'sect':167, \n  'uml':168, \n  'copy':169, \n  'ordf':170, \n  'laquo':171, \n  'not':172, \n  'shy':173, \n  'reg':174, \n  'macr':175, \n  'deg':176, \n  'plusmn':177, \n  'sup2':178, \n  'sup3':179, \n  'acute':180, \n  'micro':181, \n  'para':182, \n  'middot':183, \n  'cedil':184, \n  'sup1':185, \n  'ordm':186, \n  'raquo':187, \n  'frac14':188, \n  'frac12':189, \n  'frac34':190, \n  'iquest':191, \n  'Agrave':192, \n  'Aacute':193, \n  'Acirc':194, \n  'Atilde':195, \n  'Auml':196, \n  'Aring':197, \n  'AElig':198, \n  'Ccedil':199, \n  'Egrave':200, \n  'Eacute':201, \n  'Ecirc':202, \n  'Euml':203, \n  'Igrave':204, \n  'Iacute':205, \n  'Icirc':206, \n  'Iuml':207, \n  'ETH':208, \n  'Ntilde':209, \n  'Ograve':210, \n  'Oacute':211, \n  'Ocirc':212, \n  'Otilde':213, \n  'Ouml':214, \n  'times':215, \n  'Oslash':216, \n  'Ugrave':217, \n  'Uacute':218, \n  'Ucirc':219, \n  'Uuml':220, \n  'Yacute':221, \n  'THORN':222, \n  'szlig':223, \n  'agrave':224, \n  'aacute':225, \n  'acirc':226, \n  'atilde':227, \n  'auml':228, \n  'aring':229, \n  'aelig':230, \n  'ccedil':231, \n  'egrave':232, \n  'eacute':233, \n  'ecirc':234, \n  'euml':235, \n  'igrave':236, \n  'iacute':237, \n  'icirc':238, \n  'iuml':239, \n  'eth':240, \n  'ntilde':241, \n  'ograve':242, \n  'oacute':243, \n  'ocirc':244, \n  'otilde':245, \n  'ouml':246, \n  'divide':247, \n  'oslash':248, \n  'ugrave':249, \n  'uacute':250, \n  'ucirc':251, \n  'uuml':252, \n  'yacute':253, \n  'thorn':254, \n  'yuml':255, \n  'fnof':402, \n  'Alpha':913, \n  'Beta':914, \n  'Gamma':915, \n  'Delta':916, \n  'Epsilon':917, \n  'Zeta':918, \n  'Eta':919, \n  'Theta':920, \n  'Iota':921, \n  'Kappa':922, \n  'Lambda':923, \n  'Mu':924, \n  'Nu':925, \n  'Xi':926, \n  'Omicron':927, \n  'Pi':928, \n  'Rho':929, \n  'Sigma':931, \n  'Tau':932, \n  'Upsilon':933, \n  'Phi':934, \n  'Chi':935, \n  'Psi':936, \n  'Omega':937, \n  'alpha':945, \n  'beta':946, \n  'gamma':947, \n  'delta':948, \n  'epsilon':949, \n  'zeta':950, \n  'eta':951, \n  'theta':952, \n  'iota':953, \n  'kappa':954, \n  'lambda':955, \n  'mu':956, \n  'nu':957, \n  'xi':958, \n  'omicron':959, \n  'pi':960, \n  'rho':961, \n  'sigmaf':962, \n  'sigma':963, \n  'tau':964, \n  'upsilon':965, \n  'phi':966, \n  'chi':967, \n  'psi':968, \n  'omega':969, \n  'thetasym':977, \n  'upsih':978, \n  'piv':982, \n  'bull':8226, \n  'hellip':8230, \n  'prime':8242, \n  'Prime':8243, \n  'oline':8254, \n  'frasl':8260, \n  'weierp':8472, \n  'image':8465, \n  'real':8476, \n  'trade':8482, \n  'alefsym':8501, \n  'larr':8592, \n  'uarr':8593, \n  'rarr':8594, \n  'darr':8595, \n  'harr':8596, \n  'crarr':8629, \n  'lArr':8656, \n  'uArr':8657, \n  'rArr':8658, \n  'dArr':8659, \n  'hArr':8660, \n  'forall':8704, \n  'part':8706, \n  'exist':8707, \n  'empty':8709, \n  'nabla':8711, \n  'isin':8712, \n  'notin':8713, \n  'ni':8715, \n  'prod':8719, \n  'sum':8721, \n  'minus':8722, \n  'lowast':8727, \n  'radic':8730, \n  'prop':8733, \n  'infin':8734, \n  'ang':8736, \n  'and':8743, \n  'or':8744, \n  'cap':8745, \n  'cup':8746, \n  'int':8747, \n  'there4':8756, \n  'sim':8764, \n  'cong':8773, \n  'asymp':8776, \n  'ne':8800, \n  'equiv':8801, \n  'le':8804, \n  'ge':8805, \n  'sub':8834, \n  'sup':8835, \n  'nsub':8836, \n  'sube':8838, \n  'supe':8839, \n  'oplus':8853, \n  'otimes':8855, \n  'perp':8869, \n  'sdot':8901, \n  'lceil':8968, \n  'rceil':8969, \n  'lfloor':8970, \n  'rfloor':8971, \n  'lang':9001, \n  'rang':9002, \n  'loz':9674, \n  'spades':9824, \n  'clubs':9827, \n  'hearts':9829, \n  'diams':9830, \n  'OElig':338, \n  'oelig':339, \n  'Scaron':352, \n  'scaron':353, \n  'Yuml':376, \n  'circ':710, \n  'tilde':732, \n  'ensp':8194, \n  'emsp':8195, \n  'thinsp':8201, \n  'zwnj':8204, \n  'zwj':8205, \n  'lrm':8206, \n  'rlm':8207, \n  'ndash':8211, \n  'mdash':8212, \n  'lsquo':8216, \n  'rsquo':8217, \n  'sbquo':8218, \n  'ldquo':8220, \n  'rdquo':8221, \n  'bdquo':8222, \n  'dagger':8224, \n  'Dagger':8225, \n  'permil':8240, \n  'lsaquo':8249, \n  'rsaquo':8250, \n  'euro':8364\n}\n\n\n\nvar entities_1 = entities;\n\nvar util = createCommonjsModule(function (module) {\nshim();\n\n\n\nvar _  = module.exports;\nvar entities = entities_1;\nvar slice = [].slice;\nvar o2str = ({}).toString;\nvar win = typeof window !=='undefined'? window: commonjsGlobal;\n\n\n_.noop = function(){};\n_.uid = (function(){\n  var _uid=0;\n  return function(){\n    return _uid++;\n  }\n})();\n\n_.extend = function( o1, o2, override ){\n  // if(_.typeOf(override) === 'array'){\n  //  for(var i = 0, len = override.length; i < len; i++ ){\n  //   var key = override[i];\n  //   o1[key] = o2[key];\n  //  } \n  // }else{\n  for(var i in o2){\n    if( typeof o1[i] === \"undefined\" || override === true ){\n      o1[i] = o2[i]\n    }\n  }\n  // }\n  return o1;\n}\n\n_.keys = function(obj){\n  if(Object.keys) { return Object.keys(obj); }\n  var res = [];\n  for(var i in obj) { if(obj.hasOwnProperty(i)){\n    res.push(i);\n  } }\n  return res;\n}\n\n_.varName = 'd';\n_.setName = 'p_';\n_.ctxName = 'c';\n_.extName = 'e';\n\n_.rWord = /^[\\$\\w]+$/;\n_.rSimpleAccessor = /^[\\$\\w]+(\\.[\\$\\w]+)*$/;\n\n_.nextTick = typeof setImmediate === 'function'? \n  setImmediate.bind(win) : \n  function(callback) {\n    setTimeout(callback, 0) \n  }\n\n\n\n_.prefix = \"var \" + _.varName + \"=\" + _.ctxName + \".data;\" +  _.extName  + \"=\" + _.extName + \"||'';\";\n\n\n_.slice = function(obj, start, end){\n  var res = [];\n  for(var i = start || 0, len = end || obj.length; i < len; i++){\n    var item = obj[i];\n    res.push(item)\n  }\n  return res;\n}\n\n_.typeOf = function (o) {\n  return o == null ? String(o) :o2str.call(o).slice(8, -1).toLowerCase();\n}\n\n\n_.makePredicate = function makePredicate(words, prefix) {\n    if (typeof words === \"string\") {\n        words = words.split(\" \");\n    }\n    var f = \"\",\n    cats = [];\n    out: for (var i = 0; i < words.length; ++i) {\n        for (var j = 0; j < cats.length; ++j){\n          if (cats[j][0].length === words[i].length) {\n              cats[j].push(words[i]);\n              continue out;\n          }\n        }\n        cats.push([words[i]]);\n    }\n    function compareTo(arr) {\n        if (arr.length === 1) { return f += \"return str === '\" + arr[0] + \"';\"; }\n        f += \"switch(str){\";\n        for (var i = 0; i < arr.length; ++i){\n           f += \"case '\" + arr[i] + \"':\";\n        }\n        f += \"return true}return false;\";\n    }\n\n    // When there are more than three length categories, an outer\n    // switch first dispatches on the lengths, to save on comparisons.\n    if (cats.length > 3) {\n        cats.sort(function(a, b) {\n            return b.length - a.length;\n        });\n        f += \"switch(str.length){\";\n        for (var i = 0; i < cats.length; ++i) {\n            var cat = cats[i];\n            f += \"case \" + cat[0].length + \":\";\n            compareTo(cat);\n        }\n        f += \"}\";\n\n        // Otherwise, simply generate a flat `switch` statement.\n    } else {\n        compareTo(words);\n    }\n    return new Function(\"str\", f);\n}\n\n\n_.trackErrorPos = (function (){\n  // linebreak\n  var lb = /\\r\\n|[\\n\\r\\u2028\\u2029]/g;\n  var minRange = 20, maxRange = 20;\n  function findLine(lines, pos){\n    var tmpLen = 0;\n    for(var i = 0,len = lines.length; i < len; i++){\n      var lineLen = (lines[i] || \"\").length;\n\n      if(tmpLen + lineLen > pos) {\n        return {num: i, line: lines[i], start: pos - i - tmpLen , prev:lines[i-1], next: lines[i+1] };\n      }\n      // 1 is for the linebreak\n      tmpLen = tmpLen + lineLen ;\n    }\n  }\n  function formatLine(str,  start, num, target){\n    var len = str.length;\n    var min = start - minRange;\n    if(min < 0) { min = 0; }\n    var max = start + maxRange;\n    if(max > len) { max = len; }\n\n    var remain = str.slice(min, max);\n    var prefix = \"[\" +(num+1) + \"] \" + (min > 0? \"..\" : \"\")\n    var postfix = max < len ? \"..\": \"\";\n    var res = prefix + remain + postfix;\n    if(target) { res += \"\\n\" + new Array(start-min + prefix.length + 1).join(\" \") + \"^^^\"; }\n    return res;\n  }\n  return function(input, pos){\n    if(pos > input.length-1) { pos = input.length-1; }\n    lb.lastIndex = 0;\n    var lines = input.split(lb);\n    var line = findLine(lines,pos);\n    var start = line.start, num = line.num;\n\n    return (line.prev? formatLine(line.prev, start, num-1 ) + '\\n': '' ) + \n      formatLine(line.line, start, num, true) + '\\n' + \n      (line.next? formatLine(line.next, start, num+1 ) + '\\n': '' );\n\n  }\n})();\n\n\nvar ignoredRef = /\\((\\?\\!|\\?\\:|\\?\\=)/g;\n_.findSubCapture = function (regStr) {\n  var left = 0,\n    right = 0,\n    len = regStr.length,\n    ignored = regStr.match(ignoredRef); // ignored uncapture\n  if(ignored) { ignored = ignored.length }\n  else { ignored = 0; }\n  for (; len--;) {\n    var letter = regStr.charAt(len);\n    if (len === 0 || regStr.charAt(len - 1) !== \"\\\\\" ) { \n      if (letter === \"(\") { left++; }\n      if (letter === \")\") { right++; }\n    }\n  }\n  if (left !== right) { throw \"RegExp: \"+ regStr + \"'s bracket is not marched\"; }\n  else { return left - ignored; }\n};\n\n\n_.escapeRegExp = function( str){// Credit: XRegExp 0.6.1 (c) 2007-2008 Steven Levithan <http://stevenlevithan.com/regex/xregexp/> MIT License\n  return str.replace(/[-[\\]{}()*+?.\\\\^$|,#\\s]/g, function(match){\n    return '\\\\' + match;\n  });\n};\n\n\nvar rEntity = new RegExp(\"&(?:(#x[0-9a-fA-F]+)|(#[0-9]+)|(\" + _.keys(entities).join('|') + '));', 'gi');\n\n_.convertEntity = function(chr){\n\n  return (\"\" + chr).replace(rEntity, function(all, hex, dec, capture){\n    var charCode;\n    if( dec ) { charCode = parseInt( dec.slice(1), 10 ); }\n    else if( hex ) { charCode = parseInt( hex.slice(2), 16 ); }\n    else { charCode = entities[capture] }\n\n    return String.fromCharCode( charCode )\n  });\n\n}\n\n\n// simple get accessor\n\n_.createObject = function(o, props){\n    function Foo() {}\n    Foo.prototype = o;\n    var res = new Foo;\n    if(props) { _.extend(res, props); }\n    return res;\n}\n\n_.createProto = function(fn, o){\n    function Foo() { this.constructor = fn;}\n    Foo.prototype = o;\n    return (fn.prototype = new Foo());\n}\n\n\n\n/**\nclone\n*/\n_.clone = function clone(obj){\n    var type = _.typeOf(obj);\n    if(type === 'array'){\n      var cloned = [];\n      for(var i=0,len = obj.length; i< len;i++){\n        cloned[i] = obj[i]\n      }\n      return cloned;\n    }\n    if(type === 'object'){\n      var cloned = {};\n      for(var i in obj) { if(obj.hasOwnProperty(i)){\n        cloned[i] = obj[i];\n      } }\n      return cloned;\n    }\n    return obj;\n  }\n\n_.equals = function(now, old){\n  var type = typeof now;\n  if(type === 'number' && typeof old === 'number'&& isNaN(now) && isNaN(old)) { return true }\n  return now === old;\n}\n\nvar dash = /-([a-z])/g;\n_.camelCase = function(str){\n  return str.replace(dash, function(all, capture){\n    return capture.toUpperCase();\n  })\n}\n\n\n\n_.throttle = function throttle(func, wait){\n  var wait = wait || 100;\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  var later = function() {\n    previous = +new Date;\n    timeout = null;\n    result = func.apply(context, args);\n    context = args = null;\n  };\n  return function() {\n    var now = + new Date;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      clearTimeout(timeout);\n      timeout = null;\n      previous = now;\n      result = func.apply(context, args);\n      context = args = null;\n    } else if (!timeout) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n};\n\n// hogan escape\n// ==============\n_.escape = (function(){\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  return function(str) {\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n})();\n\n_.cache = function(max){\n  max = max || 1000;\n  var keys = [],\n      cache = {};\n  return {\n    set: function(key, value) {\n      if (keys.length > this.max) {\n        cache[keys.shift()] = undefined;\n      }\n      // \n      if(cache[key] === undefined){\n        keys.push(key);\n      }\n      cache[key] = value;\n      return value;\n    },\n    get: function(key) {\n      if (key === undefined) { return cache; }\n      return cache[key];\n    },\n    max: max,\n    len:function(){\n      return keys.length;\n    }\n  };\n}\n\n// // setup the raw Expression\n// _.touchExpression = function(expr){\n//   if(expr.type === 'expression'){\n//   }\n//   return expr;\n// }\n\n\n// handle the same logic on component's `on-*` and element's `on-*`\n// return the fire object\n_.handleEvent = function(value, type ){\n  var self = this, evaluate;\n  if(value.type === 'expression'){ // if is expression, go evaluated way\n    evaluate = value.get;\n  }\n  if(evaluate){\n    return function fire(obj){\n      self.$update(function(){\n        var data = this.data;\n        data.$event = obj;\n        var res = evaluate(self);\n        if(res === false && obj && obj.preventDefault) { obj.preventDefault(); }\n        data.$event = undefined;\n      })\n\n    }\n  }else{\n    return function fire(){\n      var args = slice.call(arguments)      \n      args.unshift(value);\n      self.$update(function(){\n        self.$emit.apply(self, args);\n      })\n    }\n  }\n}\n\n// only call once\n_.once = function(fn){\n  var time = 0;\n  return function(){\n    if( time++ === 0) { fn.apply(this, arguments); }\n  }\n}\n\n_.fixObjStr = function(str){\n  if(str.trim().indexOf('{') !== 0){\n    return '{' + str + '}';\n  }\n  return str;\n}\n\n\n_.map= function(array, callback){\n  var res = [];\n  for (var i = 0, len = array.length; i < len; i++) {\n    res.push(callback(array[i], i));\n  }\n  return res;\n}\n\nfunction log(msg, type){\n  if(typeof console !== \"undefined\")  { console[type || \"log\"](msg); }\n}\n\n_.log = log;\n\n\n\n\n//http://www.w3.org/html/wg/drafts/html/master/single-page.html#void-elements\n_.isVoidTag = _.makePredicate(\"area base br col embed hr img input keygen link menuitem meta param source track wbr r-content\");\n_.isBooleanAttr = _.makePredicate('selected checked disabled readonly required open autofocus controls autoplay compact loop defer multiple');\n\n_.isFalse - function(){return false}\n_.isTrue - function(){return true}\n\n_.isExpr = function(expr){\n  return expr && expr.type === 'expression';\n}\n// @TODO: make it more strict\n_.isGroup = function(group){\n  return group.inject || group.$inject;\n}\n\n_.getCompileFn = function(source, ctx, options){\n  return ctx.$compile.bind(ctx,source, options)\n}\n});\n\n// some fixture test;\n// ---------------\nvar _ = util;\nvar svg = (function(){\n  return typeof document !== \"undefined\" && document.implementation.hasFeature( \"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\" );\n})();\n\n\nvar browser = typeof document !== \"undefined\" && document.nodeType;\n// whether have component in initializing\nvar exprCache = _.cache(1000);\nvar isRunning = false;\n\nvar env = {\n\tsvg: svg,\n\tbrowser: browser,\n\texprCache: exprCache,\n\tisRunning: isRunning\n};\n\nvar config$1 = {\n  'BEGIN': '{',\n  'END': '}',\n  'PRECOMPILE': false\n}\n\nvar _$2 = util;\nvar config$4 = config$1;\n\n// some custom tag  will conflict with the Lexer progress\nvar conflictTag = {\"}\": \"{\", \"]\": \"[\"};\nvar map1;\nvar map2;\n// some macro for lexer\nvar macro = {\n  'NAME': /(?:[:_A-Za-z][-\\.:_0-9A-Za-z]*)/,\n  'IDENT': /[\\$_A-Za-z][_0-9A-Za-z\\$]*/,\n  'SPACE': /[\\r\\n\\t\\f ]/\n}\n\n\nvar test = /a|(b)/.exec(\"a\");\nvar testSubCapure = test && test[1] === undefined? \n  function(str){ return str !== undefined }\n  :function(str){return !!str};\n\nfunction wrapHander(handler){\n  return function(all){\n    return {type: handler, value: all }\n  }\n}\n\nfunction Lexer$1(input, opts){\n  if(conflictTag[config$4.END]){\n    this.markStart = conflictTag[config$4.END];\n    this.markEnd = config$4.END;\n  }\n\n  this.input = (input||\"\").trim();\n  this.opts = opts || {};\n  this.map = this.opts.mode !== 2?  map1: map2;\n  this.states = [\"INIT\"];\n  if(opts && opts.expression){\n     this.states.push(\"JST\");\n     this.expression = true;\n  }\n}\n\nvar lo = Lexer$1.prototype\n\n\nlo.lex = function(str){\n  var this$1 = this;\n\n  str = (str || this.input).trim();\n  var tokens = [], split, test,mlen, token, state;\n  this.input = str, \n  this.marks = 0;\n  // init the pos index\n  this.index=0;\n  var i = 0;\n  while(str){\n    i++\n    state = this$1.state();\n    split = this$1.map[state] \n    test = split.TRUNK.exec(str);\n    if(!test){\n      this$1.error('Unrecoginized Token');\n    }\n    mlen = test[0].length;\n    str = str.slice(mlen)\n    token = this$1._process.call(this$1, test, split, str)\n    if(token) { tokens.push(token) }\n    this$1.index += mlen;\n    // if(state == 'TAG' || state == 'JST') str = this.skipspace(str);\n  }\n\n  tokens.push({type: 'EOF'});\n\n  return tokens;\n}\n\nlo.error = function(msg){\n  throw  Error(\"Parse Error: \" + msg +  ':\\n' + _$2.trackErrorPos(this.input, this.index));\n}\n\nlo._process = function(args, split,str){\n  var this$1 = this;\n\n  // console.log(args.join(\",\"), this.state())\n  var links = split.links, marched = false, token;\n\n  for(var len = links.length, i=0;i<len ;i++){\n    var link = links[i],\n      handler = link[2],\n      index = link[0];\n    // if(args[6] === '>' && index === 6) console.log('haha')\n    if(testSubCapure(args[index])) {\n      marched = true;\n      if(handler){\n        token = handler.apply(this$1, args.slice(index, index + link[1]))\n        if(token)  { token.pos = this$1.index; }\n      }\n      break;\n    }\n  }\n  if(!marched){ // in ie lt8 . sub capture is \"\" but ont \n    switch(str.charAt(0)){\n      case \"<\":\n        this.enter(\"TAG\");\n        break;\n      default:\n        this.enter(\"JST\");\n        break;\n    }\n  }\n  return token;\n}\nlo.enter = function(state){\n  this.states.push(state)\n  return this;\n}\n\nlo.state = function(){\n  var states = this.states;\n  return states[states.length-1];\n}\n\nlo.leave = function(state){\n  var states = this.states;\n  if(!state || states[states.length-1] === state) { states.pop() }\n}\n\n\nLexer$1.setup = function(){\n  macro.END = config$4.END;\n  macro.BEGIN = config$4.BEGIN;\n  //\n  map1 = genMap([\n    // INIT\n    rules.ENTER_JST,\n    rules.ENTER_TAG,\n    rules.TEXT,\n\n    //TAG\n    rules.TAG_NAME,\n    rules.TAG_OPEN,\n    rules.TAG_CLOSE,\n    rules.TAG_PUNCHOR,\n    rules.TAG_ENTER_JST,\n    rules.TAG_UNQ_VALUE,\n    rules.TAG_STRING,\n    rules.TAG_SPACE,\n    rules.TAG_COMMENT,\n\n    // JST\n    rules.JST_OPEN,\n    rules.JST_CLOSE,\n    rules.JST_COMMENT,\n    rules.JST_EXPR_OPEN,\n    rules.JST_IDENT,\n    rules.JST_SPACE,\n    rules.JST_LEAVE,\n    rules.JST_NUMBER,\n    rules.JST_PUNCHOR,\n    rules.JST_STRING,\n    rules.JST_COMMENT\n    ])\n\n  // ignored the tag-relative token\n  map2 = genMap([\n    // INIT no < restrict\n    rules.ENTER_JST2,\n    rules.TEXT,\n    // JST\n    rules.JST_COMMENT,\n    rules.JST_OPEN,\n    rules.JST_CLOSE,\n    rules.JST_EXPR_OPEN,\n    rules.JST_IDENT,\n    rules.JST_SPACE,\n    rules.JST_LEAVE,\n    rules.JST_NUMBER,\n    rules.JST_PUNCHOR,\n    rules.JST_STRING,\n    rules.JST_COMMENT\n    ])\n}\n\n\nfunction genMap(rules){\n  var rule, map = {}, sign;\n  for(var i = 0, len = rules.length; i < len ; i++){\n    rule = rules[i];\n    sign = rule[2] || 'INIT';\n    ( map[sign] || (map[sign] = {rules:[], links:[]}) ).rules.push(rule);\n  }\n  return setup(map);\n}\n\nfunction setup(map){\n  var split, rules, trunks, handler, reg, retain, rule;\n  function replaceFn(all, one){\n    return typeof macro[one] === 'string'? \n      _$2.escapeRegExp(macro[one]) \n      : String(macro[one]).slice(1,-1);\n  }\n\n  for(var i in map){\n\n    split = map[i];\n    split.curIndex = 1;\n    rules = split.rules;\n    trunks = [];\n\n    for(var j = 0,len = rules.length; j<len; j++){\n      rule = rules[j]; \n      reg = rule[0];\n      handler = rule[1];\n\n      if(typeof handler === 'string'){\n        handler = wrapHander(handler);\n      }\n      if(_$2.typeOf(reg) === 'regexp') { reg = reg.toString().slice(1, -1); }\n\n      reg = reg.replace(/\\{(\\w+)\\}/g, replaceFn)\n      retain = _$2.findSubCapture(reg) + 1; \n      split.links.push([split.curIndex, retain, handler]); \n      split.curIndex += retain;\n      trunks.push(reg);\n    }\n    split.TRUNK = new RegExp(\"^(?:(\" + trunks.join(\")|(\") + \"))\")\n  }\n  return map;\n}\n\nvar rules = {\n\n  // 1. INIT\n  // ---------------\n\n  // mode1's JST ENTER RULE\n  ENTER_JST: [/[^\\x00<]*?(?={BEGIN})/, function(all){\n    this.enter('JST');\n    if(all) { return {type: 'TEXT', value: all} }\n  }],\n\n  // mode2's JST ENTER RULE\n  ENTER_JST2: [/[^\\x00]*?(?={BEGIN})/, function(all){\n    this.enter('JST');\n    if(all) { return {type: 'TEXT', value: all} }\n  }],\n\n  ENTER_TAG: [/[^\\x00]*?(?=<[\\w\\/\\!])/, function(all){ \n    this.enter('TAG');\n    if(all) { return {type: 'TEXT', value: all} }\n  }],\n\n  TEXT: [/[^\\x00]+/, 'TEXT' ],\n\n  // 2. TAG\n  // --------------------\n  TAG_NAME: [/{NAME}/, 'NAME', 'TAG'],\n  TAG_UNQ_VALUE: [/[^\\{}&\"'=><`\\r\\n\\f\\t ]+/, 'UNQ', 'TAG'],\n\n  TAG_OPEN: [/<({NAME})\\s*/, function(all, one){ //\"\n    return {type: 'TAG_OPEN', value: one}\n  }, 'TAG'],\n  TAG_CLOSE: [/<\\/({NAME})[\\r\\n\\f\\t ]*>/, function(all, one){\n    this.leave();\n    return {type: 'TAG_CLOSE', value: one }\n  }, 'TAG'],\n\n    // mode2's JST ENTER RULE\n  TAG_ENTER_JST: [/(?={BEGIN})/, function(){\n    this.enter('JST');\n  }, 'TAG'],\n\n\n  TAG_PUNCHOR: [/[\\>\\/=&]/, function(all){\n    if(all === '>') { this.leave(); }\n    return {type: all, value: all }\n  }, 'TAG'],\n  TAG_STRING:  [ /'([^']*)'|\"([^\"]*)\\\"/, /*'*/  function(all, one, two){ \n    var value = one || two || \"\";\n\n    return {type: 'STRING', value: value}\n  }, 'TAG'],\n\n  TAG_SPACE: [/{SPACE}+/, null, 'TAG'],\n  TAG_COMMENT: [/<\\!--([^\\x00]*?)--\\>/, function(all){\n    this.leave()\n    // this.leave('TAG')\n  } ,'TAG'],\n\n  // 3. JST\n  // -------------------\n\n  JST_OPEN: ['{BEGIN}#{SPACE}*({IDENT})', function(all, name){\n    return {\n      type: 'OPEN',\n      value: name\n    }\n  }, 'JST'],\n  JST_LEAVE: [/{END}/, function(all){\n    if(this.markEnd === all && this.expression) { return {type: this.markEnd, value: this.markEnd}; }\n    if(!this.markEnd || !this.marks ){\n      this.firstEnterStart = false;\n      this.leave('JST');\n      return {type: 'END'}\n    }else{\n      this.marks--;\n      return {type: this.markEnd, value: this.markEnd}\n    }\n  }, 'JST'],\n  JST_CLOSE: [/{BEGIN}\\s*\\/({IDENT})\\s*{END}/, function(all, one){\n    this.leave('JST');\n    return {\n      type: 'CLOSE',\n      value: one\n    }\n  }, 'JST'],\n  JST_COMMENT: [/{BEGIN}\\!([^\\x00]*?)\\!{END}/, function(){\n    this.leave();\n  }, 'JST'],\n  JST_EXPR_OPEN: ['{BEGIN}',function(all, one){\n    if(all === this.markStart){\n      if(this.expression) { return { type: this.markStart, value: this.markStart }; }\n      if(this.firstEnterStart || this.marks){\n        this.marks++\n        this.firstEnterStart = false;\n        return { type: this.markStart, value: this.markStart };\n      }else{\n        this.firstEnterStart = true;\n      }\n    }\n    return {\n      type: 'EXPR_OPEN',\n      escape: false\n    }\n\n  }, 'JST'],\n  JST_IDENT: ['{IDENT}', 'IDENT', 'JST'],\n  JST_SPACE: [/[ \\r\\n\\f]+/, null, 'JST'],\n  JST_PUNCHOR: [/[=!]?==|[-=><+*\\/%\\!]?\\=|\\|\\||&&|\\@\\(|\\.\\.|[<\\>\\[\\]\\(\\)\\-\\|\\{}\\+\\*\\/%?:\\.!,]/, function(all){\n    return { type: all, value: all }\n  },'JST'],\n\n  JST_STRING:  [ /'([^']*)'|\"([^\"]*)\"/, function(all, one, two){ //\"'\n    return {type: 'STRING', value: one || two || \"\"}\n  }, 'JST'],\n  JST_NUMBER: [/(?:[0-9]*\\.[0-9]+|[0-9]+)(e\\d+)?/, function(all){\n    return {type: 'NUMBER', value: parseFloat(all, 10)};\n  }, 'JST']\n}\n\n\n// setup when first config\nLexer$1.setup();\n\n\n\nvar Lexer_1 = Lexer$1;\n\nvar node$1 = {\n  element: function(name, attrs, children){\n    return {\n      type: 'element',\n      tag: name,\n      attrs: attrs,\n      children: children\n    }\n  },\n  attribute: function(name, value, mdf){\n    return {\n      type: 'attribute',\n      name: name,\n      value: value,\n      mdf: mdf\n    }\n  },\n  \"if\": function(test, consequent, alternate){\n    return {\n      type: 'if',\n      test: test,\n      consequent: consequent,\n      alternate: alternate\n    }\n  },\n  list: function(sequence, variable, body, alternate, track){\n    return {\n      type: 'list',\n      sequence: sequence,\n      alternate: alternate,\n      variable: variable,\n      body: body,\n      track: track\n    }\n  },\n  expression: function( body, setbody, constant ){\n    return {\n      type: \"expression\",\n      body: body,\n      constant: constant || false,\n      setbody: setbody || false\n    }\n  },\n  text: function(text){\n    return {\n      type: \"text\",\n      text: text\n    }\n  },\n  template: function(template){\n    return {\n      type: 'template',\n      content: template\n    }\n  }\n}\n\nvar _$3 = util;\n\nvar config$5 = config$1;\nvar node = node$1;\nvar Lexer$2 = Lexer_1;\nvar varName = _$3.varName;\nvar ctxName = _$3.ctxName;\nvar extName = _$3.extName;\nvar isPath = _$3.makePredicate(\"STRING IDENT NUMBER\");\nvar isKeyWord = _$3.makePredicate(\"true false undefined null this Array Date JSON Math NaN RegExp decodeURI decodeURIComponent encodeURI encodeURIComponent parseFloat parseInt Object\");\n\n\n\n\nfunction Parser$1(input, opts){\n  opts = opts || {};\n\n  this.input = input;\n  this.tokens = new Lexer$2(input, opts).lex();\n  this.pos = 0;\n  this.length = this.tokens.length;\n}\n\n\nvar op = Parser$1.prototype;\n\n\nop.parse = function(){\n  this.pos = 0;\n  var res= this.program();\n  if(this.ll().type === 'TAG_CLOSE'){\n    this.error(\"You may got a unclosed Tag\")\n  }\n  return res;\n}\n\nop.ll =  function(k){\n  k = k || 1;\n  if(k < 0) { k = k + 1; }\n  var pos = this.pos + k - 1;\n  if(pos > this.length - 1){\n      return this.tokens[this.length-1];\n  }\n  return this.tokens[pos];\n}\n  // lookahead\nop.la = function(k){\n  return (this.ll(k) || '').type;\n}\n\nop.match = function(type, value){\n  var ll;\n  if(!(ll = this.eat(type, value))){\n    ll  = this.ll();\n    this.error('expect [' + type + (value == null? '':':'+ value) + ']\" -> got \"[' + ll.type + (value==null? '':':'+ll.value) + ']', ll.pos)\n  }else{\n    return ll;\n  }\n}\n\nop.error = function(msg, pos){\n  msg =  \"\\n【 parse failed 】 \" + msg +  ':\\n\\n' + _$3.trackErrorPos(this.input, typeof pos === 'number'? pos: this.ll().pos||0);\n  throw new Error(msg);\n}\n\nop.next = function(k){\n  k = k || 1;\n  this.pos += k;\n}\nop.eat = function(type, value){\n  var this$1 = this;\n\n  var ll = this.ll();\n  if(typeof type !== 'string'){\n    for(var len = type.length ; len--;){\n      if(ll.type === type[len]) {\n        this$1.next();\n        return ll;\n      }\n    }\n  }else{\n    if( ll.type === type && (typeof value === 'undefined' || ll.value === value) ){\n       this.next();\n       return ll;\n    }\n  }\n  return false;\n}\n\n// program\n//  :EOF\n//  | (statement)* EOF\nop.program = function(){\n  var this$1 = this;\n\n  var statements = [],  ll = this.ll();\n  while(ll.type !== 'EOF' && ll.type !=='TAG_CLOSE'){\n\n    statements.push(this$1.statement());\n    ll = this$1.ll();\n  }\n  // if(ll.type === 'TAG_CLOSE') this.error(\"You may have unmatched Tag\")\n  return statements;\n}\n\n// statement\n//  : xml\n//  | jst\n//  | text\nop.statement = function(){\n  var ll = this.ll();\n  switch(ll.type){\n    case 'NAME':\n    case 'TEXT':\n      var text = ll.value;\n      this.next();\n      while(ll = this.eat(['NAME', 'TEXT'])){\n        text += ll.value;\n      }\n      return node.text(text);\n    case 'TAG_OPEN':\n      return this.xml();\n    case 'OPEN': \n      return this.directive();\n    case 'EXPR_OPEN':\n      return this.interplation();\n    default:\n      this.error('Unexpected token: '+ this.la())\n  }\n}\n\n// xml \n// stag statement* TAG_CLOSE?(if self-closed tag)\nop.xml = function(){\n  var name, attrs, children, selfClosed;\n  name = this.match('TAG_OPEN').value;\n  attrs = this.attrs();\n  selfClosed = this.eat('/')\n  this.match('>');\n  if( !selfClosed && !_$3.isVoidTag(name) ){\n    children = this.program();\n    if(!this.eat('TAG_CLOSE', name)) { this.error('expect </'+name+'> got'+ 'no matched closeTag') }\n  }\n  return node.element(name, attrs, children);\n}\n\n// xentity\n//  -rule(wrap attribute)\n//  -attribute\n//\n// __example__\n//  name = 1 |  \n//  ng-hide |\n//  on-click={{}} | \n//  {{#if name}}on-click={{xx}}{{#else}}on-tap={{}}{{/if}}\n\nop.xentity = function(ll){\n  var name = ll.value, value, modifier;\n  if(ll.type === 'NAME'){\n    //@ only for test\n    if(~name.indexOf('.')){\n      var tmp = name.split('.');\n      name = tmp[0];\n      modifier = tmp[1]\n\n    }\n    if( this.eat(\"=\") ) { value = this.attvalue(modifier); }\n    return node.attribute( name, value, modifier );\n  }else{\n    if( name !== 'if') { this.error(\"current version. ONLY RULE #if #else #elseif is valid in tag, the rule #\" + name + ' is invalid'); }\n    return this['if'](true);\n  }\n\n}\n\n// stag     ::=    '<' Name (S attr)* S? '>'  \n// attr    ::=     Name Eq attvalue\nop.attrs = function(isAttribute){\n  var this$1 = this;\n\n  var eat\n  if(!isAttribute){\n    eat = [\"NAME\", \"OPEN\"]\n  }else{\n    eat = [\"NAME\"]\n  }\n\n  var attrs = [], ll;\n  while (ll = this.eat(eat)){\n    attrs.push(this$1.xentity( ll ))\n  }\n  return attrs;\n}\n\n// attvalue\n//  : STRING  \n//  | NAME\nop.attvalue = function(mdf){\n  var ll = this.ll();\n  switch(ll.type){\n    case \"NAME\":\n    case \"UNQ\":\n    case \"STRING\":\n      this.next();\n      var value = ll.value;\n      if(~value.indexOf(config$5.BEGIN) && ~value.indexOf(config$5.END) && mdf!=='cmpl'){\n        var constant = true;\n        var parsed = new Parser$1(value, { mode: 2 }).parse();\n        if(parsed.length === 1 && parsed[0].type === 'expression') { return parsed[0]; }\n        var body = [];\n        parsed.forEach(function(item){\n          if(!item.constant) { constant=false; }\n          // silent the mutiple inteplation\n            body.push(item.body || \"'\" + item.text.replace(/'/g, \"\\\\'\") + \"'\");        \n        });\n        body = \"[\" + body.join(\",\") + \"].join('')\";\n        value = node.expression(body, null, constant);\n      }\n      return value;\n    case \"EXPR_OPEN\":\n      return this.interplation();\n    // case \"OPEN\":\n    //   if(ll.value === 'inc' || ll.value === 'include'){\n    //     this.next();\n    //     return this.inc();\n    //   }else{\n    //     this.error('attribute value only support inteplation and {#inc} statement')\n    //   }\n    //   break;\n    default:\n      this.error('Unexpected token: '+ this.la())\n  }\n}\n\n\n// {{#}}\nop.directive = function(){\n  var name = this.ll().value;\n  this.next();\n  if(typeof this[name] === 'function'){\n    return this[name]()\n  }else{\n    this.error('Undefined directive['+ name +']');\n  }\n}\n\n\n// {{}}\nop.interplation = function(){\n  this.match('EXPR_OPEN');\n  var res = this.expression(true);\n  this.match('END');\n  return res;\n}\n\n// {{~}}\nop.inc = op.include = function(){\n  var content = this.expression();\n  this.match('END');\n  return node.template(content);\n}\n\n// {{#if}}\nop[\"if\"] = function(tag){\n  var this$1 = this;\n\n  var test = this.expression();\n  var consequent = [], alternate=[];\n\n  var container = consequent;\n  var statement = !tag? \"statement\" : \"attrs\";\n\n  this.match('END');\n\n  var ll, close;\n  while( ! (close = this.eat('CLOSE')) ){\n    ll = this$1.ll();\n    if( ll.type === 'OPEN' ){\n      switch( ll.value ){\n        case 'else':\n          container = alternate;\n          this$1.next();\n          this$1.match( 'END' );\n          break;\n        case 'elseif':\n          this$1.next();\n          alternate.push( this$1[\"if\"](tag) );\n          return node['if']( test, consequent, alternate );\n        default:\n          container.push( this$1[statement](true) );\n      }\n    }else{\n      container.push(this$1[statement](true));\n    }\n  }\n  // if statement not matched\n  if(close.value !== \"if\") { this.error('Unmatched if directive') }\n  return node[\"if\"](test, consequent, alternate);\n}\n\n\n// @mark   mustache syntax have natrure dis, canot with expression\n// {{#list}}\nop.list = function(){\n  var this$1 = this;\n\n  // sequence can be a list or hash\n  var sequence = this.expression(), variable, ll, track;\n  var consequent = [], alternate=[];\n  var container = consequent;\n\n  this.match('IDENT', 'as');\n\n  variable = this.match('IDENT').value;\n\n  if(this.eat('IDENT', 'by')){\n    if(this.eat('IDENT',variable + '_index')){\n      track = true;\n    }else{\n      track = this.expression();\n      if(track.constant){\n        // true is means constant, we handle it just like xxx_index.\n        track = true;\n      }\n    }\n  }\n\n  this.match('END');\n\n  while( !(ll = this.eat('CLOSE')) ){\n    if(this$1.eat('OPEN', 'else')){\n      container =  alternate;\n      this$1.match('END');\n    }else{\n      container.push(this$1.statement());\n    }\n  }\n  \n  if(ll.value !== 'list') { this.error('expect ' + 'list got ' + '/' + ll.value + ' ', ll.pos ); }\n  return node.list(sequence, variable, consequent, alternate, track);\n}\n\n\nop.expression = function(){\n  var expression;\n  if(this.eat('@(')){ //once bind\n    expression = this.expr();\n    expression.once = true;\n    this.match(')')\n  }else{\n    expression = this.expr();\n  }\n  return expression;\n}\n\nop.expr = function(){\n  this.depend = [];\n\n  var buffer = this.filter()\n\n  var body = buffer.get || buffer;\n  var setbody = buffer.set;\n  return node.expression(body, setbody, !this.depend.length);\n}\n\n\n// filter\n// assign ('|' filtername[':' args]) * \nop.filter = function(){\n  var this$1 = this;\n\n  var left = this.assign();\n  var ll = this.eat('|');\n  var buffer = [], setBuffer, prefix,\n    attr = \"t\", \n    set = left.set, get, \n    tmp = \"\";\n\n  if(ll){\n    if(set) { setBuffer = []; }\n\n    prefix = \"(function(\" + attr + \"){\";\n\n    do{\n      tmp = attr + \" = \" + ctxName + \"._f_('\" + this$1.match('IDENT').value+ \"' ).get.call( \"+_$3.ctxName +\",\" + attr ;\n      if(this$1.eat(':')){\n        tmp +=\", \"+ this$1.arguments(\"|\").join(\",\") + \");\"\n      }else{\n        tmp += ');'\n      }\n      buffer.push(tmp);\n      setBuffer && setBuffer.unshift( tmp.replace(\" ).get.call\", \" ).set.call\") );\n\n    }while(ll = this.eat('|'));\n    buffer.push(\"return \" + attr );\n    setBuffer && setBuffer.push(\"return \" + attr);\n\n    get =  prefix + buffer.join(\"\") + \"})(\"+left.get+\")\";\n    // we call back to value.\n    if(setBuffer){\n      // change _ss__(name, _p_) to _s__(name, filterFn(_p_));\n      set = set.replace(_$3.setName, \n        prefix + setBuffer.join(\"\") + \"})(\"+　_$3.setName　+\")\" );\n\n    }\n    // the set function is depend on the filter definition. if it have set method, the set will work\n    return this.getset(get, set);\n  }\n  return left;\n}\n\n// assign\n// left-hand-expr = condition\nop.assign = function(){\n  var left = this.condition(), ll;\n  if(ll = this.eat(['=', '+=', '-=', '*=', '/=', '%='])){\n    if(!left.set) { this.error('invalid lefthand expression in assignment expression'); }\n    return this.getset( left.set.replace( \",\" + _$3.setName, \",\" + this.condition().get ).replace(\"'='\", \"'\"+ll.type+\"'\"), left.set);\n    // return this.getset('(' + left.get + ll.type  + this.condition().get + ')', left.set);\n  }\n  return left;\n}\n\n// or\n// or ? assign : assign\nop.condition = function(){\n\n  var test = this.or();\n  if(this.eat('?')){\n    return this.getset([test.get + \"?\", \n      this.assign().get, \n      this.match(\":\").type, \n      this.assign().get].join(\"\"));\n  }\n\n  return test;\n}\n\n// and\n// and && or\nop.or = function(){\n\n  var left = this.and();\n\n  if(this.eat('||')){\n    return this.getset(left.get + '||' + this.or().get);\n  }\n\n  return left;\n}\n// equal\n// equal && and\nop.and = function(){\n\n  var left = this.equal();\n\n  if(this.eat('&&')){\n    return this.getset(left.get + '&&' + this.and().get);\n  }\n  return left;\n}\n// relation\n// \n// equal == relation\n// equal != relation\n// equal === relation\n// equal !== relation\nop.equal = function(){\n  var left = this.relation(), ll;\n  // @perf;\n  if( ll = this.eat(['==','!=', '===', '!=='])){\n    return this.getset(left.get + ll.type + this.equal().get);\n  }\n  return left\n}\n// relation < additive\n// relation > additive\n// relation <= additive\n// relation >= additive\n// relation in additive\nop.relation = function(){\n  var left = this.additive(), ll;\n  // @perf\n  if(ll = (this.eat(['<', '>', '>=', '<=']) || this.eat('IDENT', 'in') )){\n    return this.getset(left.get + ll.value + this.relation().get);\n  }\n  return left\n}\n// additive :\n// multive\n// additive + multive\n// additive - multive\nop.additive = function(){\n  var left = this.multive() ,ll;\n  if(ll= this.eat(['+','-']) ){\n    return this.getset(left.get + ll.value + this.additive().get);\n  }\n  return left\n}\n// multive :\n// unary\n// multive * unary\n// multive / unary\n// multive % unary\nop.multive = function(){\n  var left = this.range() ,ll;\n  if( ll = this.eat(['*', '/' ,'%']) ){\n    return this.getset(left.get + ll.type + this.multive().get);\n  }\n  return left;\n}\n\nop.range = function(){\n  var left = this.unary(), ll, right;\n\n  if(ll = this.eat('..')){\n    right = this.unary();\n    var body = \n      \"(function(start,end){var res = [],step=end>start?1:-1; for(var i = start; end>start?i <= end: i>=end; i=i+step){res.push(i); } return res })(\"+left.get+\",\"+right.get+\")\"\n    return this.getset(body);\n  }\n\n  return left;\n}\n\n\n\n// lefthand\n// + unary\n// - unary\n// ~ unary\n// ! unary\nop.unary = function(){\n  var ll;\n  if(ll = this.eat(['+','-','~', '!'])){\n    return this.getset('(' + ll.type + this.unary().get + ')') ;\n  }else{\n    return this.member()\n  }\n}\n\n// call[lefthand] :\n// member args\n// member [ expression ]\n// member . ident  \n\nop.member = function(base, last, pathes, prevBase){\n  var ll, path, extValue;\n\n\n  var onlySimpleAccessor = false;\n  if(!base){ //first\n    path = this.primary();\n    var type = typeof path;\n    if(type === 'string'){ \n      pathes = [];\n      pathes.push( path );\n      last = path;\n      extValue = extName + \".\" + path\n      base = ctxName + \"._sg_('\" + path + \"', \" + varName + \", \" + extName + \")\";\n      onlySimpleAccessor = true;\n    }else{ //Primative Type\n      if(path.get === 'this'){\n        base = ctxName;\n        pathes = ['this'];\n      }else{\n        pathes = null;\n        base = path.get;\n      }\n    }\n  }else{ // not first enter\n    if(typeof last === 'string' && isPath( last) ){ // is valid path\n      pathes.push(last);\n    }else{\n      if(pathes && pathes.length) { this.depend.push(pathes); }\n      pathes = null;\n    }\n  }\n  if(ll = this.eat(['[', '.', '('])){\n    switch(ll.type){\n      case '.':\n          // member(object, property, computed)\n        var tmpName = this.match('IDENT').value;\n        prevBase = base;\n        if( this.la() !== \"(\" ){ \n          base = ctxName + \"._sg_('\" + tmpName + \"', \" + base + \")\";\n        }else{\n          base += \"['\" + tmpName + \"']\";\n        }\n        return this.member( base, tmpName, pathes,  prevBase);\n      case '[':\n          // member(object, property, computed)\n        path = this.assign();\n        prevBase = base;\n        if( this.la() !== \"(\" ){ \n        // means function call, we need throw undefined error when call function\n        // and confirm that the function call wont lose its context\n          base = ctxName + \"._sg_(\" + path.get + \", \" + base + \")\";\n        }else{\n          base += \"[\" + path.get + \"]\";\n        }\n        this.match(']')\n        return this.member(base, path, pathes, prevBase);\n      case '(':\n        // call(callee, args)\n        var args = this.arguments().join(',');\n        base =  base+\"(\" + args +\")\";\n        this.match(')')\n        return this.member(base, null, pathes);\n    }\n  }\n  if( pathes && pathes.length ) { this.depend.push( pathes ); }\n  var res =  {get: base};\n  if(last){\n    res.set = ctxName + \"._ss_(\" + \n        (last.get? last.get : \"'\"+ last + \"'\") + \n        \",\"+ _$3.setName + \",\"+ \n        (prevBase?prevBase:_$3.varName) + \n        \", '=', \"+ ( onlySimpleAccessor? 1 : 0 ) + \")\";\n  \n  }\n  return res;\n}\n\n/**\n * \n */\nop.arguments = function(end){\n  var this$1 = this;\n\n  end = end || ')'\n  var args = [];\n  do{\n    if(this$1.la() !== end){\n      args.push(this$1.assign().get)\n    }\n  }while( this.eat(','));\n  return args\n}\n\n\n// primary :\n// this \n// ident\n// literal\n// array\n// object\n// ( expression )\n\nop.primary = function(){\n  var ll = this.ll();\n  switch(ll.type){\n    case \"{\":\n      return this.object();\n    case \"[\":\n      return this.array();\n    case \"(\":\n      return this.paren();\n    // literal or ident\n    case 'STRING':\n      this.next();\n      return this.getset(\"'\" + ll.value + \"'\")\n    case 'NUMBER':\n      this.next();\n      return this.getset(\"\"+ll.value);\n    case \"IDENT\":\n      this.next();\n      if(isKeyWord(ll.value)){\n        return this.getset( ll.value );\n      }\n      return ll.value;\n    default: \n      this.error('Unexpected Token: ' + ll.type);\n  }\n}\n\n// object\n//  {propAssign [, propAssign] * [,]}\n\n// propAssign\n//  prop : assign\n\n// prop\n//  STRING\n//  IDENT\n//  NUMBER\n\nop.object = function(){\n  var this$1 = this;\n\n  var code = [this.match('{').type];\n\n  var ll = this.eat( ['STRING', 'IDENT', 'NUMBER'] );\n  while(ll){\n    code.push(\"'\" + ll.value + \"'\" + this$1.match(':').type);\n    var get = this$1.assign().get;\n    code.push(get);\n    ll = null;\n    if(this$1.eat(\",\") && (ll = this$1.eat(['STRING', 'IDENT', 'NUMBER'])) ) { code.push(\",\"); }\n  }\n  code.push(this.match('}').type);\n  return {get: code.join(\"\")}\n}\n\n// array\n// [ assign[,assign]*]\nop.array = function(){\n  var this$1 = this;\n\n  var code = [this.match('[').type], item;\n  if( this.eat(\"]\") ){\n\n     code.push(\"]\");\n  } else {\n    while(item = this.assign()){\n      code.push(item.get);\n      if(this$1.eat(',')) { code.push(\",\"); }\n      else { break; }\n    }\n    code.push(this.match(']').type);\n  }\n  return {get: code.join(\"\")};\n}\n\n// '(' expression ')'\nop.paren = function(){\n  this.match('(');\n  var res = this.filter()\n  res.get = '(' + res.get + ')';\n  this.match(')');\n  return res;\n}\n\nop.getset = function(get, set){\n  return {\n    get: get,\n    set: set\n  }\n}\n\n\n\nvar Parser_1 = Parser$1;\n\n// (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n// Backbone may be freely distributed under the MIT license.\n// For all details and documentation:\n// http://backbonejs.org\n\n// klass: a classical JS OOP façade\n// https://github.com/ded/klass\n// License MIT (c) Dustin Diaz 2014\n  \n// inspired by backbone's extend and klass\nvar _$4 = util;\nvar fnTest = /xy/.test(function(){\"xy\";}) ? /\\bsupr\\b/:/.*/;\nvar isFn = function(o){return typeof o === \"function\"};\n\n\nfunction wrap(k, fn, supro) {\n  return function () {\n    var tmp = this.supr;\n    this.supr = supro[k];\n    var ret = fn.apply(this, arguments);\n    this.supr = tmp;\n    return ret;\n  }\n}\n\nfunction process( what, o, supro ) {\n  for ( var k in o ) {\n    if (o.hasOwnProperty(k)) {\n\n      what[k] = isFn( o[k] ) && isFn( supro[k] ) && \n        fnTest.test( o[k] ) ? wrap(k, o[k], supro) : o[k];\n    }\n  }\n}\n\n// if the property is [\"events\", \"data\", \"computed\"] , we should merge them\nvar merged = [\"events\", \"data\", \"computed\"];\nvar mlen = merged.length;\nvar extend$2 = function extend$2(o){\n  o = o || {};\n  var supr = this, proto,\n    supro = supr && supr.prototype || {};\n\n  if(typeof o === 'function'){\n    proto = o.prototype;\n    o.implement = implement;\n    o.extend = extend$2;\n    return o;\n  } \n  \n  function fn() {\n    supr.apply(this, arguments);\n  }\n\n  proto = _$4.createProto(fn, supro);\n\n  function implement(o){\n    // we need merge the merged property\n    var len = mlen;\n    for(;len--;){\n      var prop = merged[len];\n      if(o.hasOwnProperty(prop) && proto.hasOwnProperty(prop)){\n        _$4.extend(proto[prop], o[prop], true) \n        delete o[prop];\n      }\n    }\n\n\n    process(proto, o, supro); \n    return this;\n  }\n\n\n\n  fn.implement = implement\n  fn.implement(o)\n  if(supr.__after__) { supr.__after__.call(fn, supr, o); }\n  fn.extend = extend$2;\n  return fn;\n}\n\nvar _const = {\n  'COMPONENT_TYPE': 1,\n  'ELEMENT_TYPE': 2,\n  'NAMESPACE': {\n    html: \"http://www.w3.org/1999/xhtml\",\n    svg: \"http://www.w3.org/2000/svg\"\n  }\n}\n\nvar dom_1 = createCommonjsModule(function (module) {\n// thanks for angular && mootools for some concise&cross-platform  implemention\n// =====================================\n\n// The MIT License\n// Copyright (c) 2010-2014 Google, Inc. http://angularjs.org\n\n// ---\n// license: MIT-style license. http://mootools.net\n\n\nvar dom = module.exports;\nvar env$$1 = env;\nvar _ = util;\nvar consts = _const;\nvar tNode = document.createElement('div')\nvar addEvent, removeEvent;\nvar noop = function(){}\n\nvar namespaces = consts.NAMESPACE;\n\ndom.body = document.body;\n\ndom.doc = document;\n\n// camelCase\nfunction camelCase(str){\n  return (\"\" + str).replace(/-\\D/g, function(match){\n    return match.charAt(1).toUpperCase();\n  });\n}\n\n\ndom.tNode = tNode;\n\nif(tNode.addEventListener){\n  addEvent = function(node, type, fn) {\n    node.addEventListener(type, fn, false);\n  }\n  removeEvent = function(node, type, fn) {\n    node.removeEventListener(type, fn, false) \n  }\n}else{\n  addEvent = function(node, type, fn) {\n    node.attachEvent('on' + type, fn);\n  }\n  removeEvent = function(node, type, fn) {\n    node.detachEvent('on' + type, fn); \n  }\n}\n\n\ndom.msie = parseInt((/msie (\\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1]);\nif (isNaN(dom.msie)) {\n  dom.msie = parseInt((/trident\\/.*; rv:(\\d+)/.exec(navigator.userAgent.toLowerCase()) || [])[1]);\n}\n\ndom.find = function(sl){\n  if(document.querySelector) {\n    try{\n      return document.querySelector(sl);\n    }catch(e){\n\n    }\n  }\n  if(sl.indexOf('#')!==-1) { return document.getElementById( sl.slice(1) ); }\n}\n\n\ndom.inject = function(node, refer, position){\n\n  position = position || 'bottom';\n  if(!node) { return ; }\n  if(Array.isArray(node)){\n    var tmp = node;\n    node = dom.fragment();\n    for(var i = 0,len = tmp.length; i < len ;i++){\n      node.appendChild(tmp[i])\n    }\n  }\n\n  var firstChild, next;\n  switch(position){\n    case 'bottom':\n      refer.appendChild( node );\n      break;\n    case 'top':\n      if( firstChild = refer.firstChild ){\n        refer.insertBefore( node, refer.firstChild );\n      }else{\n        refer.appendChild( node );\n      }\n      break;\n    case 'after':\n      if( next = refer.nextSibling ){\n        next.parentNode.insertBefore( node, next );\n      }else{\n        refer.parentNode.appendChild( node );\n      }\n      break;\n    case 'before':\n      refer.parentNode.insertBefore( node, refer );\n  }\n}\n\n\ndom.id = function(id){\n  return document.getElementById(id);\n}\n\n// createElement \ndom.create = function(type, ns, attrs){\n  if(ns === 'svg'){\n    if(!env$$1.svg) { throw Error('the env need svg support') }\n    ns = namespaces.svg;\n  }\n  return !ns? document.createElement(type): document.createElementNS(ns, type);\n}\n\n// documentFragment\ndom.fragment = function(){\n  return document.createDocumentFragment();\n}\n\n\n\nvar specialAttr = {\n  'class': function(node, value){\n     ('className' in node && (!node.namespaceURI || node.namespaceURI === namespaces.html  )) ? \n      node.className = (value || '') : node.setAttribute('class', value);\n  },\n  'for': function(node, value){\n    ('htmlFor' in node) ? node.htmlFor = value : node.setAttribute('for', value);\n  },\n  'style': function(node, value){\n    (node.style) ? node.style.cssText = value : node.setAttribute('style', value);\n  },\n  'value': function(node, value){\n    node.value = (value != null) ? value : '';\n  }\n}\n\n\n// attribute Setter & Getter\ndom.attr = function(node, name, value){\n  if (_.isBooleanAttr(name)) {\n    if (typeof value !== 'undefined') {\n      if (!!value) {\n        node[name] = true;\n        node.setAttribute(name, name);\n        // lt ie7 . the javascript checked setting is in valid\n        //http://bytes.com/topic/javascript/insights/799167-browser-quirk-dynamically-appended-checked-checkbox-does-not-appear-checked-ie\n        if(dom.msie && dom.msie <=7 ) { node.defaultChecked = true }\n      } else {\n        node[name] = false;\n        node.removeAttribute(name);\n      }\n    } else {\n      return (node[name] ||\n               (node.attributes.getNamedItem(name)|| noop).specified) ? name : undefined;\n    }\n  } else if (typeof (value) !== 'undefined') {\n    // if in specialAttr;\n    if(specialAttr[name]) { specialAttr[name](node, value); }\n    else if(value === null) { node.removeAttribute(name) }\n    else { node.setAttribute(name, value); }\n  } else if (node.getAttribute) {\n    // the extra argument \"2\" is to get the right thing for a.href in IE, see jQuery code\n    // some elements (e.g. Document) don't have get attribute, so return undefined\n    var ret = node.getAttribute(name, 2);\n    // normalize non-existing attributes to undefined (as jQuery)\n    return ret === null ? undefined : ret;\n  }\n}\n\n\ndom.on = function(node, type, handler){\n  var types = type.split(' ');\n  handler.real = function(ev){\n    var $event = new Event(ev);\n    $event.origin = node;\n    handler.call(node, $event);\n  }\n  types.forEach(function(type){\n    type = fixEventName(node, type);\n    addEvent(node, type, handler.real);\n  });\n}\ndom.off = function(node, type, handler){\n  var types = type.split(' ');\n  handler = handler.real || handler;\n  types.forEach(function(type){\n    type = fixEventName(node, type);\n    removeEvent(node, type, handler);\n  })\n}\n\n\ndom.text = (function (){\n  var map = {};\n  if (dom.msie && dom.msie < 9) {\n    map[1] = 'innerText';    \n    map[3] = 'nodeValue';    \n  } else {\n    map[1] = map[3] = 'textContent';\n  }\n  \n  return function (node, value) {\n    var textProp = map[node.nodeType];\n    if (value == null) {\n      return textProp ? node[textProp] : '';\n    }\n    node[textProp] = value;\n  }\n})();\n\n\ndom.html = function( node, html ){\n  if(typeof html === \"undefined\"){\n    return node.innerHTML;\n  }else{\n    node.innerHTML = html;\n  }\n}\n\ndom.replace = function(node, replaced){\n  if(replaced.parentNode) { replaced.parentNode.replaceChild(node, replaced); }\n}\n\ndom.remove = function(node){\n  if(node.parentNode) { node.parentNode.removeChild(node); }\n}\n\n// css Settle & Getter from angular\n// =================================\n// it isnt computed style \ndom.css = function(node, name, value){\n  if( _.typeOf(name) === \"object\" ){\n    for(var i in name){\n      if( name.hasOwnProperty(i) ){\n        dom.css( node, i, name[i] );\n      }\n    }\n    return;\n  }\n  if ( typeof value !== \"undefined\" ) {\n\n    name = camelCase(name);\n    if(name) { node.style[name] = value; }\n\n  } else {\n\n    var val;\n    if (dom.msie <= 8) {\n      // this is some IE specific weirdness that jQuery 1.6.4 does not sure why\n      val = node.currentStyle && node.currentStyle[name];\n      if (val === '') { val = 'auto'; }\n    }\n    val = val || node.style[name];\n    if (dom.msie <= 8) {\n      val = val === '' ? undefined : val;\n    }\n    return  val;\n  }\n}\n\ndom.addClass = function(node, className){\n  var current = node.className || \"\";\n  if ((\" \" + current + \" \").indexOf(\" \" + className + \" \") === -1) {\n    node.className = current? ( current + \" \" + className ) : className;\n  }\n}\n\ndom.delClass = function(node, className){\n  var current = node.className || \"\";\n  node.className = (\" \" + current + \" \").replace(\" \" + className + \" \", \" \").trim();\n}\n\ndom.hasClass = function(node, className){\n  var current = node.className || \"\";\n  return (\" \" + current + \" \").indexOf(\" \" + className + \" \") !== -1;\n}\n\n\n\n// simple Event wrap\n\n//http://stackoverflow.com/questions/11068196/ie8-ie7-onchange-event-is-emited-only-after-repeated-selection\nfunction fixEventName(elem, name){\n  return (name === 'change'  &&  dom.msie < 9 && \n      (elem && elem.tagName && elem.tagName.toLowerCase()==='input' && \n        (elem.type === 'checkbox' || elem.type === 'radio')\n      )\n    )? 'click': name;\n}\n\nvar rMouseEvent = /^(?:click|dblclick|contextmenu|DOMMouseScroll|mouse(?:\\w+))$/\nvar doc = document;\ndoc = (!doc.compatMode || doc.compatMode === 'CSS1Compat') ? doc.documentElement : doc.body;\nfunction Event(ev){\n  ev = ev || window.event;\n  if(ev._fixed) { return ev; }\n  this.event = ev;\n  this.target = ev.target || ev.srcElement;\n\n  var type = this.type = ev.type;\n  var button = this.button = ev.button;\n\n  // if is mouse event patch pageX\n  if(rMouseEvent.test(type)){ //fix pageX\n    this.pageX = (ev.pageX != null) ? ev.pageX : ev.clientX + doc.scrollLeft;\n    this.pageY = (ev.pageX != null) ? ev.pageY : ev.clientY + doc.scrollTop;\n    if (type === 'mouseover' || type === 'mouseout'){// fix relatedTarget\n      var related = ev.relatedTarget || ev[(type === 'mouseover' ? 'from' : 'to') + 'Element'];\n      while (related && related.nodeType === 3) { related = related.parentNode; }\n      this.relatedTarget = related;\n    }\n  }\n  // if is mousescroll\n  if (type === 'DOMMouseScroll' || type === 'mousewheel'){\n    // ff ev.detail: 3    other ev.wheelDelta: -120\n    this.wheelDelta = (ev.wheelDelta) ? ev.wheelDelta / 120 : -(ev.detail || 0) / 3;\n  }\n  \n  // fix which\n  this.which = ev.which || ev.keyCode;\n  if( !this.which && button !== undefined){\n    // http://api.jquery.com/event.which/ use which\n    this.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\n  }\n  this._fixed = true;\n}\n\n_.extend(Event.prototype, {\n  immediateStop: _.isFalse,\n  stop: function(){\n    this.preventDefault().stopPropagation();\n  },\n  preventDefault: function(){\n    if (this.event.preventDefault) { this.event.preventDefault(); }\n    else { this.event.returnValue = false; }\n    return this;\n  },\n  stopPropagation: function(){\n    if (this.event.stopPropagation) { this.event.stopPropagation(); }\n    else { this.event.cancelBubble = true; }\n    return this;\n  },\n  stopImmediatePropagation: function(){\n    if(this.event.stopImmediatePropagation) { this.event.stopImmediatePropagation(); }\n  }\n})\n\n\ndom.nextFrame = (function(){\n    var request = window.requestAnimationFrame ||\n                  window.webkitRequestAnimationFrame ||\n                  window.mozRequestAnimationFrame|| \n                  function(callback){\n                    setTimeout(callback, 16)\n                  }\n\n    var cancel = window.cancelAnimationFrame ||\n                 window.webkitCancelAnimationFrame ||\n                 window.mozCancelAnimationFrame ||\n                 window.webkitCancelRequestAnimationFrame ||\n                 function(tid){\n                    clearTimeout(tid)\n                 }\n  \n  return function(callback){\n    var id = request(callback);\n    return function(){ cancel(id); }\n  }\n})();\n\n// 3ks for angular's raf  service\nvar k\ndom.nextReflow = dom.msie? function(callback){\n  return dom.nextFrame(function(){\n    k = document.body.offsetWidth;\n    callback();\n  })\n}: dom.nextFrame;\n});\n\nvar _$5 = util;\n\nfunction simpleDiff(now, old){\n  var nlen = now.length;\n  var olen = old.length;\n  if(nlen !== olen){\n    return true;\n  }\n  for(var i = 0; i < nlen ; i++){\n    if(now[i] !== old[i]) { return  true; }\n  }\n  return false\n\n}\n\nfunction equals(a,b){\n  return a === b;\n}\n\n// array1 - old array\n// array2 - new array\nfunction ld(array1, array2, equalFn){\n  var n = array1.length;\n  var m = array2.length;\n  var equalFn = equalFn || equals;\n  var matrix = [];\n  for(var i = 0; i <= n; i++){\n    matrix.push([i]);\n  }\n  for(var j=1;j<=m;j++){\n    matrix[0][j]=j;\n  }\n  for(var i = 1; i <= n; i++){\n    for(var j = 1; j <= m; j++){\n      if(equalFn(array1[i-1], array2[j-1])){\n        matrix[i][j] = matrix[i-1][j-1];\n      }else{\n        matrix[i][j] = Math.min(\n          matrix[i-1][j]+1, //delete\n          matrix[i][j-1]+1//add\n          )\n      }\n    }\n  }\n  return matrix;\n}\n// arr2 - new array\n// arr1 - old array\nfunction diffArray(arr2, arr1, diff, diffFn) {\n  if(!diff) { return simpleDiff(arr2, arr1); }\n  var matrix = ld(arr1, arr2, diffFn)\n  var n = arr1.length;\n  var i = n;\n  var m = arr2.length;\n  var j = m;\n  var edits = [];\n  var current = matrix[i][j];\n  while(i>0 || j>0){\n  // the last line\n    if (i === 0) {\n      edits.unshift(3);\n      j--;\n      continue;\n    }\n    // the last col\n    if (j === 0) {\n      edits.unshift(2);\n      i--;\n      continue;\n    }\n    var northWest = matrix[i - 1][j - 1];\n    var west = matrix[i - 1][j];\n    var north = matrix[i][j - 1];\n\n    var min = Math.min(north, west, northWest);\n\n    if (min === west) {\n      edits.unshift(2); //delete\n      i--;\n      current = west;\n    } else if (min === northWest ) {\n      if (northWest === current) {\n        edits.unshift(0); //no change\n      } else {\n        edits.unshift(1); //update\n        current = northWest;\n      }\n      i--;\n      j--;\n    } else {\n      edits.unshift(3); //add\n      j--;\n      current = north;\n    }\n  }\n  var LEAVE = 0;\n  var ADD = 3;\n  var DELELE = 2;\n  var UPDATE = 1;\n  var n = 0;m=0;\n  var steps = [];\n  var step = {index: null, add:0, removed:[]};\n\n  for(var i=0;i<edits.length;i++){\n    if(edits[i] > 0 ){ // NOT LEAVE\n      if(step.index === null){\n        step.index = m;\n      }\n    } else { //LEAVE\n      if(step.index != null){\n        steps.push(step)\n        step = {index: null, add:0, removed:[]};\n      }\n    }\n    switch(edits[i]){\n      case LEAVE:\n        n++;\n        m++;\n        break;\n      case ADD:\n        step.add++;\n        m++;\n        break;\n      case DELELE:\n        step.removed.push(arr1[n])\n        n++;\n        break;\n      case UPDATE:\n        step.add++;\n        step.removed.push(arr1[n])\n        n++;\n        m++;\n        break;\n    }\n  }\n  if(step.index != null){\n    steps.push(step)\n  }\n  return steps\n}\n\n\n\n// diffObject\n// ----\n// test if obj1 deepEqual obj2\nfunction diffObject( now, last, diff ){\n\n\n  if(!diff){\n\n    for( var j in now ){\n      if( last[j] !== now[j] ) { return true }\n    }\n\n    for( var n in last ){\n      if(last[n] !== now[n]) { return true; }\n    }\n\n  }else{\n\n    var nKeys = _$5.keys(now);\n    var lKeys = _$5.keys(last);\n\n    /**\n     * [description]\n     * @param  {[type]} a    [description]\n     * @param  {[type]} b){                   return now[b] [description]\n     * @return {[type]}      [description]\n     */\n    return diffArray(nKeys, lKeys, diff, function(a, b){\n      return now[b] === last[a];\n    });\n\n  }\n\n  return false;\n\n\n}\n\nvar diff = {\n  diffArray: diffArray,\n  diffObject: diffObject\n}\n\nvar _$6 = util;\nvar dom$1  = dom_1;\nvar animate = {};\nvar env$3 = env;\n\n\nvar transitionEnd = 'transitionend';\nvar animationEnd = 'animationend';\nvar transitionProperty = 'transition';\nvar animationProperty = 'animation';\n\nif(!('ontransitionend' in window)){\n  if('onwebkittransitionend' in window) {\n    \n    // Chrome/Saf (+ Mobile Saf)/Android\n    transitionEnd += ' webkitTransitionEnd';\n    transitionProperty = 'webkitTransition'\n  } else if('onotransitionend' in dom$1.tNode || navigator.appName === 'Opera') {\n\n    // Opera\n    transitionEnd += ' oTransitionEnd';\n    transitionProperty = 'oTransition';\n  }\n}\nif(!('onanimationend' in window)){\n  if ('onwebkitanimationend' in window){\n    // Chrome/Saf (+ Mobile Saf)/Android\n    animationEnd += ' webkitAnimationEnd';\n    animationProperty = 'webkitAnimation';\n\n  }else if ('onoanimationend' in dom$1.tNode){\n    // Opera\n    animationEnd += ' oAnimationEnd';\n    animationProperty = 'oAnimation';\n  }\n}\n\n/**\n * inject node with animation\n * @param  {[type]} node      [description]\n * @param  {[type]} refer     [description]\n * @param  {[type]} direction [description]\n * @return {[type]}           [description]\n */\nanimate.inject = function( node, refer ,direction, callback ){\n  callback = callback || _$6.noop;\n  if( Array.isArray(node) ){\n    var fragment = dom$1.fragment();\n    var count=0;\n\n    for(var i = 0,len = node.length;i < len; i++ ){\n      fragment.appendChild(node[i]); \n    }\n    dom$1.inject(fragment, refer, direction);\n\n    // if all nodes is done, we call the callback\n    var enterCallback = function (){\n      count++;\n      if( count === len ) { callback(); }\n    }\n    if(len === count) { callback(); }\n    for( i = 0; i < len; i++ ){\n      if(node[i].onenter){\n        node[i].onenter(enterCallback);\n      }else{\n        enterCallback();\n      }\n    }\n  }else{\n    dom$1.inject( node, refer, direction );\n    if(node.onenter){\n      node.onenter(callback)\n    }else{\n      callback();\n    }\n  }\n}\n\n/**\n * remove node with animation\n * @param  {[type]}   node     [description]\n * @param  {Function} callback [description]\n * @return {[type]}            [description]\n */\nanimate.remove = function(node, callback){\n  if(!node) { return; }\n  var count = 0;\n  function loop(){\n    count++;\n    if(count === len) { callback && callback() }\n  }\n  if(Array.isArray(node)){\n    for(var i = 0, len = node.length; i < len ; i++){\n      animate.remove(node[i], loop)\n    }\n    return node;\n  }\n  if(node.onleave){\n    node.onleave(function(){\n      removeDone(node, callback)\n    })\n  }else{\n    removeDone(node, callback)\n  }\n}\n\nvar removeDone = function (node, callback){\n    dom$1.remove(node);\n    callback && callback();\n}\n\n\n\nanimate.startClassAnimate = function ( node, className,  callback, mode ){\n  var activeClassName, timeout, tid, onceAnim;\n  if( (!animationEnd && !transitionEnd) || env$3.isRunning ){\n    return callback();\n  }\n\n  if(mode !== 4){\n    onceAnim = _$6.once(function onAnimateEnd(){\n      if(tid) { clearTimeout(tid); }\n\n      if(mode === 2) {\n        dom$1.delClass(node, activeClassName);\n      }\n      if(mode !== 3){ // mode hold the class\n        dom$1.delClass(node, className);\n      }\n      dom$1.off(node, animationEnd, onceAnim)\n      dom$1.off(node, transitionEnd, onceAnim)\n\n      callback();\n\n    });\n  }else{\n    onceAnim = _$6.once(function onAnimateEnd(){\n      if(tid) { clearTimeout(tid); }\n      callback();\n    });\n  }\n  if(mode === 2){ // auto removed\n    dom$1.addClass( node, className );\n\n    activeClassName = _$6.map(className.split(/\\s+/), function(name){\n       return name + '-active';\n    }).join(\" \");\n\n    dom$1.nextReflow(function(){\n      dom$1.addClass( node, activeClassName );\n      timeout = getMaxTimeout( node );\n      tid = setTimeout( onceAnim, timeout );\n    });\n\n  }else if(mode===4){\n    dom$1.nextReflow(function(){\n      dom$1.delClass( node, className );\n      timeout = getMaxTimeout( node );\n      tid = setTimeout( onceAnim, timeout );\n    });\n\n  }else{\n    dom$1.nextReflow(function(){\n      dom$1.addClass( node, className );\n      timeout = getMaxTimeout( node );\n      tid = setTimeout( onceAnim, timeout );\n    });\n  }\n\n\n\n  dom$1.on( node, animationEnd, onceAnim )\n  dom$1.on( node, transitionEnd, onceAnim )\n  return onceAnim;\n}\n\n\nanimate.startStyleAnimate = function(node, styles, callback){\n  var timeout, onceAnim, tid;\n\n  dom$1.nextReflow(function(){\n    dom$1.css( node, styles );\n    timeout = getMaxTimeout( node );\n    tid = setTimeout( onceAnim, timeout );\n  });\n\n\n  onceAnim = _$6.once(function onAnimateEnd(){\n    if(tid) { clearTimeout(tid); }\n\n    dom$1.off(node, animationEnd, onceAnim)\n    dom$1.off(node, transitionEnd, onceAnim)\n\n    callback();\n\n  });\n\n  dom$1.on( node, animationEnd, onceAnim )\n  dom$1.on( node, transitionEnd, onceAnim )\n\n  return onceAnim;\n}\n\n\n/**\n * get maxtimeout\n * @param  {Node} node \n * @return {[type]}   [description]\n */\nfunction getMaxTimeout(node){\n  var timeout = 0,\n    tDuration = 0,\n    tDelay = 0,\n    aDuration = 0,\n    aDelay = 0,\n    ratio = 5 / 3,\n    styles;\n\n  if(window.getComputedStyle){\n\n    styles = window.getComputedStyle(node),\n    tDuration = getMaxTime( styles[transitionProperty + 'Duration']) || tDuration;\n    tDelay = getMaxTime( styles[transitionProperty + 'Delay']) || tDelay;\n    aDuration = getMaxTime( styles[animationProperty + 'Duration']) || aDuration;\n    aDelay = getMaxTime( styles[animationProperty + 'Delay']) || aDelay;\n    timeout = Math.max( tDuration+tDelay, aDuration + aDelay );\n\n  }\n  return timeout * 1000 * ratio;\n}\n\nfunction getMaxTime(str){\n\n  var maxTimeout = 0, time;\n\n  if(!str) { return 0; }\n\n  str.split(\",\").forEach(function(str){\n\n    time = parseFloat(str);\n    if( time > maxTimeout ) { maxTimeout = time; }\n\n  });\n\n  return maxTimeout;\n}\n\nvar animate_1 = animate;\n\nvar combine_1 = createCommonjsModule(function (module) {\n// some nested  operation in ast \n// --------------------------------\n\nvar dom = dom_1;\nvar animate = animate_1;\n\nvar combine = module.exports = {\n\n  // get the initial dom in object\n  node: function(item){\n    var children,node, nodes;\n    if(!item) { return; }\n    if(item.element) { return item.element; }\n    if(typeof item.node === \"function\") { return item.node(); }\n    if(typeof item.nodeType === \"number\") { return item; }\n    if(item.group) { return combine.node(item.group) }\n    if(children = item.children){\n      if(children.length === 1){\n        return combine.node(children[0]);\n      }\n      nodes = [];\n      for(var i = 0, len = children.length; i < len; i++ ){\n        node = combine.node(children[i]);\n        if(Array.isArray(node)){\n          nodes.push.apply(nodes, node)\n        }else if(node) {\n          nodes.push(node)\n        }\n      }\n      return nodes;\n    }\n  },\n  // @TODO remove _gragContainer\n  inject: function(node, pos ){\n    var group = this;\n    var fragment = combine.node(group.group || group);\n    if(node === false) {\n      animate.remove(fragment)\n      return group;\n    }else{\n      if(!fragment) { return group; }\n      if(typeof node === 'string') { node = dom.find(node); }\n      if(!node) { throw Error('injected node is not found'); }\n      // use animate to animate firstchildren\n      animate.inject(fragment, node, pos);\n    }\n    // if it is a component\n    if(group.$emit) {\n      var preParent = group.parentNode;\n      var newParent = (pos ==='after' || pos === 'before')? node.parentNode : node;\n      group.parentNode = newParent;\n      group.$emit(\"$inject\", node, pos, preParent);\n    }\n    return group;\n  },\n\n  // get the last dom in object(for insertion operation)\n  last: function(item){\n    var children = item.children;\n\n    if(typeof item.last === \"function\") { return item.last(); }\n    if(typeof item.nodeType === \"number\") { return item; }\n\n    if(children && children.length) { return combine.last(children[children.length - 1]); }\n    if(item.group) { return combine.last(item.group); }\n\n  },\n\n  destroy: function(item, first){\n    if(!item) { return; }\n    if(Array.isArray(item)){\n      for(var i = 0, len = item.length; i < len; i++ ){\n        combine.destroy(item[i], first);\n      }\n    }\n    var children = item.children;\n    if(typeof item.destroy === \"function\") { return item.destroy(first); }\n    if(typeof item.nodeType === \"number\" && first)  { dom.remove(item); }\n    if(children && children.length){\n      combine.destroy(children, true);\n      item.children = null;\n    }\n  }\n\n}\n\n\n// @TODO: need move to dom.js\ndom.element = function( component, all ){\n  if(!component) { return !all? null: []; }\n  var nodes = combine.node( component );\n  if( nodes.nodeType === 1 ) { return all? [nodes]: nodes; }\n  var elements = [];\n  for(var i = 0; i<nodes.length ;i++){\n    var node = nodes[i];\n    if( node && node.nodeType === 1){\n      if(!all) { return node; }\n      elements.push(node);\n    } \n  }\n  return !all? elements[0]: elements;\n}\n});\n\nvar _$7 = util;\nvar combine$1 = combine_1\n\nfunction Group$1(list){\n  this.children = list || [];\n}\n\n\nvar o = _$7.extend(Group$1.prototype, {\n  destroy: function(first){\n    combine$1.destroy(this.children, first);\n    if(this.ondestroy) { this.ondestroy(); }\n    this.children = null;\n  },\n  get: function(i){\n    return this.children[i]\n  },\n  push: function(item){\n    this.children.push( item );\n  }\n})\no.inject = o.$inject = combine$1.inject\n\n\n\nvar group = Group$1;\n\nvar walkers_1 = createCommonjsModule(function (module) {\nvar diffArray = diff.diffArray;\nvar combine = combine_1;\nvar animate = animate_1;\nvar node = node$1;\nvar Group = group;\nvar dom = dom_1;\nvar _ = util;\n\n\nvar walkers = module.exports = {};\n\nwalkers.list = function(ast, options){\n\n  var Regular = walkers.Regular;  \n  var placeholder = document.createComment(\"Regular list\"),\n    namespace = options.namespace,\n    extra = options.extra;\n  var self = this;\n  var group$$1 = new Group([placeholder]);\n  var indexName = ast.variable + '_index';\n  var keyName = ast.variable + '_key';\n  var variable = ast.variable;\n  var alternate = ast.alternate;\n  var track = ast.track, keyOf, extraObj;\n\n  if( track && track !== true ){\n    track = this._touchExpr(track);\n    extraObj = _.createObject(extra);\n    keyOf = function( item, index ){\n      extraObj[ variable ] = item;\n      extraObj[ indexName ] = index;\n      // @FIX keyName\n      return track.get( self, extraObj );\n    }\n  }\n\n  function removeRange(index, rlen){\n    for(var j = 0; j< rlen; j++){ //removed\n      var removed = group$$1.children.splice( index + 1, 1)[0];\n      if(removed) { removed.destroy(true); }\n    }\n  }\n\n  function addRange(index, end, newList, rawNewValue){\n    for(var o = index; o < end; o++){ //add\n      // prototype inherit\n      var item = newList[o];\n      var data = {};\n      updateTarget(data, o, item, rawNewValue);\n\n      data = _.createObject(extra, data);\n      var section = self.$compile(ast.body, {\n        extra: data,\n        namespace:namespace,\n        record: true,\n        outer: options.outer\n      })\n      section.data = data;\n      // autolink\n      var insert =  combine.last(group$$1.get(o));\n      if(insert.parentNode){\n        animate.inject(combine.node(section),insert, 'after');\n      }\n      // insert.parentNode.insertBefore(combine.node(section), insert.nextSibling);\n      group$$1.children.splice( o + 1 , 0, section);\n    }\n  }\n\n  function updateTarget(target, index, item, rawNewValue){\n\n      target[ indexName ] = index;\n      if( rawNewValue ){\n        target[ keyName ] = item;\n        target[ variable ] = rawNewValue[ item ];\n      }else{\n        target[ variable ] = item;\n        target[keyName] = null\n      }\n  }\n\n\n  function updateRange(start, end, newList, rawNewValue){\n    for(var k = start; k < end; k++){ // no change\n      var sect = group$$1.get( k + 1 ), item = newList[ k ];\n      updateTarget(sect.data, k, item, rawNewValue);\n    }\n  }\n\n  function updateLD(newList, oldList, splices , rawNewValue ){\n\n    var cur = placeholder;\n    var m = 0, len = newList.length;\n\n    if(!splices && (len !==0 || oldList.length !==0)  ){\n      splices = diffArray(newList, oldList, true);\n    }\n\n    if(!splices || !splices.length) { return; }\n      \n    for(var i = 0; i < splices.length; i++){ //init\n      var splice = splices[i];\n      var index = splice.index; // beacuse we use a comment for placeholder\n      var removed = splice.removed;\n      var add = splice.add;\n      var rlen = removed.length;\n      // for track\n      if( track && rlen && add ){\n        var minar = Math.min(rlen, add);\n        var tIndex = 0;\n        while(tIndex < minar){\n          if( keyOf(newList[index], index) !== keyOf( removed[0], index ) ){\n            removeRange(index, 1)\n            addRange(index, index+1, newList, rawNewValue)\n          }\n          removed.shift();\n          add--;\n          index++;\n          tIndex++;\n        }\n        rlen = removed.length;\n      }\n      // update\n      updateRange(m, index, newList, rawNewValue);\n\n      removeRange( index ,rlen)\n\n      addRange(index, index+add, newList, rawNewValue)\n\n      m = index + add - rlen;\n      m  = m < 0? 0 : m;\n\n    }\n    if(m < len){\n      for(var i = m; i < len; i++){\n        var pair = group$$1.get(i + 1);\n        pair.data[indexName] = i;\n        // @TODO fix keys\n      }\n    }\n  }\n\n  // if the track is constant test.\n  function updateSimple(newList, oldList, rawNewValue ){\n\n    var nlen = newList.length;\n    var olen = oldList.length;\n    var mlen = Math.min(nlen, olen);\n\n    updateRange(0, mlen, newList, rawNewValue)\n    if(nlen < olen){ //need add\n      removeRange(nlen, olen-nlen);\n    }else if(nlen > olen){\n      addRange(olen, nlen, newList, rawNewValue);\n    }\n  }\n\n  function update(newValue, oldValue, splices){\n\n    var nType = _.typeOf( newValue );\n    var oType = _.typeOf( oldValue );\n\n    var newList = getListFromValue( newValue, nType );\n    var oldList = getListFromValue( oldValue, oType );\n\n    var rawNewValue;\n\n\n    var nlen = newList && newList.length;\n    var olen = oldList && oldList.length;\n\n    // if previous list has , we need to remove the altnated section.\n    if( !olen && nlen && group$$1.get(1) ){\n      var altGroup = group$$1.children.pop();\n      if(altGroup.destroy)  { altGroup.destroy(true); }\n    }\n\n    if( nType === 'object' ) { rawNewValue = newValue; }\n\n    if(track === true){\n      updateSimple( newList, oldList,  rawNewValue );\n    }else{\n      updateLD( newList, oldList, splices, rawNewValue );\n    }\n\n    // @ {#list} {#else}\n    if( !nlen && alternate && alternate.length){\n      var section = self.$compile(alternate, {\n        extra: extra,\n        record: true,\n        outer: options.outer,\n        namespace: namespace\n      })\n      group$$1.children.push(section);\n      if(placeholder.parentNode){\n        animate.inject(combine.node(section), placeholder, 'after');\n      }\n    }\n  }\n\n  this.$watch(ast.sequence, update, { \n    init: true, \n    diff: track !== true ,\n    deep: true\n  });\n  return group$$1;\n}\n\n\nfunction updateItem(){\n  \n}\n\n\n// {#include } or {#inc template}\nwalkers.template = function(ast, options){\n  var content = ast.content, compiled;\n  var placeholder = document.createComment('inlcude');\n  var compiled, namespace = options.namespace, extra = options.extra;\n  var group$$1 = new Group([placeholder]);\n  if(content){\n    var self = this;\n    this.$watch(content, function(value){\n      var removed = group$$1.get(1), type= typeof value;\n      if( removed){\n        removed.destroy(true); \n        group$$1.children.pop();\n      }\n      if(!value) { return; }\n\n      group$$1.push( compiled = type === 'function' ? value(): self.$compile( type !== 'object'? String(value): value, {\n        record: true, \n        outer: options.outer,\n        namespace: namespace, \n        extra: extra}) ); \n      if(placeholder.parentNode) {\n        compiled.$inject(placeholder, 'before')\n      }\n    }, {\n      init: true\n    });\n  }\n  return group$$1;\n};\n\nfunction getListFromValue(value, type){\n  return type === 'object'? _.keys(value): (\n      type === 'array'? value: []\n    )\n}\n\n\n// how to resolve this problem\nvar ii = 0;\nwalkers['if'] = function(ast, options){\n  var self = this, consequent, alternate, extra = options.extra;\n  if(options && options.element){ // attribute inteplation\n    var update = function(nvalue){\n      if(!!nvalue){\n        if(alternate) { combine.destroy(alternate) }\n        if(ast.consequent) { consequent = self.$compile(ast.consequent, {record: true, element: options.element , extra:extra}); }\n      }else{\n        if(consequent) { combine.destroy(consequent) }\n        if(ast.alternate) { alternate = self.$compile(ast.alternate, {record: true, element: options.element, extra: extra}); }\n      }\n    }\n    this.$watch(ast.test, update, { force: true });\n    return {\n      destroy: function(){\n        if(consequent) { combine.destroy(consequent); }\n        else if(alternate) { combine.destroy(alternate); }\n      }\n    }\n  }\n\n  var test, consequent, alternate, node;\n  var placeholder = document.createComment(\"Regular if\" + ii++);\n  var group$$1 = new Group();\n  group$$1.push(placeholder);\n  var preValue = null, namespace= options.namespace;\n\n\n  var update = function (nvalue, old){\n    var value = !!nvalue;\n    if(value === preValue) { return; }\n    preValue = value;\n    if(group$$1.children[1]){\n      group$$1.children[1].destroy(true);\n      group$$1.children.pop();\n    }\n    if(value){ //true\n      if(ast.consequent && ast.consequent.length){\n        consequent = self.$compile( ast.consequent , {record:true, outer: options.outer,namespace: namespace, extra:extra })\n        // placeholder.parentNode && placeholder.parentNode.insertBefore( node, placeholder );\n        group$$1.push(consequent);\n        if(placeholder.parentNode){\n          animate.inject(combine.node(consequent), placeholder, 'before');\n        }\n      }\n    }else{ //false\n      if(ast.alternate && ast.alternate.length){\n        alternate = self.$compile(ast.alternate, {record:true, outer: options.outer,namespace: namespace, extra:extra});\n        group$$1.push(alternate);\n        if(placeholder.parentNode){\n          animate.inject(combine.node(alternate), placeholder, 'before');\n        }\n      }\n    }\n  }\n  this.$watch(ast.test, update, {force: true, init: true});\n\n  return group$$1;\n}\n\n\nwalkers.expression = function(ast, options){\n  var node = document.createTextNode(\"\");\n  this.$watch(ast, function(newval){\n    dom.text(node, \"\" + (newval == null? \"\": \"\" + newval) );\n  },{init: true})\n  return node;\n}\nwalkers.text = function(ast, options){\n  var node = document.createTextNode(_.convertEntity(ast.text));\n  return node;\n}\n\n\n\nvar eventReg = /^on-(.+)$/\n\n/**\n * walkers element (contains component)\n */\nwalkers.element = function(ast, options){\n  var attrs = ast.attrs, self = this,\n    Constructor = this.constructor,\n    children = ast.children,\n    namespace = options.namespace, \n    extra = options.extra,\n    tag = ast.tag,\n    Component = Constructor.component(tag),\n    ref, group$$1, element;\n\n  if( tag === 'r-content' ){\n    _.log('r-content is deprecated, use {#inc this.$body} instead (`{#include}` as same)', 'warn');\n    return this.$body && this.$body();\n  } \n\n  if(Component || tag === 'r-component'){\n    options.Component = Component;\n    return walkers.component.call(this, ast, options)\n  }\n\n  if(tag === 'svg') { namespace = \"svg\"; }\n  // @Deprecated: may be removed in next version, use {#inc } instead\n  \n  if( children && children.length ){\n    group$$1 = this.$compile(children, {outer: options.outer,namespace: namespace, extra: extra });\n  }\n\n  element = dom.create(tag, namespace, attrs);\n\n  if(group$$1 && !_.isVoidTag(tag)){\n    dom.inject( combine.node(group$$1) , element)\n  }\n\n  // sort before\n  if(!ast.touched){\n    attrs.sort(function(a1, a2){\n      var d1 = Constructor.directive(a1.name),\n        d2 = Constructor.directive(a2.name);\n      if( d1 && d2 ) { return (d2.priority || 1) - (d1.priority || 1); }\n      if(d1) { return 1; }\n      if(d2) { return -1; }\n      if(a2.name === \"type\") { return 1; }\n      return -1;\n    })\n    ast.touched = true;\n  }\n  // may distinct with if else\n  var destroies = walkAttributes.call(this, attrs, element, extra);\n\n  return {\n    type: \"element\",\n    group: group$$1,\n    node: function(){\n      return element;\n    },\n    last: function(){\n      return element;\n    },\n    destroy: function(first){\n      if( first ){\n        animate.remove( element, group$$1? group$$1.destroy.bind( group$$1 ): _.noop );\n      }else if(group$$1) {\n        group$$1.destroy();\n      }\n      // destroy ref\n      if( destroies.length ) {\n        destroies.forEach(function( destroy ){\n          if( destroy ){\n            if( typeof destroy.destroy === 'function' ){\n              destroy.destroy()\n            }else{\n              destroy();\n            }\n          }\n        })\n      }\n    }\n  }\n}\n\nwalkers.component = function(ast, options){\n  var this$1 = this;\n\n  var attrs = ast.attrs, \n    Component = options.Component,\n    Constructor = this.constructor,\n    isolate, \n    extra = options.extra,\n    namespace = options.namespace,\n    ref, self = this, is;\n\n  var data = {}, events;\n\n  for(var i = 0, len = attrs.length; i < len; i++){\n    var attr = attrs[i];\n    // consider disabled   equlasto  disabled={true}\n    var value = this$1._touchExpr(attr.value === undefined? true: attr.value);\n    if(value.constant) { value = attr.value = value.get(this$1); }\n    if(attr.value && attr.value.constant === true){\n      value = value.get(this$1);\n    }\n    var name = attr.name;\n    if(!attr.event){\n      var etest = name.match(eventReg);\n      // event: 'nav'\n      if(etest) { attr.event = etest[1]; }\n    }\n\n    // @compile modifier\n    if(attr.mdf === 'cmpl'){\n      value = _.getCompileFn(value, this$1, {\n        record: true, \n        namespace:namespace, \n        extra: extra, \n        outer: options.outer\n      })\n    }\n    \n    // @if is r-component . we need to find the target Component\n    if(name === 'is' && !Component){\n      is = value;\n      var componentName = this$1.$get(value, true);\n      Component = Constructor.component(componentName)\n      if(typeof Component !== 'function') { throw new Error(\"component \" + componentName + \" has not registed!\"); }\n    }\n    // bind event proxy\n    var eventName;\n    if(eventName = attr.event){\n      events = events || {};\n      events[eventName] = _.handleEvent.call(this$1, value, eventName);\n      continue;\n    }else {\n      name = attr.name = _.camelCase(name);\n    }\n\n    if(!value || value.type !== 'expression'){\n      data[name] = value;\n    }else{\n      data[name] = value.get(self); \n    }\n    if( name === 'ref'  && value != null){\n      ref = value\n    }\n    if( name === 'isolate'){\n      // 1: stop: composite -> parent\n      // 2. stop: composite <- parent\n      // 3. stop 1 and 2: composite <-> parent\n      // 0. stop nothing (defualt)\n      isolate = value.type === 'expression'? value.get(self): parseInt(value === true? 3: value, 10);\n      data.isolate = isolate;\n    }\n  }\n\n  var definition = { \n    data: data, \n    events: events, \n    $parent: (isolate & 2)? null: this,\n    $root: this.$root,\n    $outer: options.outer,\n    _body: {\n      ctx: this,\n      ast: ast.children\n    }\n  }\n  var options = {\n    namespace: namespace, \n    extra: options.extra\n  }\n\n\n  var component = new Component(definition, options), reflink;\n\n\n  if(ref && this.$refs){\n    reflink = Component.directive('ref').link\n    this.$on('$destroy', reflink.call(this, component, ref) )\n  }\n  if(ref &&  self.$refs) { self.$refs[ref] = component; }\n  for(var i = 0, len = attrs.length; i < len; i++){\n    var attr = attrs[i];\n    var value = attr.value||true;\n    var name = attr.name;\n    // need compiled\n    if(value.type === 'expression' && !attr.event){\n      value = self._touchExpr(value);\n      // use bit operate to control scope\n      if( !(isolate & 2) ) \n        { this$1.$watch(value, (function(name, val){\n          this.data[name] = val;\n        }).bind(component, name), { sync: true }) }\n      if( value.set && !(isolate & 1 ) ) \n        // sync the data. it force the component don't trigger attr.name's first dirty echeck\n        { component.$watch(name, self.$update.bind(self, value), {init: true}); }\n    }\n  }\n  if(is && is.type === 'expression'  ){\n    var group$$1 = new Group();\n    group$$1.push(component);\n    this.$watch(is, function(value){\n      // found the new component\n      var Component = Constructor.component(value);\n      if(!Component) { throw new Error(\"component \" + value + \" has not registed!\"); }\n      var ncomponent = new Component(definition);\n      var component = group$$1.children.pop();\n      group$$1.push(ncomponent);\n      ncomponent.$inject(combine.last(component), 'after')\n      component.destroy();\n      // @TODO  if component changed , we need update ref\n      if(ref){\n        self.$refs[ref] = ncomponent;\n      }\n    }, {sync: true})\n    return group$$1;\n  }\n  return component;\n}\n\nfunction walkAttributes(attrs, element, extra){\n  var this$1 = this;\n\n  var bindings = []\n  for(var i = 0, len = attrs.length; i < len; i++){\n    var binding = this$1._walk(attrs[i], {element: element, fromElement: true, attrs: attrs, extra: extra})\n    if(binding) { bindings.push(binding); }\n  }\n  return bindings;\n}\n\nwalkers.attribute = function(ast ,options){\n\n  var attr = ast;\n  var name = attr.name;\n  var value = attr.value || \"\";\n  var constant = value.constant;\n  var Component = this.constructor;\n  var directive = Component.directive(name);\n  var element = options.element;\n  var self = this;\n\n\n  value = this._touchExpr(value);\n\n  if(constant) { value = value.get(this); }\n\n  if(directive && directive.link){\n    var binding = directive.link.call(self, element, value, name, options.attrs);\n    if(typeof binding === 'function') { binding = {destroy: binding}; } \n    return binding;\n  } else{\n    if(value.type === 'expression' ){\n      this.$watch(value, function(nvalue, old){\n        dom.attr(element, name, nvalue);\n      }, {init: true});\n    }else{\n      if(_.isBooleanAttr(name)){\n        dom.attr(element, name, true);\n      }else{\n        dom.attr(element, name, value);\n      }\n    }\n    if(!options.fromElement){\n      return {\n        destroy: function(){\n          dom.attr(element, name, null);\n        }\n      }\n    }\n  }\n\n}\n});\n\n// simplest event emitter 60 lines\n// ===============================\nvar slice$1 = [].slice;\nvar _$8 = util;\nvar API = {\n  $on: function(event, fn) {\n    var this$1 = this;\n\n    if(typeof event === \"object\"){\n      for (var i in event) {\n        this$1.$on(i, event[i]);\n      }\n    }else{\n      // @patch: for list\n      var context = this;\n      var handles = context._handles || (context._handles = {}),\n        calls = handles[event] || (handles[event] = []);\n      calls.push(fn);\n    }\n    return this;\n  },\n  $off: function(event, fn) {\n    var context = this;\n    if(!context._handles) { return; }\n    if(!event) { this._handles = {}; }\n    var handles = context._handles,\n      calls;\n\n    if (calls = handles[event]) {\n      if (!fn) {\n        handles[event] = [];\n        return context;\n      }\n      for (var i = 0, len = calls.length; i < len; i++) {\n        if (fn === calls[i]) {\n          calls.splice(i, 1);\n          return context;\n        }\n      }\n    }\n    return context;\n  },\n  // bubble event\n  $emit: function(event){\n    // @patch: for list\n    var context = this;\n    var handles = context._handles, calls, args, type;\n    if(!event) { return; }\n    var args = slice$1.call(arguments, 1);\n    var type = event;\n\n    if(!handles) { return context; }\n    if(calls = handles[type.slice(1)]){\n      for (var j = 0, len = calls.length; j < len; j++) {\n        calls[j].apply(context, args)\n      }\n    }\n    if (!(calls = handles[type])) { return context; }\n    for (var i = 0, len = calls.length; i < len; i++) {\n      calls[i].apply(context, args)\n    }\n    // if(calls.length) context.$update();\n    return context;\n  },\n  // capture  event\n  $one: function(){\n    \n}\n}\n// container class\nfunction Event() {}\n_$8.extend(Event.prototype, API)\n\nEvent.mixTo = function(obj){\n  obj = typeof obj === \"function\" ? obj.prototype : obj;\n  _$8.extend(obj, API)\n}\nvar event = Event;\n\nvar exprCache$1 = env.exprCache;\nvar Parser$2 = Parser_1;\nvar parse$1 = {\n  expression: function(expr, simple){\n    // @TODO cache\n    if( typeof expr === 'string' && ( expr = expr.trim() ) ){\n      expr = exprCache$1.get( expr ) || exprCache$1.set( expr, new Parser$2( expr, { mode: 2, expression: true } ).expression() )\n    }\n    if(expr) { return expr; }\n  },\n  parse: function(template){\n    return new Parser$2(template).parse();\n  }\n}\n\nvar _$9 = util;\nvar parseExpression = parse$1.expression;\nvar diff$2 = diff;\nvar diffArray$1 = diff$2.diffArray;\nvar diffObject$1 = diff$2.diffObject;\n\nfunction Watcher$1(){}\n\nvar methods = {\n  $watch: function(expr, fn, options){\n    var this$1 = this;\n\n    var get, once, test, rlen, extra = this.__ext__; //records length\n    if(!this._watchers) { this._watchers = []; }\n\n    options = options || {};\n    if(options === true){\n       options = { deep: true }\n    }\n    var uid = _$9.uid('w_');\n    if(Array.isArray(expr)){\n      var tests = [];\n      for(var i = 0,len = expr.length; i < len; i++){\n          tests.push(this$1.$expression(expr[i]).get)\n      }\n      var prev = [];\n      test = function(context){\n        var equal = true;\n        for(var i =0, len = tests.length; i < len; i++){\n          var splice = tests[i](context, extra);\n          if(!_$9.equals(splice, prev[i])){\n             equal = false;\n             prev[i] = _$9.clone(splice);\n          }\n        }\n        return equal? false: prev;\n      }\n    }else{\n      if(typeof expr === 'function'){\n        get = expr.bind(this);      \n      }else{\n        expr = this._touchExpr( parseExpression(expr) );\n        get = expr.get;\n        once = expr.once;\n      }\n    }\n\n    var watcher = {\n      id: uid, \n      get: get, \n      fn: fn, \n      once: once, \n      force: options.force,\n      // don't use ld to resolve array diff\n      diff: options.diff,\n      test: test,\n      deep: options.deep,\n      last: options.sync? get(this): options.last\n    }\n    \n    this._watchers.push( watcher );\n\n    rlen = this._records && this._records.length;\n    if(rlen) { this._records[rlen-1].push(uid) }\n    // init state.\n    if(options.init === true){\n      var prephase = this.$phase;\n      this.$phase = 'digest';\n      this._checkSingleWatch( watcher, this._watchers.length-1 );\n      this.$phase = prephase;\n    }\n    return watcher;\n  },\n  $unwatch: function(uid){\n    var this$1 = this;\n\n    uid = uid.id || uid;\n    if(!this._watchers) { this._watchers = []; }\n    if(Array.isArray(uid)){\n      for(var i =0, len = uid.length; i < len; i++){\n        this$1.$unwatch(uid[i]);\n      }\n    }else{\n      var watchers = this._watchers, watcher, wlen;\n      if(!uid || !watchers || !(wlen = watchers.length)) { return; }\n      for(;wlen--;){\n        watcher = watchers[wlen];\n        if(watcher && watcher.id === uid ){\n          watchers.splice(wlen, 1);\n        }\n      }\n    }\n  },\n  $expression: function(value){\n    return this._touchExpr(parseExpression(value))\n  },\n  /**\n   * the whole digest loop ,just like angular, it just a dirty-check loop;\n   * @param  {String} path  now regular process a pure dirty-check loop, but in parse phase, \n   *                  Regular's parser extract the dependencies, in future maybe it will change to dirty-check combine with path-aware update;\n   * @return {Void}   \n   */\n\n  $digest: function(){\n    if(this.$phase === 'digest' || this._mute) { return; }\n    this.$phase = 'digest';\n    var dirty = false, n =0;\n    while(dirty = this._digest()){\n\n      if((++n) > 20){ // max loop\n        throw Error('there may a circular dependencies reaches')\n      }\n    }\n    if( n > 0 && this.$emit) { this.$emit(\"$update\"); }\n    this.$phase = null;\n  },\n  // private digest logic\n  _digest: function(){\n    var this$1 = this;\n\n\n    var watchers = this._watchers;\n    var dirty = false, children, watcher, watcherDirty;\n    if(watchers && watchers.length){\n      for(var i = 0, len = watchers.length;i < len; i++){\n        watcher = watchers[i];\n        watcherDirty = this$1._checkSingleWatch(watcher, i);\n        if(watcherDirty) { dirty = true; }\n      }\n    }\n    // check children's dirty.\n    children = this._children;\n    if(children && children.length){\n      for(var m = 0, mlen = children.length; m < mlen; m++){\n        var child = children[m];\n        \n        if(child && child._digest()) { dirty = true; }\n      }\n    }\n    return dirty;\n  },\n  // check a single one watcher \n  _checkSingleWatch: function(watcher, i){\n    var dirty = false;\n    if(!watcher) { return; }\n\n    var now, last, tlast, tnow,  eq, diff$$1;\n\n    if(!watcher.test){\n\n      now = watcher.get(this);\n      last = watcher.last;\n      tlast = _$9.typeOf(last);\n      tnow = _$9.typeOf(now);\n      eq = true, diff$$1;\n\n      // !Object\n      if( !(tnow === 'object' && tlast==='object' && watcher.deep) ){\n        // Array\n        if( tnow === 'array' && ( tlast=='undefined' || tlast === 'array') ){\n          diff$$1 = diffArray$1(now, watcher.last || [], watcher.diff)\n          if( tlast !== 'array' || diff$$1 === true || diff$$1.length ) { dirty = true; }\n        }else{\n          eq = _$9.equals( now, last );\n          if( !eq || watcher.force ){\n            watcher.force = null;\n            dirty = true; \n          }\n        }\n      }else{\n        diff$$1 =  diffObject$1( now, last, watcher.diff );\n        if( diff$$1 === true || diff$$1.length ) { dirty = true; }\n      }\n    } else{\n      // @TODO 是否把多重改掉\n      var result = watcher.test(this);\n      if(result){\n        dirty = true;\n        watcher.fn.apply(this, result)\n      }\n    }\n    if(dirty && !watcher.test){\n      if(tnow === 'object' && watcher.deep || tnow === 'array'){\n        watcher.last = _$9.clone(now);\n      }else{\n        watcher.last = now;\n      }\n      watcher.fn.call(this, now, last, diff$$1)\n      if(watcher.once) { this._watchers.splice(i, 1); }\n    }\n\n    return dirty;\n  },\n\n  /**\n   * **tips**: whatever param you passed in $update, after the function called, dirty-check(digest) phase will enter;\n   * \n   * @param  {Function|String|Expression} path  \n   * @param  {Whatever} value optional, when path is Function, the value is ignored\n   * @return {this}     this \n   */\n  $set: function(path, value){\n    var this$1 = this;\n\n    if(path != null){\n      var type = _$9.typeOf(path);\n      if( type === 'string' || path.type === 'expression' ){\n        path = this.$expression(path);\n        path.set(this, value);\n      }else if(type === 'function'){\n        path.call(this, this.data);\n      }else{\n        for(var i in path) {\n          this$1.$set(i, path[i])\n        }\n      }\n    }\n  },\n  // 1. expr canbe string or a Expression\n  // 2. detect: if true, if expr is a string will directly return;\n  $get: function(expr, detect)  {\n    if(detect && typeof expr === 'string') { return expr; }\n    return this.$expression(expr).get(this);\n  },\n  $update: function(){\n    var rootParent = this;\n    do{\n      if(rootParent.data.isolate || !rootParent.$parent) { break; }\n      rootParent = rootParent.$parent;\n    } while(rootParent)\n\n    var prephase =rootParent.$phase;\n    rootParent.$phase = 'digest'\n\n    this.$set.apply(this, arguments);\n\n    rootParent.$phase = prephase\n\n    rootParent.$digest();\n    return this;\n  },\n  // auto collect watchers for logic-control.\n  _record: function(){\n    if(!this._records) { this._records = []; }\n    this._records.push([]);\n  },\n  _release: function(){\n    return this._records.pop();\n  }\n}\n\n\n_$9.extend(Watcher$1.prototype, methods)\n\n\nWatcher$1.mixTo = function(obj){\n  obj = typeof obj === \"function\" ? obj.prototype : obj;\n  return _$9.extend(obj, methods)\n}\n\nvar watcher = Watcher$1;\n\nvar filter$1 = createCommonjsModule(function (module) {\nvar f = module.exports = {};\n\n// json:  two way \n//  - get: JSON.stringify\n//  - set: JSON.parse\n//  - example: `{ title|json }`\nf.json = {\n  get: function( value ){\n    return typeof JSON !== 'undefined'? JSON.stringify(value): value;\n  },\n  set: function( value ){\n    return typeof JSON !== 'undefined'? JSON.parse(value) : value;\n  }\n}\n\n// last: one-way\n//  - get: return the last item in list\n//  - example: `{ list|last }`\nf.last = function(arr){\n  return arr && arr[arr.length - 1];\n}\n\n// average: one-way\n//  - get: copute the average of the list\n//  - example: `{ list| average: \"score\" }`\nf.average = function(array, key){\n  array = array || [];\n  return array.length? f.total(array, key)/ array.length : 0;\n}\n\n\n// total: one-way\n//  - get: copute the total of the list\n//  - example: `{ list| total: \"score\" }`\nf.total = function(array, key){\n  var total = 0;\n  if(!array) { return; }\n  array.forEach(function( item ){\n    total += key? item[key] : item;\n  })\n  return total;\n}\n\n// var basicSortFn = function(a, b){return b - a}\n\n// f.sort = function(array, key, reverse){\n//   var type = typeof key, sortFn; \n//   switch(type){\n//     case 'function': sortFn = key; break;\n//     case 'string': sortFn = function(a, b){};break;\n//     default:\n//       sortFn = basicSortFn;\n//   }\n//   // need other refernce.\n//   return array.slice().sort(function(a,b){\n//     return reverse? -sortFn(a, b): sortFn(a, b);\n//   })\n//   return array\n// }\n});\n\nvar env$2 = env;\nvar Lexer = Lexer_1;\nvar Parser = Parser_1;\nvar config$3 = config$1;\nvar _$1 = util;\nvar extend$1 = extend$2;\nvar combine = {};\nif(env$2.browser){\n  var dom = dom_1;\n  var walkers = walkers_1;\n  var Group = group;\n  var doc = dom.doc;\n  combine = combine_1;\n}\nvar events = event;\nvar Watcher = watcher;\nvar parse = parse$1;\nvar filter = filter$1;\n\n\n/**\n* `Regular` is regularjs's NameSpace and BaseClass. Every Component is inherited from it\n* \n* @class Regular\n* @module Regular\n* @constructor\n* @param {Object} options specification of the component\n*/\nvar Regular$1 = function(definition, options){\n  var prevRunning = env$2.isRunning;\n  env$2.isRunning = true;\n  var node, template;\n\n  definition = definition || {};\n  var usePrototyeString = typeof this.template === 'string' && !definition.template;\n  options = options || {};\n\n  definition.data = definition.data || {};\n  definition.computed = definition.computed || {};\n  definition.events = definition.events || {};\n  if(this.data) { _$1.extend(definition.data, this.data); }\n  if(this.computed) { _$1.extend(definition.computed, this.computed); }\n  if(this.events) { _$1.extend(definition.events, this.events); }\n\n  _$1.extend(this, definition, true);\n  if(this.$parent){\n     this.$parent._append(this);\n  }\n  this._children = [];\n  this.$refs = {};\n\n  template = this.template;\n\n  // template is a string (len < 16). we will find it container first\n  if((typeof template === 'string' && template.length < 16) && (node = dom.find(template))) {\n    template = node.innerHTML;\n  }\n  // if template is a xml\n  if(template && template.nodeType) { template = template.innerHTML; }\n  if(typeof template === 'string') {\n    template = new Parser(template).parse();\n    if(usePrototyeString) {\n    // avoid multiply compile\n      this.constructor.prototype.template = template;\n    }else{\n      delete this.template;\n    }\n  }\n\n  this.computed = handleComputed(this.computed);\n  this.$root = this.$root || this;\n  // if have events\n  if(this.events){\n    this.$on(this.events);\n  }\n  this.$emit(\"$config\");\n  this.config && this.config(this.data);\n  this.$emit(\"$afterConfig\");\n\n  var body = this._body;\n  this._body = null;\n\n  if(body && body.ast && body.ast.length){\n    this.$body = _$1.getCompileFn(body.ast, body.ctx , {\n      outer: this,\n      namespace: options.namespace,\n      extra: options.extra,\n      record: true\n    })\n  }\n  // handle computed\n  if(template){\n    this.group = this.$compile(template, {namespace: options.namespace});\n    combine.node(this);\n  }\n\n\n  if(!this.$parent) { this.$update(); }\n  this.$ready = true;\n  this.$emit(\"$init\");\n  if( this.init ) { this.init(this.data); }\n  this.$emit(\"$afterInit\");\n\n  // @TODO: remove, maybe , there is no need to update after init; \n  // if(this.$root === this) this.$update();\n  env$2.isRunning = prevRunning;\n\n  // children is not required;\n}\n\n\nwalkers && (walkers.Regular = Regular$1);\n\n\n// description\n// -------------------------\n// 1. Regular and derived Class use same filter\n_$1.extend(Regular$1, {\n  // private data stuff\n  _directives: { __regexp__:[] },\n  _plugins: {},\n  _protoInheritCache: [ 'directive', 'use'] ,\n  __after__: function(supr, o) {\n\n    var template;\n    this.__after__ = supr.__after__;\n\n    // use name make the component global.\n    if(o.name) { Regular$1.component(o.name, this); }\n    // this.prototype.template = dom.initTemplate(o)\n    if(template = o.template){\n      var node, name;\n      if( typeof template === 'string' && template.length < 16 && ( node = dom.find( template )) ){\n        template = node ;\n      }\n\n      if(template && template.nodeType){\n        if(name = dom.attr(template, 'name')) { Regular$1.component(name, this); }\n        template = template.innerHTML;\n      } \n\n      if(typeof template === 'string' ){\n        this.prototype.template = config$3.PRECOMPILE? new Parser(template).parse(): template;\n      }\n    }\n\n    if(o.computed) { this.prototype.computed = handleComputed(o.computed); }\n    // inherit directive and other config from supr\n    Regular$1._inheritConfig(this, supr);\n\n  },\n  /**\n   * Define a directive\n   *\n   * @method directive\n   * @return {Object} Copy of ...\n   */  \n  directive: function(name, cfg){\n    var this$1 = this;\n\n\n    if(_$1.typeOf(name) === \"object\"){\n      for(var k in name){\n        if(name.hasOwnProperty(k)) { this$1.directive(k, name[k]); }\n      }\n      return this;\n    }\n    var type = _$1.typeOf(name);\n    var directives = this._directives, directive;\n    if(cfg == null){\n      if( type === \"string\" && (directive = directives[name]) ) { return directive; }\n      else{\n        var regexp = directives.__regexp__;\n        for(var i = 0, len = regexp.length; i < len ; i++){\n          directive = regexp[i];\n          var test = directive.regexp.test(name);\n          if(test) { return directive; }\n        }\n      }\n      return undefined;\n    }\n    if(typeof cfg === 'function') { cfg = { link: cfg } } \n    if(type === 'string') { directives[name] = cfg; }\n    else if(type === 'regexp'){\n      cfg.regexp = name;\n      directives.__regexp__.push(cfg)\n    }\n    return this\n  },\n  plugin: function(name, fn){\n    var plugins = this._plugins;\n    if(fn == null) { return plugins[name]; }\n    plugins[name] = fn;\n    return this;\n  },\n  use: function(fn){\n    if(typeof fn === \"string\") { fn = Regular$1.plugin(fn); }\n    if(typeof fn !== \"function\") { return this; }\n    fn(this, Regular$1);\n    return this;\n  },\n  // config the Regularjs's global\n  config: function(name, value){\n    var needGenLexer = false;\n    if(typeof name === \"object\"){\n      for(var i in name){\n        // if you config\n        if( i ===\"END\" || i==='BEGIN' )  { needGenLexer = true; }\n        config$3[i] = name[i];\n      }\n    }\n    if(needGenLexer) { Lexer.setup(); }\n  },\n  expression: parse.expression,\n  Parser: Parser,\n  Lexer: Lexer,\n  _addProtoInheritCache: function(name, transform){\n    if( Array.isArray( name ) ){\n      return name.forEach(Regular$1._addProtoInheritCache);\n    }\n    var cacheKey = \"_\" + name + \"s\"\n    Regular$1._protoInheritCache.push(name)\n    Regular$1[cacheKey] = {};\n    if(Regular$1[name]) { return; }\n    Regular$1[name] = function(key, cfg){\n      var this$1 = this;\n\n      var cache = this[cacheKey];\n\n      if(typeof key === \"object\"){\n        for(var i in key){\n          if(key.hasOwnProperty(i)) { this$1[name](i, key[i]); }\n        }\n        return this;\n      }\n      if(cfg == null) { return cache[key]; }\n      cache[key] = transform? transform(cfg) : cfg;\n      return this;\n    }\n  },\n  _inheritConfig: function(self, supr){\n\n    // prototype inherit some Regular property\n    // so every Component will have own container to serve directive, filter etc..\n    var defs = Regular$1._protoInheritCache;\n    var keys = _$1.slice(defs);\n    keys.forEach(function(key){\n      self[key] = supr[key];\n      var cacheKey = '_' + key + 's';\n      if(supr[cacheKey]) { self[cacheKey] = _$1.createObject(supr[cacheKey]); }\n    })\n    return self;\n  }\n\n});\n\nextend$1(Regular$1);\n\nRegular$1._addProtoInheritCache(\"component\")\n\nRegular$1._addProtoInheritCache(\"filter\", function(cfg){\n  return typeof cfg === \"function\"? {get: cfg}: cfg;\n})\n\n\nevents.mixTo(Regular$1);\nWatcher.mixTo(Regular$1);\n\nRegular$1.implement({\n  init: function(){},\n  config: function(){},\n  destroy: function(){\n    // destroy event wont propgation;\n    this.$emit(\"$destroy\");\n    this.group && this.group.destroy(true);\n    this.group = null;\n    this.parentNode = null;\n    this._watchers = null;\n    this._children = [];\n    var parent = this.$parent;\n    if(parent){\n      var index = parent._children.indexOf(this);\n      parent._children.splice(index,1);\n    }\n    this.$parent = null;\n    this.$root = null;\n    this._handles = null;\n    this.$refs = null;\n  },\n\n  /**\n   * compile a block ast ; return a group;\n   * @param  {Array} parsed ast\n   * @param  {[type]} record\n   * @return {[type]}\n   */\n  $compile: function(ast, options){\n    options = options || {};\n    if(typeof ast === 'string'){\n      ast = new Parser(ast).parse()\n    }\n    var preExt = this.__ext__,\n      record = options.record, \n      records;\n\n    if(options.extra) { this.__ext__ = options.extra; }\n\n    if(record) { this._record(); }\n    var group$$1 = this._walk(ast, options);\n    if(record){\n      records = this._release();\n      var self = this;\n      if(records.length){\n        // auto destroy all wather;\n        group$$1.ondestroy = function(){ self.$unwatch(records); }\n      }\n    }\n    if(options.extra) { this.__ext__ = preExt; }\n    return group$$1;\n  },\n\n\n  /**\n   * create two-way binding with another component;\n   * *warn*: \n   *   expr1 and expr2 must can operate set&get, for example: the 'a.b' or 'a[b + 1]' is set-able, but 'a.b + 1' is not, \n   *   beacuse Regular dont know how to inverse set through the expression;\n   *   \n   *   if before $bind, two component's state is not sync, the component(passed param) will sync with the called component;\n   *\n   * *example: *\n   *\n   * ```javascript\n   * // in this example, we need to link two pager component\n   * var pager = new Pager({}) // pager compoennt\n   * var pager2 = new Pager({}) // another pager component\n   * pager.$bind(pager2, 'current'); // two way bind throw two component\n   * pager.$bind(pager2, 'total');   // \n   * // or just\n   * pager.$bind(pager2, {\"current\": \"current\", \"total\": \"total\"}) \n   * ```\n   * \n   * @param  {Regular} component the\n   * @param  {String|Expression} expr1     required, self expr1 to operate binding\n   * @param  {String|Expression} expr2     optional, other component's expr to bind with, if not passed, the expr2 will use the expr1;\n   * @return          this;\n   */\n  $bind: function(component, expr1, expr2){\n    var this$1 = this;\n\n    var type = _$1.typeOf(expr1);\n    if( expr1.type === 'expression' || type === 'string' ){\n      this._bind(component, expr1, expr2)\n    }else if( type === \"array\" ){ // multiply same path binding through array\n      for(var i = 0, len = expr1.length; i < len; i++){\n        this$1._bind(component, expr1[i]);\n      }\n    }else if(type === \"object\"){\n      for(var i in expr1) { if(expr1.hasOwnProperty(i)){\n        this$1._bind(component, i, expr1[i]);\n      } }\n    }\n    // digest\n    component.$update();\n    return this;\n  },\n  /**\n   * unbind one component( see $bind also)\n   *\n   * unbind will unbind all relation between two component\n   * \n   * @param  {Regular} component [descriptionegular\n   * @return {This}    this\n   */\n  $unbind: function(){\n    // todo\n  },\n  $inject: combine.inject,\n  $mute: function(isMute){\n\n    isMute = !!isMute;\n\n    var needupdate = isMute === false && this._mute;\n\n    this._mute = !!isMute;\n\n    if(needupdate) { this.$update(); }\n    return this;\n  },\n  // private bind logic\n  _bind: function(component, expr1, expr2){\n\n    var self = this;\n    // basic binding\n\n    if(!component || !(component instanceof Regular$1)) { throw \"$bind() should pass Regular component as first argument\"; }\n    if(!expr1) { throw \"$bind() should  pass as least one expression to bind\"; }\n\n    if(!expr2) { expr2 = expr1; }\n\n    expr1 = parse.expression( expr1 );\n    expr2 = parse.expression( expr2 );\n\n    // set is need to operate setting ;\n    if(expr2.set){\n      var wid1 = this.$watch( expr1, function(value){\n        component.$update(expr2, value)\n      });\n      component.$on('$destroy', function(){\n        self.$unwatch(wid1)\n      })\n    }\n    if(expr1.set){\n      var wid2 = component.$watch(expr2, function(value){\n        self.$update(expr1, value)\n      });\n      // when brother destroy, we unlink this watcher\n      this.$on('$destroy', component.$unwatch.bind(component,wid2))\n    }\n    // sync the component's state to called's state\n    expr2.set(component, expr1.get(this));\n  },\n  _walk: function(ast, arg1){\n    var this$1 = this;\n\n    if( _$1.typeOf(ast) === 'array' ){\n      var res = [];\n\n      for(var i = 0, len = ast.length; i < len; i++){\n        res.push( this$1._walk(ast[i], arg1) );\n      }\n\n      return new Group(res);\n    }\n    if(typeof ast === 'string') { return doc.createTextNode(ast) }\n    return walkers[ast.type || \"default\"].call(this, ast, arg1);\n  },\n  _append: function(component){\n    this._children.push(component);\n    component.$parent = this;\n  },\n  _handleEvent: function(elem, type, value, attrs){\n    var Component = this.constructor,\n      fire = typeof value !== \"function\"? _$1.handleEvent.call( this, value, type ) : value,\n      handler = Component.event(type), destroy;\n\n    if ( handler ) {\n      destroy = handler.call(this, elem, fire, attrs);\n    } else {\n      dom.on(elem, type, fire);\n    }\n    return handler ? destroy : function() {\n      dom.off(elem, type, fire);\n    }\n  },\n  // 1. 用来处理exprBody -> Function\n  // 2. list里的循环\n  _touchExpr: function(expr){\n    var  rawget, ext = this.__ext__, touched = {};\n    if(expr.type !== 'expression' || expr.touched) { return expr; }\n    rawget = expr.get || (expr.get = new Function(_$1.ctxName, _$1.extName , _$1.prefix+ \"return (\" + expr.body + \")\"));\n    touched.get = !ext? rawget: function(context){\n      return rawget(context, ext)\n    }\n\n    if(expr.setbody && !expr.set){\n      var setbody = expr.setbody;\n      expr.set = function(ctx, value, ext){\n        expr.set = new Function(_$1.ctxName, _$1.setName , _$1.extName, _$1.prefix + setbody);          \n        return expr.set(ctx, value, ext);\n      }\n      expr.setbody = null;\n    }\n    if(expr.set){\n      touched.set = !ext? expr.set : function(ctx, value){\n        return expr.set(ctx, value, ext);\n      }\n    }\n    _$1.extend(touched, {\n      type: 'expression',\n      touched: true,\n      once: expr.once || expr.constant\n    })\n    return touched\n  },\n  // find filter\n  _f_: function(name){\n    var Component = this.constructor;\n    var filter = Component.filter(name);\n    if(!filter) { throw Error('filter ' + name + ' is undefined'); }\n    return filter;\n  },\n  // simple accessor get\n  _sg_:function(path, defaults, ext){\n    if(typeof ext !== 'undefined'){\n      // if(path === \"demos\")  debugger\n      var computed = this.computed,\n        computedProperty = computed[path];\n      if(computedProperty){\n        if(computedProperty.type==='expression' && !computedProperty.get) { this._touchExpr(computedProperty); }\n        if(computedProperty.get)  { return computedProperty.get(this); }\n        else { _$1.log(\"the computed '\" + path + \"' don't define the get function,  get data.\"+path + \" altnately\", \"warn\") }\n      }\n  }\n    if(typeof defaults === \"undefined\" || typeof path == \"undefined\" ){\n      return undefined;\n    }\n    return (ext && typeof ext[path] !== 'undefined')? ext[path]: defaults[path];\n\n  },\n  // simple accessor set\n  _ss_:function(path, value, data , op, computed){\n    var computed = this.computed,\n      op = op || \"=\", prev, \n      computedProperty = computed? computed[path]:null;\n\n    if(op !== '='){\n      prev = computedProperty? computedProperty.get(this): data[path];\n      switch(op){\n        case \"+=\":\n          value = prev + value;\n          break;\n        case \"-=\":\n          value = prev - value;\n          break;\n        case \"*=\":\n          value = prev * value;\n          break;\n        case \"/=\":\n          value = prev / value;\n          break;\n        case \"%=\":\n          value = prev % value;\n          break;\n      }\n    }\n    if(computedProperty) {\n      if(computedProperty.set) { return computedProperty.set(this, value); }\n      else { _$1.log(\"the computed '\" + path + \"' don't define the set function,  assign data.\"+path + \" altnately\", \"warn\" ) }\n    }\n    data[path] = value;\n    return value;\n  }\n});\n\nRegular$1.prototype.inject = function(){\n  _$1.log(\"use $inject instead of inject\", \"error\");\n  return this.$inject.apply(this, arguments);\n}\n\n\n// only one builtin filter\n\nRegular$1.filter(filter);\n\nvar Regular_1 = Regular$1;\n\n\n\nvar handleComputed = (function(){\n  // wrap the computed getter;\n  function wrapGet(get){\n    return function(context){\n      return get.call(context, context.data );\n    }\n  }\n  // wrap the computed setter;\n  function wrapSet(set){\n    return function(context, value){\n      set.call( context, value, context.data );\n      return value;\n    }\n  }\n\n  return function(computed){\n    if(!computed) { return; }\n    var parsedComputed = {}, handle, pair, type;\n    for(var i in computed){\n      handle = computed[i]\n      type = typeof handle;\n\n      if(handle.type === 'expression'){\n        parsedComputed[i] = handle;\n        continue;\n      }\n      if( type === \"string\" ){\n        parsedComputed[i] = parse.expression(handle)\n      }else{\n        pair = parsedComputed[i] = {type: 'expression'};\n        if(type === \"function\" ){\n          pair.get = wrapGet(handle);\n        }else{\n          if(handle.get) { pair.get = wrapGet(handle.get); }\n          if(handle.set) { pair.set = wrapSet(handle.set); }\n        }\n      } \n    }\n    return parsedComputed;\n  }\n})();\n\n/**\n * event directive  bundle\n *\n */\nvar _$11 = util;\nvar dom$2 = dom_1;\nvar Regular$2 = Regular_1;\n\nRegular$2._addProtoInheritCache(\"event\");\n\nRegular$2.directive( /^on-\\w+$/, function( elem, value, name , attrs) {\n  if ( !name || !value ) { return; }\n  var type = name.split(\"-\")[1];\n  return this._handleEvent( elem, type, value, attrs );\n});\n// TODO.\n/**\n- $('dx').delegate()\n*/\nRegular$2.directive( /^(delegate|de)-\\w+$/, function( elem, value, name ) {\n  var root = this.$root;\n  var _delegates = root._delegates || ( root._delegates = {} );\n  if ( !name || !value ) { return; }\n  var type = name.split(\"-\")[1];\n  var fire = _$11.handleEvent.call(this, value, type);\n\n  function delegateEvent(ev){\n    matchParent(ev, _delegates[type], root.parentNode);\n  }\n\n  if( !_delegates[type] ){\n    _delegates[type] = [];\n\n    if(root.parentNode){\n      dom$2.on(root.parentNode, type, delegateEvent);\n    }else{\n      root.$on( \"$inject\", function( node, position, preParent ){\n        var newParent = this.parentNode;\n        if( preParent ){\n          dom$2.off(preParent, type, delegateEvent);\n        }\n        if(newParent) { dom$2.on(this.parentNode, type, delegateEvent); }\n      })\n    }\n    root.$on(\"$destroy\", function(){\n      if(root.parentNode) { dom$2.off(root.parentNode, type, delegateEvent) }\n      _delegates[type] = null;\n    })\n  }\n  var delegate = {\n    element: elem,\n    fire: fire\n  }\n  _delegates[type].push( delegate );\n\n  return function(){\n    var delegates = _delegates[type];\n    if(!delegates || !delegates.length) { return; }\n    for( var i = 0, len = delegates.length; i < len; i++ ){\n      if( delegates[i] === delegate ) { delegates.splice(i, 1); }\n    }\n  }\n\n});\n\n\nfunction matchParent(ev , delegates, stop){\n  if(!stop) { return; }\n  var target = ev.target, pair;\n  while(target && target !== stop){\n    for( var i = 0, len = delegates.length; i < len; i++ ){\n      pair = delegates[i];\n      if(pair && pair.element === target){\n        pair.fire(ev)\n      }\n    }\n    target = target.parentNode;\n  }\n}\n\n// Regular\nvar _$12 = util;\nvar dom$3 = dom_1;\nvar Regular$3 = Regular_1;\n\nvar modelHandlers = {\n  \"text\": initText,\n  \"select\": initSelect,\n  \"checkbox\": initCheckBox,\n  \"radio\": initRadio\n}\n\n\n// @TODO\n\n\n// two-way binding with r-model\n// works on input, textarea, checkbox, radio, select\n\nRegular$3.directive(\"r-model\", function(elem, value){\n  var tag = elem.tagName.toLowerCase();\n  var sign = tag;\n  if(sign === \"input\") { sign = elem.type || \"text\"; }\n  else if(sign === \"textarea\") { sign = \"text\"; }\n  if(typeof value === \"string\") { value = this.$expression(value); }\n\n  if( modelHandlers[sign] ) { return modelHandlers[sign].call(this, elem, value); }\n  else if(tag === \"input\"){\n    return modelHandlers.text.call(this, elem, value);\n  }\n});\n\n\n\n// binding <select>\n\nfunction initSelect( elem, parsed){\n  var self = this;\n  var wc =this.$watch(parsed, function(newValue){\n    var children = _$12.slice(elem.getElementsByTagName('option'))\n    children.forEach(function(node, index){\n      if(node.value == newValue){\n        elem.selectedIndex = index;\n      }\n    })\n  });\n\n  function handler(){\n    parsed.set(self, this.value);\n    wc.last = this.value;\n    self.$update();\n  }\n\n  dom$3.on(elem, \"change\", handler);\n  \n  if(parsed.get(self) === undefined && elem.value){\n     parsed.set(self, elem.value);\n  }\n  return function destroy(){\n    dom$3.off(elem, \"change\", handler);\n  }\n}\n\n// input,textarea binding\n\nfunction initText(elem, parsed){\n  var self = this;\n  var wc = this.$watch(parsed, function(newValue){\n    if(elem.value !== newValue) { elem.value = newValue == null? \"\": \"\" + newValue; }\n  });\n\n  // @TODO to fixed event\n  var handler = function (ev){\n    var that = this;\n    if(ev.type==='cut' || ev.type==='paste'){\n      _$12.nextTick(function(){\n        var value = that.value\n        parsed.set(self, value);\n        wc.last = value;\n        self.$update();\n      })\n    }else{\n        var value = that.value\n        parsed.set(self, value);\n        wc.last = value;\n        self.$update();\n    }\n  };\n\n  if(dom$3.msie !== 9 && \"oninput\" in dom$3.tNode ){\n    elem.addEventListener(\"input\", handler );\n  }else{\n    dom$3.on(elem, \"paste\", handler)\n    dom$3.on(elem, \"keyup\", handler)\n    dom$3.on(elem, \"cut\", handler)\n    dom$3.on(elem, \"change\", handler)\n  }\n  if(parsed.get(self) === undefined && elem.value){\n     parsed.set(self, elem.value);\n  }\n  return function (){\n    if(dom$3.msie !== 9 && \"oninput\" in dom$3.tNode ){\n      elem.removeEventListener(\"input\", handler );\n    }else{\n      dom$3.off(elem, \"paste\", handler)\n      dom$3.off(elem, \"keyup\", handler)\n      dom$3.off(elem, \"cut\", handler)\n      dom$3.off(elem, \"change\", handler)\n    }\n  }\n}\n\n\n// input:checkbox  binding\n\nfunction initCheckBox(elem, parsed){\n  var self = this;\n  var watcher = this.$watch(parsed, function(newValue){\n    dom$3.attr(elem, 'checked', !!newValue);\n  });\n\n  var handler = function handler(){\n    var value = this.checked;\n    parsed.set(self, value);\n    watcher.last = value;\n    self.$update();\n  }\n  if(parsed.set) { dom$3.on(elem, \"change\", handler) }\n\n  if(parsed.get(self) === undefined){\n    parsed.set(self, !!elem.checked);\n  }\n\n  return function destroy(){\n    if(parsed.set) { dom$3.off(elem, \"change\", handler) }\n  }\n}\n\n\n// input:radio binding\n\nfunction initRadio(elem, parsed){\n  var self = this;\n  var wc = this.$watch(parsed, function( newValue ){\n    if(newValue == elem.value) { elem.checked = true; }\n    else { elem.checked = false; }\n  });\n\n\n  var handler = function handler(){\n    var value = this.value;\n    parsed.set(self, value);\n    self.$update();\n  }\n  if(parsed.set) { dom$3.on(elem, \"change\", handler) }\n  // beacuse only after compile(init), the dom structrue is exsit. \n  if(parsed.get(self) === undefined){\n    if(elem.checked) {\n      parsed.set(self, elem.value);\n    }\n  }\n\n  return function destroy(){\n    if(parsed.set) { dom$3.off(elem, \"change\", handler) }\n  }\n}\n\nvar base = createCommonjsModule(function (module) {\n// Regular\nvar _ = util;\nvar dom = dom_1;\nvar animate = animate_1;\nvar Regular = Regular_1;\nvar consts = _const;\nvar namespaces = consts.NAMESPACE;\n\n\n\n\n\n\n\n\nmodule.exports = {\n// **warn**: class inteplation will override this directive \n  'r-class': function(elem, value){\n\n    if(typeof value=== 'string'){\n      value = _.fixObjStr(value)\n    }\n    var isNotHtml = elem.namespaceURI && elem.namespaceURI !== namespaces.html;\n    this.$watch(value, function(nvalue){\n      var className = isNotHtml? elem.getAttribute('class'): elem.className;\n      className = ' '+ (className||'').replace(/\\s+/g, ' ') +' ';\n      for(var i in nvalue) { if(nvalue.hasOwnProperty(i)){\n        className = className.replace(' ' + i + ' ',' ');\n        if(nvalue[i] === true){\n          className += i+' ';\n        }\n      } }\n      className = className.trim();\n      if(isNotHtml){\n        dom.attr(elem, 'class', className)\n      }else{\n        elem.className = className\n      }\n    },true);\n  },\n  // **warn**: style inteplation will override this directive \n  'r-style': function(elem, value){\n    if(typeof value=== 'string'){\n      value = _.fixObjStr(value)\n    }\n    this.$watch(value, function(nvalue){\n      for(var i in nvalue) { if(nvalue.hasOwnProperty(i)){\n        dom.css(elem, i, nvalue[i]);\n      } }\n    },true);\n  },\n  // when expression is evaluate to true, the elem will add display:none\n  // Example: <div r-hide={{items.length > 0}}></div>\n  'r-hide': function(elem, value){\n    var preBool = null, compelete;\n    if( _.isExpr(value) || typeof value === \"string\"){\n      this.$watch(value, function(nvalue){\n        var bool = !!nvalue;\n        if(bool === preBool) { return; } \n        preBool = bool;\n        if(bool){\n          if(elem.onleave){\n            compelete = elem.onleave(function(){\n              elem.style.display = \"none\"\n              compelete = null;\n            })\n          }else{\n            elem.style.display = \"none\"\n          }\n          \n        }else{\n          if(compelete) { compelete(); }\n          elem.style.display = \"\";\n          if(elem.onenter){\n            elem.onenter();\n          }\n        }\n      });\n    }else if(!!value){\n      elem.style.display = \"none\";\n    }\n  },\n  'r-html': function(elem, value){\n    this.$watch(value, function(nvalue){\n      nvalue = nvalue || \"\";\n      dom.html(elem, nvalue)\n    }, {force: true});\n  },\n  'ref': {\n    accept: consts.COMPONENT_TYPE + consts.ELEMENT_TYPE,\n    link: function( elem, value ){\n      var refs = this.$refs || (this.$refs = {});\n      var cval;\n      if(_.isExpr(value)){\n        this.$watch(value, function(nval, oval){\n          cval = nval;\n          if(refs[oval] === elem) { refs[oval] = null; }\n          if(cval) { refs[cval] = elem; }\n        })\n      }else{\n        refs[cval = value] = elem;\n      }\n      return function(){\n        refs[cval] = null;\n      }\n    }\n  }\n}\n\nRegular.directive(module.exports);\n});\n\nvar _$13 = util;\nvar animate$1 = animate_1;\nvar Regular$4 = Regular_1;\n\n\nvar rSpace = /\\s+/;\nvar WHEN_COMMAND = \"when\";\nvar EVENT_COMMAND = \"on\";\n\n/**\n * Animation Plugin\n * @param {Component} Component \n */\n\n\nfunction createSeed(type){\n\n  var steps = [], current = 0, callback = _$13.noop;\n  var key;\n\n  var out = {\n    type: type,\n    start: function(cb){\n      key = _$13.uid();\n      if(typeof cb === \"function\") { callback = cb; }\n      if(current> 0 ){\n        current = 0 ;\n      }else{\n        out.step();\n      }\n      return out.compelete;\n    },\n    compelete: function(){\n      key = null;\n      callback && callback();\n      callback = _$13.noop;\n      current = 0;\n    },\n    step: function(){\n      if(steps[current]) { steps[current ]( out.done.bind(out, key) ); }\n    },\n    done: function(pkey){\n      if(pkey !== key) { return; } // means the loop is down\n      if( current < steps.length - 1 ) {\n        current++;\n        out.step();\n      }else{\n        out.compelete();\n      }\n    },\n    push: function(step){\n      steps.push(step)\n    }\n  }\n\n  return out;\n}\n\nRegular$4._addProtoInheritCache(\"animation\")\n\n\n// builtin animation\nRegular$4.animation({\n  \"wait\": function( step ){\n    var timeout = parseInt( step.param ) || 0\n    return function(done){\n      // _.log(\"delay \" + timeout)\n      setTimeout( done, timeout );\n    }\n  },\n  \"class\": function(step){\n    var tmp = step.param.split(\",\"),\n      className = tmp[0] || \"\",\n      mode = parseInt(tmp[1]) || 1;\n\n    return function(done){\n      // _.log(className)\n      animate$1.startClassAnimate( step.element, className , done, mode );\n    }\n  },\n  \"call\": function(step){\n    var fn = this.$expression(step.param).get, self = this;\n    return function(done){\n      // _.log(step.param, 'call')\n      fn(self);\n      self.$update();\n      done()\n    }\n  },\n  \"emit\": function(step){\n    var param = step.param;\n    var tmp = param.split(\",\"),\n      evt = tmp[0] || \"\",\n      args = tmp[1]? this.$expression(tmp[1]).get: null;\n\n    if(!evt) { throw Error(\"you shoud specified a eventname in emit command\"); }\n\n    var self = this;\n    return function(done){\n      self.$emit(evt, args? args(self) : undefined);\n      done();\n    }\n  },\n  // style: left {10}px,\n  style: function(step){\n    var styles = {}, \n      param = step.param,\n      pairs = param.split(\",\"), valid;\n    pairs.forEach(function(pair){\n      pair = pair.trim();\n      if(pair){\n        var tmp = pair.split( rSpace ),\n          name = tmp.shift(),\n          value = tmp.join(\" \");\n\n        if( !name || !value ) { throw Error(\"invalid style in command: style\"); }\n        styles[name] = value;\n        valid = true;\n      }\n    })\n\n    return function(done){\n      if(valid){\n        animate$1.startStyleAnimate(step.element, styles, done);\n      }else{\n        done();\n      }\n    }\n  }\n})\n\n\n\n// hancdle the r-animation directive\n// el : the element to process\n// value: the directive value\nfunction processAnimate( element, value ){\n  var this$1 = this;\n\n  var Component = this.constructor;\n\n  if(_$13.isExpr(value)){\n    value = value.get(this);\n  }\n\n  value = value.trim();\n\n  var composites = value.split(\";\"), \n    composite, context = this, seeds = [], seed, destroies = [], destroy,\n    command, param , current = 0, tmp, animator, self = this;\n\n  function reset( type ){\n    seed && seeds.push( seed )\n    seed = createSeed( type );\n  }\n\n  function whenCallback(start, value){\n    if( !!value ) { start() }\n  }\n\n  function animationDestroy(element){\n    return function(){\n      element.onenter = null;\n      element.onleave = null;\n    } \n  }\n\n  for( var i = 0, len = composites.length; i < len; i++ ){\n\n    composite = composites[i];\n    tmp = composite.split(\":\");\n    command = tmp[0] && tmp[0].trim();\n    param = tmp[1] && tmp[1].trim();\n\n    if( !command ) { continue; }\n\n    if( command === WHEN_COMMAND ){\n      reset(\"when\");\n      this$1.$watch(param, whenCallback.bind( this$1, seed.start ) );\n      continue;\n    }\n\n    if( command === EVENT_COMMAND){\n      reset(param);\n      if( param === \"leave\" ){\n        element.onleave = seed.start;\n        destroies.push( animationDestroy(element) );\n      }else if( param === \"enter\" ){\n        element.onenter = seed.start;\n        destroies.push( animationDestroy(element) );\n      }else{\n        if( (\"on\" + param) in element){ // if dom have the event , we use dom event\n          destroies.push(this$1._handleEvent( element, param, seed.start ));\n        }else{ // otherwise, we use component event\n          this$1.$on(param, seed.start);\n          destroies.push(this$1.$off.bind(this$1, param, seed.start));\n        }\n      }\n      continue;\n    }\n\n    var animator =  Component.animation(command) \n    if( animator && seed ){\n      seed.push(\n        animator.call(this$1,{\n          element: element,\n          done: seed.done,\n          param: param \n        })\n      )\n    }else{\n      throw Error( animator? \"you should start with `on` or `event` in animation\" : (\"undefined animator 【\" + command +\"】\" ));\n    }\n  }\n\n  if(destroies.length){\n    return function(){\n      destroies.forEach(function(destroy){\n        destroy();\n      })\n    }\n  }\n}\n\n\nRegular$4.directive( \"r-animation\", processAnimate)\nRegular$4.directive( \"r-anim\", processAnimate)\n\nvar Regular$5 = Regular_1;\n\n/**\n * Timeout Module\n * @param {Component} Component \n */\nfunction TimeoutModule(Component){\n\n  Component.implement({\n    /**\n     * just like setTimeout, but will enter digest automately\n     * @param  {Function} fn    \n     * @param  {Number}   delay \n     * @return {Number}   timeoutid\n     */\n    $timeout: function(fn, delay){\n      delay = delay || 0;\n      return setTimeout(function(){\n        fn.call(this);\n        this.$update(); //enter digest\n      }.bind(this), delay);\n    },\n    /**\n     * just like setInterval, but will enter digest automately\n     * @param  {Function} fn    \n     * @param  {Number}   interval \n     * @return {Number}   intervalid\n     */\n    $interval: function(fn, interval){\n      interval = interval || 1000/60;\n      return setInterval(function(){\n        fn.call(this);\n        this.$update(); //enter digest\n      }.bind(this), interval);\n    }\n  });\n}\n\n\nRegular$5.plugin('timeout', TimeoutModule);\nRegular$5.plugin('$timeout', TimeoutModule);\n\nvar index$1 = createCommonjsModule(function (module) {\nvar env$$1 =  env;\nvar config = config$1; \nvar Regular = module.exports = Regular_1;\nvar Parser = Regular.Parser;\nvar Lexer = Regular.Lexer;\n\nif(env$$1.browser){\n    \n    \n    \n    Regular.dom = dom_1;\n}\nRegular.env = env$$1;\nRegular.util = util;\nRegular.parse = function(str, options){\n  options = options || {};\n\n  if(options.BEGIN || options.END){\n    if(options.BEGIN) { config.BEGIN = options.BEGIN; }\n    if(options.END) { config.END = options.END; }\n    Lexer.setup();\n  }\n  var ast = new Parser(str).parse();\n  return !options.stringify? ast : JSON.stringify(ast);\n}\n});\n\nvar eventemitter2 = createCommonjsModule(function (module, exports) {\n/*!\r\n * EventEmitter2\r\n * https://github.com/hij1nx/EventEmitter2\r\n *\r\n * Copyright (c) 2013 hij1nx\r\n * Licensed under the MIT license.\r\n */\r\n!function(undefined) {\r\n\r\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\r\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\r\n  };\r\n  var defaultMaxListeners = 10;\r\n\r\n  function init() {\r\n    this._events = {};\r\n    if (this._conf) {\r\n      configure.call(this, this._conf);\r\n    }\r\n  }\r\n\r\n  function configure(conf) {\r\n    if (conf) {\r\n      this._conf = conf;\r\n\r\n      conf.delimiter && (this.delimiter = conf.delimiter);\r\n      this._events.maxListeners = conf.maxListeners !== undefined ? conf.maxListeners : defaultMaxListeners;\r\n      conf.wildcard && (this.wildcard = conf.wildcard);\r\n      conf.newListener && (this.newListener = conf.newListener);\r\n\r\n      if (this.wildcard) {\r\n        this.listenerTree = {};\r\n      }\r\n    } else {\r\n      this._events.maxListeners = defaultMaxListeners;\r\n    }\r\n  }\r\n\r\n  function logPossibleMemoryLeak(count) {\r\n    console.error('(node) warning: possible EventEmitter memory ' +\r\n      'leak detected. %d listeners added. ' +\r\n      'Use emitter.setMaxListeners() to increase limit.',\r\n      count);\r\n\r\n    if (console.trace){\r\n      console.trace();\r\n    }\r\n  }\r\n\r\n  function EventEmitter(conf) {\r\n    this._events = {};\r\n    this.newListener = false;\r\n    configure.call(this, conf);\r\n  }\r\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\r\n\r\n  //\r\n  // Attention, function return type now is array, always !\r\n  // It has zero elements if no any matches found and one or more\r\n  // elements (leafs) if there are matches\r\n  //\r\n  function searchListenerTree(handlers, type, tree, i) {\r\n    if (!tree) {\r\n      return [];\r\n    }\r\n    var listeners=[], leaf, len, branch, xTree, xxTree, isolatedBranch, endReached,\r\n        typeLength = type.length, currentType = type[i], nextType = type[i+1];\r\n    if (i === typeLength && tree._listeners) {\r\n      //\r\n      // If at the end of the event(s) list and the tree has listeners\r\n      // invoke those listeners.\r\n      //\r\n      if (typeof tree._listeners === 'function') {\r\n        handlers && handlers.push(tree._listeners);\r\n        return [tree];\r\n      } else {\r\n        for (leaf = 0, len = tree._listeners.length; leaf < len; leaf++) {\r\n          handlers && handlers.push(tree._listeners[leaf]);\r\n        }\r\n        return [tree];\r\n      }\r\n    }\r\n\r\n    if ((currentType === '*' || currentType === '**') || tree[currentType]) {\r\n      //\r\n      // If the event emitted is '*' at this part\r\n      // or there is a concrete match at this patch\r\n      //\r\n      if (currentType === '*') {\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+1));\r\n          }\r\n        }\r\n        return listeners;\r\n      } else if(currentType === '**') {\r\n        endReached = (i+1 === typeLength || (i+2 === typeLength && nextType === '*'));\r\n        if(endReached && tree._listeners) {\r\n          // The next element has a _listeners, add it to the handlers.\r\n          listeners = listeners.concat(searchListenerTree(handlers, type, tree, typeLength));\r\n        }\r\n\r\n        for (branch in tree) {\r\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\r\n            if(branch === '*' || branch === '**') {\r\n              if(tree[branch]._listeners && !endReached) {\r\n                listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], typeLength));\r\n              }\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            } else if(branch === nextType) {\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+2));\r\n            } else {\r\n              // No match on this one, shift into the tree but not in the type array.\r\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\r\n            }\r\n          }\r\n        }\r\n        return listeners;\r\n      }\r\n\r\n      listeners = listeners.concat(searchListenerTree(handlers, type, tree[currentType], i+1));\r\n    }\r\n\r\n    xTree = tree['*'];\r\n    if (xTree) {\r\n      //\r\n      // If the listener tree will allow any match for this part,\r\n      // then recursively explore all branches of the tree\r\n      //\r\n      searchListenerTree(handlers, type, xTree, i+1);\r\n    }\r\n\r\n    xxTree = tree['**'];\r\n    if(xxTree) {\r\n      if(i < typeLength) {\r\n        if(xxTree._listeners) {\r\n          // If we have a listener on a '**', it will catch all, so add its handler.\r\n          searchListenerTree(handlers, type, xxTree, typeLength);\r\n        }\r\n\r\n        // Build arrays of matching next branches and others.\r\n        for(branch in xxTree) {\r\n          if(branch !== '_listeners' && xxTree.hasOwnProperty(branch)) {\r\n            if(branch === nextType) {\r\n              // We know the next element will match, so jump twice.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+2);\r\n            } else if(branch === currentType) {\r\n              // Current node matches, move into the tree.\r\n              searchListenerTree(handlers, type, xxTree[branch], i+1);\r\n            } else {\r\n              isolatedBranch = {};\r\n              isolatedBranch[branch] = xxTree[branch];\r\n              searchListenerTree(handlers, type, { '**': isolatedBranch }, i+1);\r\n            }\r\n          }\r\n        }\r\n      } else if(xxTree._listeners) {\r\n        // We have reached the end and still on a '**'\r\n        searchListenerTree(handlers, type, xxTree, typeLength);\r\n      } else if(xxTree['*'] && xxTree['*']._listeners) {\r\n        searchListenerTree(handlers, type, xxTree['*'], typeLength);\r\n      }\r\n    }\r\n\r\n    return listeners;\r\n  }\r\n\r\n  function growListenerTree(type, listener) {\n    var this$1 = this;\n\r\n\r\n    type = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n\r\n    //\r\n    // Looks for two consecutive '**', if so, don't add the event at all.\r\n    //\r\n    for(var i = 0, len = type.length; i+1 < len; i++) {\r\n      if(type[i] === '**' && type[i+1] === '**') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var tree = this.listenerTree;\r\n    var name = type.shift();\r\n\r\n    while (name !== undefined) {\r\n\r\n      if (!tree[name]) {\r\n        tree[name] = {};\r\n      }\r\n\r\n      tree = tree[name];\r\n\r\n      if (type.length === 0) {\r\n\r\n        if (!tree._listeners) {\r\n          tree._listeners = listener;\r\n        }\r\n        else {\r\n          if (typeof tree._listeners === 'function') {\r\n            tree._listeners = [tree._listeners];\r\n          }\r\n\r\n          tree._listeners.push(listener);\r\n\r\n          if (\r\n            !tree._listeners.warned &&\r\n            this$1._events.maxListeners > 0 &&\r\n            tree._listeners.length > this$1._events.maxListeners\r\n          ) {\r\n            tree._listeners.warned = true;\r\n            logPossibleMemoryLeak(tree._listeners.length);\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n      name = type.shift();\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // By default EventEmitters will print a warning if more than\r\n  // 10 listeners are added to it. This is a useful default which\r\n  // helps finding memory leaks.\r\n  //\r\n  // Obviously not all Emitters should be limited to 10. This function allows\r\n  // that to be increased. Set to zero for unlimited.\r\n\r\n  EventEmitter.prototype.delimiter = '.';\r\n\r\n  EventEmitter.prototype.setMaxListeners = function(n) {\r\n    if (n !== undefined) {\r\n      this._events || init.call(this);\r\n      this._events.maxListeners = n;\r\n      if (!this._conf) { this._conf = {}; }\r\n      this._conf.maxListeners = n;\r\n    }\r\n  };\r\n\r\n  EventEmitter.prototype.event = '';\r\n\r\n  EventEmitter.prototype.once = function(event, fn) {\r\n    this.many(event, 1, fn);\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.many = function(event, ttl, fn) {\r\n    var self = this;\r\n\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('many only accepts instances of Function');\r\n    }\r\n\r\n    function listener() {\r\n      if (--ttl === 0) {\r\n        self.off(event, listener);\r\n      }\r\n      fn.apply(this, arguments);\r\n    }\r\n\r\n    listener._origin = fn;\r\n\r\n    this.on(event, listener);\r\n\r\n    return self;\r\n  };\r\n\r\n  EventEmitter.prototype.emit = function() {\n    var arguments$1 = arguments;\n    var this$1 = this;\n\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n      if (!this._events.newListener) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all && this._all.length) {\r\n      handler = this._all.slice();\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 0; j < al; j++) { args[j] = arguments$1[j]; }\r\n      }\r\n\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this$1.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this$1, type);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this$1, type, arguments$1[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this$1, type, arguments$1[1], arguments$1[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this$1, args);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n      if (typeof handler === 'function') {\r\n        this.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler.call(this);\r\n          break;\r\n        case 2:\r\n          handler.call(this, arguments[1]);\r\n          break;\r\n        case 3:\r\n          handler.call(this, arguments[1], arguments[2]);\r\n          break;\r\n        default:\r\n          args = new Array(al - 1);\r\n          for (j = 1; j < al; j++) { args[j - 1] = arguments$1[j]; }\r\n          handler.apply(this, args);\r\n        }\r\n        return true;\r\n      } else if (handler) {\r\n        // need to make copy of handlers because list can change in the middle\r\n        // of emit call\r\n        handler = handler.slice();\r\n      }\r\n    }\r\n\r\n    if (handler && handler.length) {\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) { args[j - 1] = arguments$1[j]; }\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this$1.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          handler[i].call(this$1);\r\n          break;\r\n        case 2:\r\n          handler[i].call(this$1, arguments$1[1]);\r\n          break;\r\n        case 3:\r\n          handler[i].call(this$1, arguments$1[1], arguments$1[2]);\r\n          break;\r\n        default:\r\n          handler[i].apply(this$1, args);\r\n        }\r\n      }\r\n      return true;\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        throw arguments[1]; // Unhandled 'error' event\r\n      } else {\r\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n      return false;\r\n    }\r\n\r\n    return !!this._all;\r\n  };\r\n\r\n  EventEmitter.prototype.emitAsync = function() {\n    var arguments$1 = arguments;\n    var this$1 = this;\n\r\n\r\n    this._events || init.call(this);\r\n\r\n    var type = arguments[0];\r\n\r\n    if (type === 'newListener' && !this.newListener) {\r\n        if (!this._events.newListener) { return Promise.resolve([false]); }\r\n    }\r\n\r\n    var promises= [];\r\n\r\n    var al = arguments.length;\r\n    var args,l,i,j;\r\n    var handler;\r\n\r\n    if (this._all) {\r\n      if (al > 3) {\r\n        args = new Array(al);\r\n        for (j = 1; j < al; j++) { args[j] = arguments$1[j]; }\r\n      }\r\n      for (i = 0, l = this._all.length; i < l; i++) {\r\n        this$1.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(this$1._all[i].call(this$1, type));\r\n          break;\r\n        case 2:\r\n          promises.push(this$1._all[i].call(this$1, type, arguments$1[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(this$1._all[i].call(this$1, type, arguments$1[1], arguments$1[2]));\r\n          break;\r\n        default:\r\n          promises.push(this$1._all[i].apply(this$1, args));\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      handler = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\r\n    } else {\r\n      handler = this._events[type];\r\n    }\r\n\r\n    if (typeof handler === 'function') {\r\n      this.event = type;\r\n      switch (al) {\r\n      case 1:\r\n        promises.push(handler.call(this));\r\n        break;\r\n      case 2:\r\n        promises.push(handler.call(this, arguments[1]));\r\n        break;\r\n      case 3:\r\n        promises.push(handler.call(this, arguments[1], arguments[2]));\r\n        break;\r\n      default:\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) { args[j - 1] = arguments$1[j]; }\r\n        promises.push(handler.apply(this, args));\r\n      }\r\n    } else if (handler && handler.length) {\r\n      if (al > 3) {\r\n        args = new Array(al - 1);\r\n        for (j = 1; j < al; j++) { args[j - 1] = arguments$1[j]; }\r\n      }\r\n      for (i = 0, l = handler.length; i < l; i++) {\r\n        this$1.event = type;\r\n        switch (al) {\r\n        case 1:\r\n          promises.push(handler[i].call(this$1));\r\n          break;\r\n        case 2:\r\n          promises.push(handler[i].call(this$1, arguments$1[1]));\r\n          break;\r\n        case 3:\r\n          promises.push(handler[i].call(this$1, arguments$1[1], arguments$1[2]));\r\n          break;\r\n        default:\r\n          promises.push(handler[i].apply(this$1, args));\r\n        }\r\n      }\r\n    } else if (!this._all && type === 'error') {\r\n      if (arguments[1] instanceof Error) {\r\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\r\n      } else {\r\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n    }\r\n\r\n    return Promise.all(promises);\r\n  };\r\n\r\n  EventEmitter.prototype.on = function(type, listener) {\r\n    if (typeof type === 'function') {\r\n      this.onAny(type);\r\n      return this;\r\n    }\r\n\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('on only accepts instances of Function');\r\n    }\r\n    this._events || init.call(this);\r\n\r\n    // To avoid recursion in the case that type == \"newListeners\"! Before\r\n    // adding it to the listeners, first emit \"newListeners\".\r\n    this.emit('newListener', type, listener);\r\n\r\n    if (this.wildcard) {\r\n      growListenerTree.call(this, type, listener);\r\n      return this;\r\n    }\r\n\r\n    if (!this._events[type]) {\r\n      // Optimize the case of one listener. Don't need the extra array object.\r\n      this._events[type] = listener;\r\n    }\r\n    else {\r\n      if (typeof this._events[type] === 'function') {\r\n        // Change to array.\r\n        this._events[type] = [this._events[type]];\r\n      }\r\n\r\n      // If we've already got an array, just append.\r\n      this._events[type].push(listener);\r\n\r\n      // Check for listener leak\r\n      if (\r\n        !this._events[type].warned &&\r\n        this._events.maxListeners > 0 &&\r\n        this._events[type].length > this._events.maxListeners\r\n      ) {\r\n        this._events[type].warned = true;\r\n        logPossibleMemoryLeak(this._events[type].length);\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.onAny = function(fn) {\r\n    if (typeof fn !== 'function') {\r\n      throw new Error('onAny only accepts instances of Function');\r\n    }\r\n\r\n    if (!this._all) {\r\n      this._all = [];\r\n    }\r\n\r\n    // Add the function to the event listener collection.\r\n    this._all.push(fn);\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\r\n\r\n  EventEmitter.prototype.off = function(type, listener) {\n    var this$1 = this;\n\r\n    if (typeof listener !== 'function') {\r\n      throw new Error('removeListener only takes instances of Function');\r\n    }\r\n\r\n    var handlers,leafs=[];\r\n\r\n    if(this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n    }\r\n    else {\r\n      // does not use listeners(), so no side effect of creating _events[type]\r\n      if (!this._events[type]) { return this; }\r\n      handlers = this._events[type];\r\n      leafs.push({_listeners:handlers});\r\n    }\r\n\r\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n      var leaf = leafs[iLeaf];\r\n      handlers = leaf._listeners;\r\n      if (isArray(handlers)) {\r\n\r\n        var position = -1;\r\n\r\n        for (var i = 0, length = handlers.length; i < length; i++) {\r\n          if (handlers[i] === listener ||\r\n            (handlers[i].listener && handlers[i].listener === listener) ||\r\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\r\n            position = i;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (position < 0) {\r\n          continue;\r\n        }\r\n\r\n        if(this$1.wildcard) {\r\n          leaf._listeners.splice(position, 1);\r\n        }\r\n        else {\r\n          this$1._events[type].splice(position, 1);\r\n        }\r\n\r\n        if (handlers.length === 0) {\r\n          if(this$1.wildcard) {\r\n            delete leaf._listeners;\r\n          }\r\n          else {\r\n            delete this$1._events[type];\r\n          }\r\n        }\r\n\r\n        this$1.emit(\"removeListener\", type, listener);\r\n\r\n        return this$1;\r\n      }\r\n      else if (handlers === listener ||\r\n        (handlers.listener && handlers.listener === listener) ||\r\n        (handlers._origin && handlers._origin === listener)) {\r\n        if(this$1.wildcard) {\r\n          delete leaf._listeners;\r\n        }\r\n        else {\r\n          delete this$1._events[type];\r\n        }\r\n\r\n        this$1.emit(\"removeListener\", type, listener);\r\n      }\r\n    }\r\n\r\n    function recursivelyGarbageCollect(root) {\r\n      if (root === undefined) {\r\n        return;\r\n      }\r\n      var keys = Object.keys(root);\r\n      for (var i in keys) {\r\n        var key = keys[i];\r\n        var obj = root[key];\r\n        if ((obj instanceof Function) || (typeof obj !== \"object\") || (obj === null))\r\n          { continue; }\r\n        if (Object.keys(obj).length > 0) {\r\n          recursivelyGarbageCollect(root[key]);\r\n        }\r\n        if (Object.keys(obj).length === 0) {\r\n          delete root[key];\r\n        }\r\n      }\r\n    }\r\n    recursivelyGarbageCollect(this.listenerTree);\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.offAny = function(fn) {\n    var this$1 = this;\n\r\n    var i = 0, l = 0, fns;\r\n    if (fn && this._all && this._all.length > 0) {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++) {\r\n        if(fn === fns[i]) {\r\n          fns.splice(i, 1);\r\n          this$1.emit(\"removeListenerAny\", fn);\r\n          return this$1;\r\n        }\r\n      }\r\n    } else {\r\n      fns = this._all;\r\n      for(i = 0, l = fns.length; i < l; i++)\r\n        { this$1.emit(\"removeListenerAny\", fns[i]); }\r\n      this._all = [];\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\r\n\r\n  EventEmitter.prototype.removeAllListeners = function(type) {\r\n    if (arguments.length === 0) {\r\n      !this._events || init.call(this);\r\n      return this;\r\n    }\r\n\r\n    if (this.wildcard) {\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      var leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\r\n\r\n      for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\r\n        var leaf = leafs[iLeaf];\r\n        leaf._listeners = null;\r\n      }\r\n    }\r\n    else if (this._events) {\r\n      this._events[type] = null;\r\n    }\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.listeners = function(type) {\r\n    if (this.wildcard) {\r\n      var handlers = [];\r\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\r\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\r\n      return handlers;\r\n    }\r\n\r\n    this._events || init.call(this);\r\n\r\n    if (!this._events[type]) { this._events[type] = []; }\r\n    if (!isArray(this._events[type])) {\r\n      this._events[type] = [this._events[type]];\r\n    }\r\n    return this._events[type];\r\n  };\r\n\r\n  EventEmitter.prototype.listenerCount = function(type) {\r\n    return this.listeners(type).length;\r\n  };\r\n\r\n  EventEmitter.prototype.listenersAny = function() {\r\n\r\n    if(this._all) {\r\n      return this._all;\r\n    }\r\n    else {\r\n      return [];\r\n    }\r\n\r\n  };\r\n\r\n  if (typeof define === 'function' && define.amd) {\r\n     // AMD. Register as an anonymous module.\r\n    define(function() {\r\n      return EventEmitter;\r\n    });\r\n  } else if (typeof exports === 'object') {\r\n    // CommonJS\r\n    module.exports = EventEmitter;\r\n  }\r\n  else {\r\n    // Browser global.\r\n    window.EventEmitter2 = EventEmitter;\r\n  }\r\n}();\n});\n\nvar ALWAYS_NOTIFY_KEY = '_(:з」∠)_';\r\n\r\nvar Store = function Store( app ) {\r\n\tthis._app = app;\r\n\tthis._models = {};\r\n\tthis._modelArray = [];\r\n\tthis._state = {};\r\n\tthis._subscribers = {};\r\n\tthis._subscribers[ ALWAYS_NOTIFY_KEY ] = [];\r\n};\r\nStore.prototype.replaceState = function replaceState ( nextState ) {\r\n\tvar models = this._models;\r\n\tthis._state = nextState;\r\n\tfor ( var i in nextState ) {\r\n\t\tif ( typeof models[ i ] !== 'undefined' ) {\r\n\t\t\tmodels[ i ].replaceState( nextState[ i ] );\r\n\t\t}\r\n\t}\r\n\tthis.notifyViews();\r\n};\r\nStore.prototype.getState = function getState () {\r\n\treturn this._state;\r\n};\r\nStore.prototype.registerModel = function registerModel ( name, model ) {\n\t\tvar this$1 = this;\n\r\n\tthis._models[ name ] = model;\r\n\tthis._modelArray.push( model );\r\n\tthis._state[ name ] = model.state;\r\n\r\n\t// auto subscribe model changes when added\r\n\tmodel.subscribe( function ( type, payload ) {\r\n\t\tthis$1.notify( name, type, payload );\r\n\t} );\r\n};\r\nStore.prototype.registerActions = function registerActions ( actions ) {\r\n\tif( this._actions ) {\r\n\t\treturn console.error( 'actions already registered' );\r\n\t}\r\n\tthis._actions = actions;\r\n};\r\nStore.prototype._get = function _get ( getterKey ) {\r\n\treturn this._app._getters &&\r\n\t\tthis._app._getters[ getterKey ] &&\r\n\t\tthis._app._getters[ getterKey ]( this.getState() );\r\n};\r\nStore.prototype._commit = function _commit ( type, payload ) {\r\n\tvar parts = type.split( '/' );\r\n\tvar name = parts[0];\n\t\tvar truetype = parts[1];\r\n\r\n\tvar model = this._models[ name ];\r\n\tif( model ) {\r\n\t\treturn model.commit( truetype, payload );\r\n\t}\r\n};\r\nStore.prototype.dispatch = function dispatch ( type, payload ) {\r\n\tif ( !this._actions[ type ] ) {\r\n\t\treturn console.error( (\"action \\\"\" + type + \"\\\" is not found\") );\r\n\t}\r\n\treturn this._actions[ type ]( {\r\n\t\tget: this._get.bind( this ),\r\n\t\tcommit: this._commit.bind( this ),\r\n\t\tdispatch: this.dispatch.bind( this ),\r\n\t}, payload );\r\n};\r\nStore.prototype.notify = function notify ( name, type, payload ) {\n\t\tvar this$1 = this;\n\r\n\tvar cbs = ( this._subscribers[ name ] || [] ).concat( this._subscribers[ ALWAYS_NOTIFY_KEY ] );\r\n\tvar state = this._state;\r\n\tfor ( var i = 0, len = cbs.length; i < len; i++ ) {\r\n\t\tvar cb = cbs[ i ];\r\n\t\tcb( { type: (name + \"/\" + type), payload: payload }, this$1._state );\r\n\t}\r\n};\r\nStore.prototype.notifyViews = function notifyViews () {\n\t\tvar this$1 = this;\n\r\n\tvar cbs = [];\r\n\tfor ( var i in this._subscribers ) {\r\n\t\tcbs = cbs.concat( this$1._subscribers[ i ] );\r\n\t}\r\n\tvar state = this._state;\r\n\tfor ( var i$1 = 0, len = cbs.length; i$1 < len; i$1++ ) {\r\n\t\tvar cb = cbs[ i$1 ];\r\n\t\tif ( cb._isFromView ) {\r\n\t\t\tcb();\r\n\t\t}\r\n\t}\r\n};\r\nStore.prototype.subscribe = function subscribe ( fn, names ) {\n\t\tvar this$1 = this;\n\r\n\tif ( !names ) {\r\n\t\tthis._subscribers[ ALWAYS_NOTIFY_KEY ].push( fn );\r\n\t\treturn;\r\n\t}\r\n\r\n\tfor ( var i = 0, len = names.length; i < len; i++ ) {\r\n\t\tvar name = names[ i ];\r\n\t\tthis$1._subscribers[ name ] = this$1._subscribers[ name ] || [];\r\n\t\tthis$1._subscribers[ name ].push( fn );\r\n\t}\r\n};\r\nStore.prototype.toArray = function toArray () {\r\n\treturn this._modelArray;\r\n};\n\nvar Model = function Model( ref ) {\n\tif ( ref === void 0 ) ref = {};\n\tvar state = ref.state; if ( state === void 0 ) state = {};\n\tvar reducers = ref.reducers; if ( reducers === void 0 ) reducers = {};\n\r\n\tthis._state = state;\r\n\tthis._reducers = reducers;\r\n\tthis._subscribers = [];\r\n\tthis._committing = false;\r\n};\n\nvar prototypeAccessors = { state: {} };\r\nprototypeAccessors.state.get = function () {\r\n\treturn this._state;\r\n};\r\nprototypeAccessors.state.set = function ( v ) {\r\n\tthrow new Error( 'cannot replace state directly' );\r\n};\r\nModel.prototype.replaceState = function replaceState ( nextState ) {\r\n\tthis._state = nextState;\r\n};\r\nModel.prototype.watch = function watch () {\r\n\r\n};\r\nModel.prototype.subscribe = function subscribe ( fn ) {\r\n\tthis._subscribers.push( fn );\r\n};\r\nModel.prototype.commit = function commit ( type, payload ) {\n\t\tvar this$1 = this;\n\r\n\tif( this._committing ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// invalid action\r\n\tif( typeof type !== 'string' ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar reducers = this._reducers;\r\n\tvar state = this._state;\r\n\r\n\tfor ( var i in reducers ) {\r\n\t\tif( type === i ) {\r\n\t\t\tvar reducer = reducers[ i ];\r\n\t\t\tthis$1._committing = true;\r\n\t\t\treducer( state, payload );\r\n\t\t\tthis$1._committing = false;\r\n\t\t\t// notify subscribers\r\n\t\t\tthis$1.notify( type, payload );\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n};\r\nModel.prototype.notify = function notify ( type, payload ) {\r\n\tvar subscribers = this._subscribers;\r\n\tfor ( var i = 0, len = subscribers.length; i < len; i++ ) {\r\n\t\tsubscribers[ i ]( type, payload );\r\n\t}\r\n};\n\nObject.defineProperties( Model.prototype, prototypeAccessors );\n\nvar PulginManager = function PulginManager( app ) {\r\n\tthis._app = app;\r\n};\r\nPulginManager.prototype.register = function register ( plugin ) {\n\t\tvar this$1 = this;\n\r\n\tthis._app.once( 'before-start', function () {\r\n\t\tthis$1.use( plugin );\r\n\t} );\r\n};\r\nPulginManager.prototype.use = function use ( plugin ) {\r\n\tvar store = this._app._store;\r\n\tplugin( store );\r\n};\n\nvar ViewManager = function ViewManager( app ) {\r\n\tvar store = app._store;\r\n\tvar Base = app._Base;\r\n\tBase.implement( {\r\n\t\tevents: {\r\n\t\t\t$config: function $config() {\n\t\t\t\tvar this$1 = this;\n\r\n\t\t\t\t// auto-subscribe\r\n\t\t\t\tvar models = this.models;\r\n\r\n\t\t\t\tvar update = function () {\r\n\t\t\t\t\tthis$1.$update();\r\n\t\t\t\t};\r\n\t\t\t\tupdate._isFromView = true;\r\n\r\n\t\t\t\tstore.subscribe( update, models );\r\n\t\t\t}\r\n\t\t},\r\n\t\tdispatch: function dispatch() {\n\t\t\tvar args = [], len = arguments.length;\n\t\t\twhile ( len-- ) args[ len ] = arguments[ len ];\n\r\n\t\t\treturn store.dispatch.apply( store, args );\r\n\t\t}\r\n\t} );\r\n};\n\nvar regularRouter = createCommonjsModule(function (module, exports) {\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.regularRouter = factory());\n}(commonjsGlobal, (function () { 'use strict';\n\nfunction createCommonjsModule$$1(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar util = createCommonjsModule$$1(function (module) {\nvar _ = module.exports = {};\nvar slice = [].slice, o2str = ({}).toString;\n\n\n// merge o2's properties to Object o1. \n_.extend = function(o1, o2, override){\n  for(var i in o2) { if(override || o1[i] === undefined){\n    o1[i] = o2[i]\n  } }\n  return o1;\n}\n\n\n\n_.slice = function(arr, index){\n  return slice.call(arr, index);\n}\n\n_.typeOf = function typeOf (o) {\n  return o == null ? String(o) : o2str.call(o).slice(8, -1).toLowerCase();\n}\n\n//strict eql\n_.eql = function(o1, o2){\n  var t1 = _.typeOf(o1), t2 = _.typeOf(o2);\n  if( t1 !== t2) { return false; }\n  if(t1 === 'object'){\n    var equal = true;\n    // only check the first's propertie\n    for(var i in o1){\n      if( o1[i] !== o2[i] ) { equal = false; }\n    }\n    return equal;\n  }\n  return o1 === o2;\n}\n\n\n// small emitter \n_.emitable = (function(){\n  function norm(ev){\n    var eventAndNamespace = (ev||'').split(':');\n    return {event: eventAndNamespace[0], namespace: eventAndNamespace[1]}\n  }\n  var API = {\n    once: function(event, fn){\n      var callback = function(){\n        fn.apply(this, arguments)\n        this.off(event, callback)\n      }\n      return this.on(event, callback)\n    },\n    on: function(event, fn) {\n      var this$1 = this;\n\n      if(typeof event === 'object'){\n        for (var i in event) {\n          this$1.on(i, event[i]);\n        }\n        return this;\n      }\n      var ne = norm(event);\n      event=ne.event;\n      if(event && typeof fn === 'function' ){\n        var handles = this._handles || (this._handles = {}),\n          calls = handles[event] || (handles[event] = []);\n        fn._ns = ne.namespace;\n        calls.push(fn);\n      }\n      return this;\n    },\n    off: function(event, fn) {\n      var this$1 = this;\n\n      var ne = norm(event); event = ne.event;\n      if(!event || !this._handles) { this._handles = {}; }\n\n      var handles = this._handles , calls;\n\n      if (calls = handles[event]) {\n        if (!fn && !ne.namespace) {\n          handles[event] = [];\n        }else{\n          for (var i = 0, len = calls.length; i < len; i++) {\n            if ( (!fn || fn === calls[i]) && (!ne.namespace || calls[i]._ns === ne.namespace) ) {\n              calls.splice(i, 1);\n              return this$1;\n            }\n          }\n        }\n      }\n      return this;\n    },\n    emit: function(event){\n      var this$1 = this;\n\n      var ne = norm(event); event = ne.event;\n\n      var args = _.slice(arguments, 1),\n        handles = this._handles, calls;\n\n      if (!handles || !(calls = handles[event])) { return this; }\n      for (var i = 0, len = calls.length; i < len; i++) {\n        var fn = calls[i];\n        if( !ne.namespace || fn._ns === ne.namespace ) { fn.apply(this$1, args) }\n      }\n      return this;\n    }\n  }\n  return function(obj){\n      obj = typeof obj == \"function\" ? obj.prototype : obj;\n      return _.extend(obj, API)\n  }\n})();\n\n\n\n_.bind = function(fn, context){\n  return function(){\n    return fn.apply(context, arguments);\n  }\n}\n\nvar rDbSlash = /\\/+/g, // double slash\n  rEndSlash = /\\/$/;    // end slash\n\n_.cleanPath = function (path){\n  return (\"/\" + path).replace( rDbSlash,\"/\" ).replace( rEndSlash, \"\" ) || \"/\";\n}\n\n// normalize the path\nfunction normalizePath(path) {\n  // means is from \n  // (?:\\:([\\w-]+))?(?:\\(([^\\/]+?)\\))|(\\*{2,})|(\\*(?!\\*)))/g\n  var preIndex = 0;\n  var keys = [];\n  var index = 0;\n  var matches = \"\";\n\n  path = _.cleanPath(path);\n\n  var regStr = path\n    //  :id(capture)? | (capture)   |  ** | * \n    .replace(/\\:([\\w-]+)(?:\\(([^\\/]+?)\\))?|(?:\\(([^\\/]+)\\))|(\\*{2,})|(\\*(?!\\*))/g, \n      function(all, key, keyformat, capture, mwild, swild, startAt) {\n        // move the uncaptured fragment in the path\n        if(startAt > preIndex) { matches += path.slice(preIndex, startAt); }\n        preIndex = startAt + all.length;\n        if( key ){\n          matches += \"(\" + key + \")\";\n          keys.push(key)\n          return \"(\"+( keyformat || \"[\\\\w-]+\")+\")\";\n        }\n        matches += \"(\" + index + \")\";\n\n        keys.push( index++ );\n\n        if( capture ){\n           // sub capture detect\n          return \"(\" + capture +  \")\";\n        } \n        if(mwild) { return \"(.*)\"; }\n        if(swild) { return \"([^\\\\/]*)\"; }\n    })\n\n  if(preIndex !== path.length) { matches += path.slice(preIndex) }\n\n  return {\n    regexp: new RegExp(\"^\" + regStr +\"/?$\"),\n    keys: keys,\n    matches: matches || path\n  }\n}\n\n_.log = function(msg, type){\n  typeof console !== \"undefined\" && console[type || \"log\"](msg)\n}\n\n_.isPromise = function( obj ){\n\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n\n}\n\n\n\n_.normalize = normalizePath;\n});\n\nvar _$1 = util;\n\n\n\nfunction State$1(option){\n  this._states = {};\n  this._pending = false;\n  this.visited = false;\n  if(option) { this.config(option); }\n}\n\n\n//regexp cache\nState$1.rCache = {};\n\n_$1.extend( _$1.emitable( State$1 ), {\n  \n  state: function(stateName, config){\n    var this$1 = this;\n\n    if(_$1.typeOf(stateName) === \"object\"){\n      for(var i in stateName){\n        this$1.state(i, stateName[i])\n      }\n      return this;\n    }\n    var current, next, nextName, states = this._states, i=0;\n\n    if( typeof stateName === \"string\" ) { stateName = stateName.split(\".\"); }\n\n    var slen = stateName.length, current = this;\n    var stack = [];\n\n\n    do{\n      nextName = stateName[i];\n      next = states[nextName];\n      stack.push(nextName);\n      if(!next){\n        if(!config) { return; }\n        next = states[nextName] = new State$1();\n        _$1.extend(next, {\n          parent: current,\n          manager: current.manager || current,\n          name: stack.join(\".\"),\n          currentName: nextName\n        })\n        current.hasNext = true;\n        next.configUrl();\n      }\n      current = next;\n      states = next._states;\n    }while((++i) < slen )\n\n    if(config){\n       next.config(config);\n       return this;\n    } else {\n      return current;\n    }\n  },\n\n  config: function(configure){\n    var this$1 = this;\n\n\n    configure = this._getConfig(configure);\n\n    for(var i in configure){\n      var prop = configure[i];\n      switch(i){\n        case \"url\": \n          if(typeof prop === \"string\"){\n            this$1.url = prop;\n            this$1.configUrl();\n          }\n          break;\n        case \"events\": \n          this$1.on(prop)\n          break;\n        default:\n          this$1[i] = prop;\n      }\n    }\n  },\n\n  // children override\n  _getConfig: function(configure){\n    return typeof configure === \"function\"? {enter: configure} : configure;\n  },\n\n  //from url \n\n  configUrl: function(){\n    var url = \"\" , base = this, currentUrl;\n    var _watchedParam = [];\n\n    while( base ){\n\n      url = (typeof base.url === \"string\" ? base.url: (base.currentName || \"\")) + \"/\" + url;\n\n      // means absolute;\n      if(url.indexOf(\"^/\") === 0) {\n        url = url.slice(1);\n        break;\n      }\n      base = base.parent;\n    }\n    this.pattern = _$1.cleanPath(\"/\" + url);\n    var pathAndQuery = this.pattern.split(\"?\");\n    this.pattern = pathAndQuery[0];\n    // some Query we need watched\n\n    _$1.extend(this, _$1.normalize(this.pattern), true);\n  },\n  encode: function(param){\n    var state = this;\n    param = param || {};\n    \n    var matched = \"%\";\n\n    var url = state.matches.replace(/\\(([\\w-]+)\\)/g, function(all, capture){\n      var sec = param[capture] || \"\";\n      matched+= capture + \"%\";\n      return sec;\n    }) + \"?\";\n\n    // remained is the query, we need concat them after url as query\n    for(var i in param) {\n      if( matched.indexOf(\"%\"+i+\"%\") === -1) { url += i + \"=\" + param[i] + \"&\"; }\n    }\n    return _$1.cleanPath( url.replace(/(?:\\?|&)$/,\"\") )\n  },\n  decode: function( path ){\n    var matched = this.regexp.exec(path),\n      keys = this.keys;\n\n    if(matched){\n\n      var param = {};\n      for(var i =0,len=keys.length;i<len;i++){\n        param[keys[i]] = matched[i+1] \n      }\n      return param;\n    }else{\n      return false;\n    }\n  },\n  // by default, all lifecycle is permitted\n\n  async: function(){\n    throw new Error( 'please use option.async instead')\n  }\n\n})\n\n\nvar state = State$1;\n\nvar browser$1 = createCommonjsModule$$1(function (module) {\nvar win = window, \n  doc = document;\n\nvar b = module.exports = {\n  hash: \"onhashchange\" in win && (!doc.documentMode || doc.documentMode > 7),\n  history: win.history && \"onpopstate\" in win,\n  location: win.location,\n  getHref: function(node){\n    return \"href\" in node ? node.getAttribute(\"href\", 2) : node.getAttribute(\"href\");\n  },\n  on: \"addEventListener\" in win ?  // IE10 attachEvent is not working when binding the onpopstate, so we need check addEventLister first\n      function(node,type,cb){return node.addEventListener( type, cb )}\n    : function(node,type,cb){return node.attachEvent( \"on\" + type, cb )},\n    \n  off: \"removeEventListener\" in win ? \n      function(node,type,cb){return node.removeEventListener( type, cb )}\n    : function(node,type,cb){return node.detachEvent( \"on\" + type, cb )}\n}\n});\n\n// MIT\n// Thx Backbone.js 1.1.2  and https://github.com/cowboy/jquery-hashchange/blob/master/jquery.ba-hashchange.js\n// for iframe patches in old ie.\n\nvar browser = browser$1;\nvar _$2 = util;\n\n\n// the mode const\nvar QUIRK = 3;\nvar HASH = 1;\nvar HISTORY = 2;\n\n\n\n// extract History for test\n// resolve the conficlt with the Native History\nfunction Histery$1(options){\n  options = options || {};\n\n  // Trick from backbone.history for anchor-faked testcase \n  this.location = options.location || browser.location;\n\n  // mode config, you can pass absolute mode (just for test);\n  this.html5 = options.html5;\n  this.mode = options.html5 && browser.history ? HISTORY: HASH; \n  if( !browser.hash ) { this.mode = QUIRK; }\n  if(options.mode) { this.mode = options.mode; }\n\n  // hash prefix , used for hash or quirk mode\n  this.prefix = \"#\" + (options.prefix || \"\") ;\n  this.rPrefix = new RegExp(this.prefix + '(.*)$');\n  this.interval = options.interval || 66;\n\n  // the root regexp for remove the root for the path. used in History mode\n  this.root = options.root ||  \"/\" ;\n  this.rRoot = new RegExp(\"^\" +  this.root);\n\n  this._fixInitState();\n\n  this.autolink = options.autolink!==false;\n\n  this.curPath = undefined;\n}\n\n_$2.extend( _$2.emitable(Histery$1), {\n  // check the \n  start: function(){\n    var path = this.getPath();\n    this._checkPath = _$2.bind(this.checkPath, this);\n\n    if( this.isStart ) { return; }\n    this.isStart = true;\n\n    if(this.mode === QUIRK){\n      this._fixHashProbelm(path); \n    }\n\n    switch ( this.mode ){\n      case HASH: \n        browser.on(window, \"hashchange\", this._checkPath); \n        break;\n      case HISTORY:\n        browser.on(window, \"popstate\", this._checkPath);\n        break;\n      case QUIRK:\n        this._checkLoop();\n    }\n    // event delegate\n    this.autolink && this._autolink();\n\n    this.curPath = path;\n\n    this.emit(\"change\", path);\n  },\n  // the history teardown\n  stop: function(){\n\n    browser.off(window, 'hashchange', this._checkPath)  \n    browser.off(window, 'popstate', this._checkPath)  \n    clearTimeout(this.tid);\n    this.isStart = false;\n    this._checkPath = null;\n  },\n  // get the path modify\n  checkPath: function(ev){\n\n    var path = this.getPath(), curPath = this.curPath;\n\n    //for oldIE hash history issue\n    if(path === curPath && this.iframe){\n      path = this.getPath(this.iframe.location);\n    }\n\n    if( path !== curPath ) {\n      this.iframe && this.nav(path, {silent: true});\n      this.curPath = path;\n      this.emit('change', path);\n    }\n  },\n  // get the current path\n  getPath: function(location){\n    var location = location || this.location, tmp;\n    if( this.mode !== HISTORY ){\n      tmp = location.href.match(this.rPrefix);\n      return tmp && tmp[1]? tmp[1]: \"\";\n\n    }else{\n      return _$2.cleanPath(( location.pathname + location.search || \"\" ).replace( this.rRoot, \"/\" ))\n    }\n  },\n\n  nav: function(to, options ){\n\n    var iframe = this.iframe;\n\n    options = options || {};\n\n    to = _$2.cleanPath(to);\n\n    if(this.curPath == to) { return; }\n\n    // pushState wont trigger the checkPath\n    // but hashchange will\n    // so we need set curPath before to forbit the CheckPath\n    this.curPath = to;\n\n    // 3 or 1 is matched\n    if( this.mode !== HISTORY ){\n      this._setHash(this.location, to, options.replace)\n      if( iframe && this.getPath(iframe.location) !== to ){\n        if(!options.replace) { iframe.document.open().close(); }\n        this._setHash(this.iframe.location, to, options.replace)\n      }\n    }else{\n      history[options.replace? 'replaceState': 'pushState']( {}, options.title || \"\" , _$2.cleanPath( this.root + to ) )\n    }\n\n    if( !options.silent ) { this.emit('change', to); }\n  },\n  _autolink: function(){\n    if(this.mode!==HISTORY) { return; }\n    // only in html5 mode, the autolink is works\n    // if(this.mode !== 2) return;\n    var prefix = this.prefix, self = this;\n    browser.on( document.body, \"click\", function(ev){\n\n      var target = ev.target || ev.srcElement;\n      if( target.tagName.toLowerCase() !== \"a\" ) { return; }\n      var tmp = (browser.getHref(target)||\"\").match(self.rPrefix);\n      var hash = tmp && tmp[1]? tmp[1]: \"\";\n\n      if(!hash) { return; }\n      \n      ev.preventDefault && ev.preventDefault();\n      self.nav( hash )\n      return (ev.returnValue = false);\n    } )\n  },\n  _setHash: function(location, path, replace){\n    var href = location.href.replace(/(javascript:|#).*$/, '');\n    if (replace){\n      location.replace(href + this.prefix+ path);\n    }\n    else { location.hash = this.prefix+ path; }\n  },\n  // for browser that not support onhashchange\n  _checkLoop: function(){\n    var self = this; \n    this.tid = setTimeout( function(){\n      self._checkPath();\n      self._checkLoop();\n    }, this.interval );\n  },\n  // if we use real url in hash env( browser no history popstate support)\n  // or we use hash in html5supoort mode (when paste url in other url)\n  // then , histery should repara it\n  _fixInitState: function(){\n    var pathname = _$2.cleanPath(this.location.pathname), hash, hashInPathName;\n\n    // dont support history popstate but config the html5 mode\n    if( this.mode !== HISTORY && this.html5){\n\n      hashInPathName = pathname.replace(this.rRoot, \"\")\n      if(hashInPathName) { this.location.replace(this.root + this.prefix + hashInPathName); }\n\n    }else if( this.mode === HISTORY /* && pathname === this.root*/){\n\n      hash = this.location.hash.replace(this.prefix, \"\");\n      if(hash) { history.replaceState({}, document.title, _$2.cleanPath(this.root + hash)) }\n\n    }\n  },\n  // Thanks for backbone.history and https://github.com/cowboy/jquery-hashchange/blob/master/jquery.ba-hashchange.js\n  // for helping stateman fixing the oldie hash history issues when with iframe hack\n  _fixHashProbelm: function(path){\n    var iframe = document.createElement('iframe'), body = document.body;\n    iframe.src = 'javascript:;';\n    iframe.style.display = 'none';\n    iframe.tabIndex = -1;\n    iframe.title = \"\";\n    this.iframe = body.insertBefore(iframe, body.firstChild).contentWindow;\n    this.iframe.document.open().close();\n    this.iframe.location.hash = '#' + path;\n  }\n  \n})\n\n\n\n\n\nvar histery = Histery$1;\n\nvar State = state;\nvar Histery = histery;\nvar _ = util;\nvar baseTitle = document.title;\nvar stateFn = State.prototype.state;\n\n\nfunction StateMan$1(options){\n\n  if(this instanceof StateMan$1 === false){ return new StateMan$1(options)}\n  options = options || {};\n  // if(options.history) this.history = options.history;\n\n  this._states = {};\n  this._stashCallback = [];\n  this.strict = options.strict;\n  this.current = this.active = this;\n  this.title = options.title;\n  this.on(\"end\", function(){\n    var cur = this.current,title;\n    while( cur ){\n      title = cur.title;\n      if(title) { break; } \n      cur = cur.parent;\n    }\n    document.title = typeof title === \"function\"? cur.title(): String( title || baseTitle ) ;\n  })\n\n}\n\n\n_.extend( _.emitable( StateMan$1 ), {\n    // keep blank\n    name: '',\n\n    state: function(stateName, config){\n\n      var active = this.active;\n      if(typeof stateName === \"string\" && active){\n         stateName = stateName.replace(\"~\", active.name)\n         if(active.parent) { stateName = stateName.replace(\"^\", active.parent.name || \"\"); }\n      }\n      // ^ represent current.parent\n      // ~ represent  current\n      // only \n      return stateFn.apply(this, arguments);\n\n    },\n    start: function(options){\n\n      if( !this.history ) { this.history = new Histery(options); } \n      if( !this.history.isStart ){\n        this.history.on(\"change\", _.bind(this._afterPathChange, this));\n        this.history.start();\n      } \n      return this;\n\n    },\n    stop: function(){\n      this.history.stop();\n    },\n    // @TODO direct go the point state\n    go: function(state$$1, option, callback){\n      option = option || {};\n      if(typeof state$$1 === \"string\") { state$$1 = this.state(state$$1); }\n\n      if(!state$$1) { return; }\n\n      if(typeof option === \"function\"){\n        callback = option;\n        option = {};\n      }\n\n      if(option.encode !== false){\n        var url = state$$1.encode(option.param)\n        option.path = url;\n        this.nav(url, {silent: true, replace: option.replace});\n      }\n\n      this._go(state$$1, option, callback);\n\n      return this;\n    },\n    nav: function(url, options, callback){\n      if(typeof options === \"function\"){\n        callback = options;\n        options = {};\n      }\n      options = options || {};\n\n      options.path = url;\n\n      this.history.nav( url, _.extend({silent: true}, options));\n      if(!options.silent) { this._afterPathChange( _.cleanPath(url) , options , callback) }\n\n      return this;\n    },\n    decode: function(path){\n\n      var pathAndQuery = path.split(\"?\");\n      var query = this._findQuery(pathAndQuery[1]);\n      path = pathAndQuery[0];\n      var state$$1 = this._findState(this, path);\n      if(state$$1) { _.extend(state$$1.param, query); }\n      return state$$1;\n\n    },\n    encode: function(stateName, param){\n      var state$$1 = this.state(stateName);\n      return state$$1? state$$1.encode(param) : '';\n    },\n    // notify specify state\n    // check the active statename whether to match the passed condition (stateName and param)\n    is: function(stateName, param, isStrict){\n      if(!stateName) { return false; }\n      var stateName = (stateName.name || stateName);\n      var current = this.current, currentName = current.name;\n      var matchPath = isStrict? currentName === stateName : (currentName + \".\").indexOf(stateName + \".\")===0;\n      return matchPath && (!param || _.eql(param, this.param)); \n    },\n    // after pathchange changed\n    // @TODO: afterPathChange need based on decode\n    _afterPathChange: function(path, options ,callback){\n\n      this.emit(\"history:change\", path);\n\n      var found = this.decode(path);\n\n      options = options || {};\n\n      options.path = path;\n\n      if(!found){\n        // loc.nav(\"$default\", {silent: true})\n        return this._notfound(options);\n      }\n\n      options.param = found.param;\n\n      this._go( found, options, callback );\n    },\n    _notfound: function(options){\n\n      // var $notfound = this.state(\"$notfound\");\n\n      // if( $notfound ) this._go($notfound, options);\n\n      return this.emit(\"notfound\", options);\n    },\n    // goto the state with some option\n    _go: function(state$$1, option, callback){\n\n      var over;\n\n      // if(typeof state === \"string\") state = this.state(state);\n\n      // if(!state) return _.log(\"destination is not defined\")\n\n      if(state$$1.hasNext && this.strict) { return this._notfound({name: state$$1.name}); }\n\n      // not touch the end in previous transtion\n\n      // if( this.pending ){\n      //   var pendingCurrent = this.pending.current;\n      //   this.pending.stop();\n      //   _.log(\"naving to [\" + pendingCurrent.name + \"] will be stoped, trying to [\"+state.name+\"] now\");\n      // }\n      // if(this.active !== this.current){\n      //   // we need return\n      //   _.log(\"naving to [\" + this.current.name + \"] will be stoped, trying to [\"+state.name+\"] now\");\n      //   this.current = this.active;\n      //   // back to before\n      // }\n      option.param = option.param || {};\n\n      var current = this.current,\n        baseState = this._findBase(current, state$$1),\n        prepath = this.path,\n        self = this;\n\n\n      if( typeof callback === \"function\" ) { this._stashCallback.push(callback); }\n      // if we done the navigating when start\n      function done(success){\n        over = true;\n        if( success !== false ) { self.emit(\"end\"); }\n        self.pending = null;\n        self._popStash(option);\n      }\n      \n      option.previous = current;\n      option.current = state$$1;\n\n      if(current !== state$$1){\n        option.stop = function(){\n          done(false);\n          self.nav( prepath? prepath: \"/\", {silent:true});\n        }\n        self.emit(\"begin\", option);\n\n      }\n      // if we stop it in 'begin' listener\n      if(over === true) { return; }\n\n      if(current !== state$$1){\n        // option as transition object.\n\n        option.phase = 'permission';\n        this._walk(current, state$$1, option, true , _.bind( function( notRejected ){\n\n          if( notRejected===false ){\n            // if reject in callForPermission, we will return to old \n            prepath && this.nav( prepath, {silent: true})\n\n            done(false, 2)\n\n            return this.emit('abort', option);\n\n          } \n\n          // stop previous pending.\n          if(this.pending) { this.pending.stop() } \n          this.pending = option;\n          this.path = option.path;\n          this.current = option.current;\n          this.param = option.param;\n          this.previous = option.previous;\n          option.phase = 'navigation';\n          this._walk(current, state$$1, option, false, _.bind(function( notRejected ){\n\n            if( notRejected === false ){\n              this.current = this.active;\n              done(false)\n              return this.emit('abort', option);\n            }\n\n\n            this.active = option.current;\n\n            option.phase = 'completion';\n            return done()\n\n          }, this) )\n\n        }, this) )\n\n      }else{\n        self._checkQueryAndParam(baseState, option);\n        this.pending = null;\n        done();\n      }\n      \n    },\n    _popStash: function(option){\n      var this$1 = this;\n\n\n      var stash = this._stashCallback, len = stash.length;\n\n      this._stashCallback = [];\n\n      if(!len) { return; }\n\n      for(var i = 0; i < len; i++){\n        stash[i].call(this$1, option)\n      }\n    },\n\n    // the transition logic  Used in Both canLeave canEnter && leave enter LifeCycle\n\n    _walk: function(from, to, option, callForPermit , callback){\n\n      // nothing -> app.state\n      var parent = this._findBase(from , to);\n\n\n      option.basckward = true;\n      this._transit( from, parent, option, callForPermit , _.bind( function( notRejected ){\n\n        if( notRejected === false ) { return callback( notRejected ); }\n\n        // only actual transiton need update base state;\n        if( !callForPermit )  { this._checkQueryAndParam(parent, option) }\n\n        option.basckward = false;\n        this._transit( parent, to, option, callForPermit,  callback)\n\n      }, this) )\n\n    },\n\n    _transit: function(from, to, option, callForPermit, callback){\n      //  touch the ending\n      if( from === to ) { return callback(); }\n\n      var back = from.name.length > to.name.length;\n      var method = back? 'leave': 'enter';\n      var applied;\n\n      // use canEnter to detect permission\n      if( callForPermit) { method = 'can' + method.replace(/^\\w/, function(a){ return a.toUpperCase() }); }\n\n      var loop = _.bind(function( notRejected ){\n\n\n        // stop transition or touch the end\n        if( applied === to || notRejected === false ) { return callback(notRejected); }\n\n        if( !applied ) {\n\n          applied = back? from : this._computeNext(from, to);\n\n        }else{\n\n          applied = this._computeNext(applied, to);\n        }\n\n        if( (back && applied === to) || !applied ){ return callback( notRejected ) }\n\n        this._moveOn( applied, method, option, loop );\n\n      }, this);\n\n      loop();\n    },\n\n    _moveOn: function( applied, method, option, callback){\n\n      var isDone = false;\n      var isPending = false;\n\n      option.async = function(){\n\n        isPending = true;\n\n        return done;\n      }\n\n      function done( notRejected ){\n        if( isDone ) { return; }\n        isPending = false;\n        isDone = true;\n        callback( notRejected );\n      }\n\n      \n\n      option.stop = function(){\n        done( false );\n      }\n\n\n      this.active = applied;\n      var retValue = applied[method]? applied[method]( option ): true;\n\n      if(method === 'enter') { applied.visited = true; }\n      // promise\n      // need breadk , if we call option.stop first;\n\n      if( _.isPromise(retValue) ){\n\n        return this._wrapPromise(retValue, done); \n\n      }\n\n      // if haven't call option.async yet\n      if( !isPending ) { done( retValue ) }\n\n    },\n\n\n    _wrapPromise: function( promise, next ){\n\n      return promise.then( next, function(){next(false)}) ;\n\n    },\n\n    _computeNext: function( from, to ){\n\n      var fname = from.name;\n      var tname = to.name;\n\n      var tsplit = tname.split('.')\n      var fsplit = fname.split('.')\n\n      var tlen = tsplit.length;\n      var flen = fsplit.length;\n\n      if(fname === '') { flen = 0; }\n      if(tname === '') { tlen = 0; }\n\n      if( flen < tlen ){\n        fsplit[flen] = tsplit[flen];\n      }else{\n        fsplit.pop();\n      }\n\n      return this.state(fsplit.join('.'))\n\n    },\n\n    _findQuery: function(querystr){\n\n      var queries = querystr && querystr.split(\"&\"), query= {};\n      if(queries){\n        var len = queries.length;\n        var query = {};\n        for(var i =0; i< len; i++){\n          var tmp = queries[i].split(\"=\");\n          query[tmp[0]] = tmp[1];\n        }\n      }\n      return query;\n\n    },\n    _findState: function(state$$1, path){\n      var this$1 = this;\n\n      var states = state$$1._states, found, param;\n\n      // leaf-state has the high priority upon branch-state\n      if(state$$1.hasNext){\n        for(var i in states) { if(states.hasOwnProperty(i)){\n          found = this$1._findState( states[i], path );\n          if( found ) { return found; }\n        } }\n      }\n      // in strict mode only leaf can be touched\n      // if all children is don. will try it self\n      param = state$$1.regexp && state$$1.decode(path);\n      if(param){\n        state$$1.param = param;\n        return state$$1;\n      }else{\n        return false;\n      }\n    },\n    // find the same branch;\n    _findBase: function(now, before){\n\n      if(!now || !before || now == this || before == this) { return this; }\n      var np = now, bp = before, tmp;\n      while(np && bp){\n        tmp = bp;\n        while(tmp){\n          if(np === tmp) { return tmp; }\n          tmp = tmp.parent;\n        }\n        np = np.parent;\n      }\n    },\n    // check the query and Param\n    _checkQueryAndParam: function(baseState, options){\n\n      var from = baseState;\n      while( from !== this ){\n        from.update && from.update(options);\n        from = from.parent;\n      }\n\n    }\n\n}, true)\n\n\n\nvar stateman = StateMan$1;\n\nvar StateMan = stateman;\nStateMan.Histery = histery;\nStateMan.util = util;\nStateMan.State = state;\n\nvar index = StateMan;\n\n// import CircularJSON from '../utils/circular-json';\r\n\r\nvar view = function (Regular) {\r\n\tvar RouterView = Regular.extend( {\r\n\t\tname: 'router-view',\r\n\t\ttemplate: \"\\n\\t\\t\\t<i ref=\\\"v\\\"></i>\\n\\t\\t\",\r\n\t\tconfig: function config() {\r\n\t\t\tthis._commentInserted = false;\r\n\r\n\t\t\tvar $router = this.$router;\r\n\t\t\tvar name = this.data.name || 'default';\r\n\r\n\t\t\t$router.emit( 'add-router-view', {\r\n\t\t\t\tphase: this.$root.__phase__,\r\n\t\t\t\tkey: name,\r\n\t\t\t\tvalue: this\r\n\t\t\t} );\r\n\r\n\t\t\t// console.log( '>', name, CircularJSON.parse( CircularJSON.stringify( $router.current ) ) );\r\n\r\n\t\t\tthis.$mute();\r\n\t\t},\r\n\t\tinit: function init() {\r\n\t\t\tif( !this._comment ) {\r\n\t\t\t\tthis._comment = document.createComment( 'router-view' );\r\n\t\t\t}\r\n\t\t},\r\n\t\tclear: function clear() {\r\n\t\t\tif( this._prevcomponent ) {\r\n\t\t\t\tthis._prevcomponent.$inject( false );\r\n\t\t\t\tthis._prevcomponent.destroy();\r\n\t\t\t}\r\n\t\t},\r\n\t\trender: function render( component ) {\r\n\t\t\tvar comment = this._comment;\r\n\t\t\tif ( !this._commentInserted ) {\r\n\t\t\t\tRegular.dom.inject( comment, this.$refs.v, 'after' );\r\n\t\t\t\tthis._commentInserted = true;\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.$refs.v && this.$refs.v.parentNode ) {\r\n\t\t\t\tthis.$refs.v.parentNode.removeChild( this.$refs.v );\r\n\t\t\t\tdelete this.$refs.v;\r\n\t\t\t}\r\n\r\n\t\t\tif ( !component ) {\r\n\t\t\t\t// this.clear();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( comment.parentNode ) {\r\n\t\t\t\tcomponent.$inject( comment, 'after' );\r\n\t\t\t}\r\n\r\n\t\t\tthis._prevcomponent = component;\r\n\t\t}\r\n\t} );\r\n}\n\nvar link = function (Regular) {\r\n\tRegular.extend({\r\n\t\tname: 'router-link',\r\n\t\ttemplate: \"\\n\\t\\t\\t<a href=\\\"{ to }\\\">{#inc this.$body}</a>\\n\\t\\t\"\r\n\t});\r\n}\n\n// maybe Regular or extended from Regular, either is ok\r\nvar _Component;\r\n\r\nvar setCtor = function (Component) {\r\n\t_Component = Component;\r\n};\r\n\r\nvar getCtor = function () {\r\n\treturn _Component;\r\n};\n\nfunction each( obj, fn ) {\r\n\tvar keys = Object.keys( obj );\r\n\tfor ( var i = 0, len = keys.length; i < len; i++ ) {\r\n\t\tvar key = keys[ i ];\r\n\t\tfn( obj[ key ], key, obj );\r\n\t}\r\n}\n\nvar id = 0;\r\nfunction walk( obj, fn, name ) {\r\n\teach( obj, function (v) {\r\n\t\tvar currentName = v.name || (\"annoymous_\" + (id++));\r\n\t\tvar path = name ? (name + \".\" + currentName) : currentName;\r\n\t\tfn( v, path );\r\n\t\tif ( v.children ) {\r\n\t\t\twalk( v.children, fn, path );\r\n\t\t}\r\n\t} );\r\n}\n\nfunction digestComponentDeps( routes ) {\r\n\tvar Component = getCtor();\r\n\tvar dirty = false;\r\n\tvar ttl = 20;\r\n\r\n\t// handle components deps\r\n\tfunction walkComponents( extendOptions ) {\r\n\t\t// first and no deps\r\n\t\tif ( !extendOptions.components && !extendOptions._Ctor ) {\r\n\t\t\textendOptions._Ctor = Component.extend( extendOptions );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar cps = extendOptions.components;\r\n\r\n\t\t// deps are ready\r\n\t\tvar isReady = true;\r\n\t\tfor ( var i in cps ) {\r\n\t\t\tif ( !cps[ i ]._Ctor ) {\r\n\t\t\t\tisReady = false;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( isReady ) {\r\n\t\t\tvar Ctor = Component.extend( extendOptions );\r\n\t\t\t// register component on Ctor\r\n\t\t\tfor ( var i$1 in cps ) {\r\n\t\t\t\tCtor.component( i$1, cps[ i$1 ]._Ctor )\r\n\t\t\t}\r\n\t\t\textendOptions._Ctor = Ctor;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// if exists deps, and deps are not ready, mark as dirty, wait for next digest\r\n\t\tdirty = true;\r\n\r\n\t\tfor ( var i$2 in cps ) {\r\n\t\t\twalkComponents( cps[ i$2 ] );\r\n\t\t}\r\n\t}\r\n\r\n\tfunction digestOne() {\r\n\t\t// reset\r\n\t\tdirty = false;\r\n\r\n\t\twalk( routes, function( route ) {\r\n\t\t\tvar components = route.components || {};\r\n\t\t\t// combine\r\n\t\t\tif ( route.component ) {\r\n\t\t\t\tcomponents[ 'default' ] = route.component;\r\n\t\t\t}\r\n\t\t\tfor ( var i in components ) {\r\n\t\t\t\twalkComponents( components[ i ] );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tttl--;\r\n\r\n\t\tif ( !ttl ) {\r\n\t\t\t// error\r\n\t\t\tthrow new Error( \"components dependencies parse failed\" );\r\n\t\t}\r\n\r\n\t\tif ( dirty && ttl ) {\r\n\t\t\t// next digest\r\n\t\t\tdigestOne();\r\n\t\t}\r\n\t}\r\n\r\n\tdigestOne();\r\n}\n\nvar checkPurview = function ( e, cmd, components, cb ) {\r\n\tvar done = e.async();\r\n\tvar current = e.current;\r\n\tvar go = e.go;\r\n\r\n\tvar len = Object.keys( components ).length;\r\n\r\n\tfunction next() {\r\n\t\tlen--;\r\n\r\n\t\tif( len === 0 ) {\r\n\t\t\tdone();\r\n\t\t\tcb && cb();\r\n\t\t}\r\n\t}\r\n\r\n\tfor ( var i in components ) {\r\n\t\tvar component = components[ i ];\r\n\t\tvar canTransition = component.route && component.route[ cmd ];\r\n\t\tif ( !canTransition ) {\r\n\t\t\tnext();\r\n\t\t} else {\r\n\t\t\tcanTransition( {\r\n\t\t\t\troute: current,\r\n\t\t\t\tredirect: go,\r\n\t\t\t\tnext: next\r\n\t\t\t} );\r\n\t\t}\r\n\t}\r\n};\n\nvar Router = function Router( options ) {\r\n\t// directly call\r\n\tif ( !( this instanceof Router ) ) {\r\n\t\tsetCtor( options );\r\n\t\treturn;\r\n\t}\r\n\r\n\t// new\r\n\tthis._options = options;\r\n};\r\nRouter.prototype.start = function start ( selector ) {\r\n\tvar rootNode =\r\n\t\t( selector && document.querySelector( selector ) ) ||\r\n\t\tdocument.body;\r\n\tvar Component = getCtor();\r\n\r\n\tif ( !Component ) {\r\n\t\tthrow new Error( 'regular-router not initialized yet' );\r\n\t}\r\n\r\n\t// make stateman avaiable for all Regular instances\r\n\tvar stateman = new index();\r\n\tComponent.implement({\r\n\t\t$router: stateman\r\n\t});\r\n\r\n\t// register helper components\r\n\tComponent.use( view );\r\n\tComponent.use( link );\r\n\r\n\t// get routes from options.routes\r\n\tvar ref = this._options;\n\t\tvar routes = ref.routes;\r\n\r\n\t// flat\r\n\tvar routeMap = {};\r\n\twalk( routes, function( route, name ) {\r\n\t\tif ( !~name.indexOf( '.' ) ) {\r\n\t\t\troute.isRootRoute = true;\r\n\t\t}\r\n\t\trouteMap[ name ] = route;\r\n\t} );\r\n\r\n\t// digest components dependencies\r\n\tdigestComponentDeps( routes );\r\n\r\n\tvar routerViewStack = {};\r\n\tstateman.on( {\r\n\t\t'add-router-view': function( ref ) {\n\t\t\t\tvar phase = ref.phase;\n\t\t\t\tvar key = ref.key;\n\t\t\t\tvar value = ref.value;\n\r\n\t\t\trouterViewStack[ phase ] = routerViewStack[ phase ] || {};\r\n\t\t\trouterViewStack[ phase ][ key ] = value;\r\n\t\t},\r\n\t\t// 'purge-router-view': function( { phase } ) {\r\n\t\t// routerViewStack[ phase ] = {};\r\n\t\t// }\r\n\t} );\r\n\r\n\t// transform routes\r\n\tvar transformedRoutes = {};\r\n\tvar loop = function ( name ) {\r\n\t\tvar route = routeMap[ name ];\r\n\t\tvar parentName = name.split( '.' ).slice( 0, -1 ).join( '.' );\r\n\t\tvar component = route.component;\r\n\t\tvar components = route.components || {};\r\n\t\tvar CtorMap = {};\r\n\r\n\t\t// combine\r\n\t\tif ( !components[ 'default' ] && component ) {\r\n\t\t\tcomponents[ 'default' ] = component;\r\n\t\t}\r\n\r\n\t\ttransformedRoutes[ name ] = {\r\n\t\t\turl: route.url,\r\n\t\t\tupdate: function update( e ) {\r\n\t\t\t\t// reuse, do nothing\r\n\t\t\t},\r\n\t\t\tenter: function enter( e ) {\r\n\t\t\t\tconsole.log( '@@route', name, 'enter' );\r\n\t\t\t\tvar current = e.current;\r\n\r\n\t\t\t\tvar instanceMap = {};\r\n\r\n\t\t\t\t// initialize component ctors\r\n\t\t\t\tCtorMap[ name ] = {};\r\n\r\n\t\t\t\tfor ( var i in components ) {\r\n\t\t\t\t\tvar cp = components[ i ];\r\n\t\t\t\t\tCtorMap[ name ][ i ] = cp._Ctor;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// get instances, and routerViews will be mounted\r\n\t\t\t\tfor ( var i$1 in CtorMap[ name ] ) {\r\n\t\t\t\t\tinstanceMap[ i$1 ] = new CtorMap[ name ][ i$1 ]({\r\n\t\t\t\t\t\t__phase__: name,\r\n\t\t\t\t\t\t__view__: i$1\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar routerViews = routerViewStack[ parentName ];\r\n\r\n\t\t\t\t// render router-view\r\n\t\t\t\tif ( routerViews ) {\r\n\t\t\t\t\tfor ( var i$2 in routerViews ) {\r\n\t\t\t\t\t\tvar routerView = routerViews[ i$2 ];\r\n\t\t\t\t\t\trouterView.render( instanceMap[ i$2 ] );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( route.isRootRoute ) {\r\n\t\t\t\t\tinstanceMap[ 'default' ] && instanceMap[ 'default' ].$inject( rootNode );\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcanEnter: function canEnter( e ) {\r\n\t\t\t\tcheckPurview( e, 'canEnter', components );\r\n\t\t\t},\r\n\t\t\tcanLeave: function canLeave( e ) {\r\n\t\t\t\tcheckPurview( e, 'canLeave', components );\r\n\t\t\t},\r\n\t\t\tleave: function leave( e ) {\r\n\t\t\t\tconsole.log( '@@route', name, 'leave' );\r\n\r\n\t\t\t\tvar current = e.current;\r\n\t\t\t\tvar routerViews = routerViewStack[ parentName ];\r\n\r\n\t\t\t\t// clean router-view\r\n\t\t\t\tif ( routerViews ) {\r\n\t\t\t\t\tfor ( var i in routerViews ) {\r\n\t\t\t\t\t\tvar routerView = routerViews[ i ];\r\n\t\t\t\t\t\trouterView.clear();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t};\n\n\t\tfor ( var name in routeMap ) { loop( name ); }\r\n\r\n\tstateman.state( transformedRoutes );\r\n\r\n\tstateman.start( {\r\n\t\tprefix: '!'\r\n\t} );\r\n};\n\nreturn Router;\n\n})));\n});\n\nvar RouterManager = function RouterManager( app ) {\n\tvar this$1 = this;\n\r\n\tthis._app = app;\r\n\r\n\tvar Base = app._Base;\r\n\tBase.use( regularRouter );\r\n\tapp.once( 'before-start', function () {\r\n\t\tvar getters = app._getters;\r\n\t\tvar options = this$1._options || {};\r\n\t\tvar routes = options.routes;\r\n\t\twalk( routes, function (component) {\r\n\t\t\tvar computed = component.computed;\r\n\t\t\tvar loop = function ( i ) {\r\n\t\t\t\tvar c = computed[ i ];\r\n\t\t\t\tif ( typeof c === 'string' ) {\r\n\t\t\t\t\tif ( getters[ c ] ) {\r\n\t\t\t\t\t\tcomputed[ i ] = function () {\r\n\t\t\t\t\t\t\t// replaceState will replace state reference\r\n\t\t\t\t\t\t\t// so get state in realtime when computes\r\n\t\t\t\t\t\t\tvar state = app._store.getState();\r\n\t\t\t\t\t\t\treturn getters[ c ]( state )\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdelete computed[ i ];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\n\n\t\t\tfor ( var i in computed ) loop( i );\r\n\t\t} );\r\n\t} );\r\n};\r\nRouterManager.prototype.set = function set ( options ) {\r\n\tthis._options = options;\r\n};\r\nRouterManager.prototype.start = function start ( selector ) {\r\n\tvar router = new regularRouter( this._options );\r\n\tthis._app.$router = router;\r\n\trouter.start( selector );\r\n};\n\nfunction walk( routes, fn ) {\r\n\tfor ( var i = 0, len = routes.length; i < len; i++ ) {\r\n\t\tvar route = routes[ i ];\r\n\r\n\t\tvar components = route.components || {};\r\n\t\tif ( route.component ) {\r\n\t\t\tcomponents[ 'default' ] = route.component;\r\n\t\t}\r\n\t\twalkComponents( components, fn );\r\n\t\tif ( route.children ) {\r\n\t\t\twalk( route.children, fn );\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction walkComponents( components, fn ) {\r\n\tfor ( var i in components ) {\r\n\t\tvar component = components[ i ];\r\n\t\tfn( component );\r\n\t\tif ( component.components ) {\r\n\t\t\twalkComponents( component.components, fn );\r\n\t\t}\r\n\t}\r\n}\n\n// Credits: vue/vuex\r\n\r\nvar devtoolsPlugin = function (options) { return function (store) {\r\n\tvar devtools = window.__REO_DEVTOOLS_HOOK__;\r\n\r\n\tif ( !devtools ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tstore._devtools = devtools;\r\n\r\n\tdevtools.emit( 'reo:init', store );\r\n\tdevtools.on( 'reo:travel-to-state', function (state) {\r\n\t\tstore.replaceState( state );\r\n\t} );\r\n\r\n\tstore.subscribe( function ( action, state ) {\r\n\t\tdevtools.emit( 'reo:reducer', action, state );\r\n\t} );\r\n}; }\n\nvar App = (function (EventEmitter) {\n\tfunction App() {\r\n\t\tthis._isRunning = false;\r\n\t\tthis.$store = this._store = new Store( this );\r\n\t\tthis._Base = index$1.extend();\r\n\t\tthis.managers = {\r\n\t\t\tplugin: new PulginManager( this ),\r\n\t\t\tview: new ViewManager( this ),\r\n\t\t\trouter: new RouterManager( this )\r\n\t\t};\r\n\t\tthis.use( devtoolsPlugin() );\r\n\t}\n\n\tif ( EventEmitter ) App.__proto__ = EventEmitter;\n\tApp.prototype = Object.create( EventEmitter && EventEmitter.prototype );\n\tApp.prototype.constructor = App;\r\n\tApp.prototype.use = function use ( plugin ) {\r\n\t\tthis.managers.plugin.register( plugin );\r\n\t};\r\n\tApp.prototype.model = function model ( ref ) {\n\t\tif ( ref === void 0 ) ref = {};\n\t\tvar name = ref.name;\n\t\tvar state = ref.state; if ( state === void 0 ) state = {};\n\t\tvar reducers = ref.reducers; if ( reducers === void 0 ) reducers = {};\n\r\n\t\tif( !name ) {\r\n\t\t\tthrow new Error( 'please name your model' );\r\n\t\t}\r\n\r\n\t\tvar model = new Model( { state: state, reducers: reducers } );\r\n\t\tthis._store.registerModel( name, model );\r\n\r\n\t\treturn model;\r\n\t};\r\n\tApp.prototype.actions = function actions ( actions ) {\r\n\t\tthis._store.registerActions( actions );\r\n\t};\r\n\tApp.prototype.getters = function getters ( getters ) {\n\t\tif ( getters === void 0 ) getters = {};\n\r\n\t\tif( this._getters ) {\r\n\t\t\tthrow new Error( 'getters can only be called one time' );\r\n\t\t}\r\n\t\tthis._getters = getters;\r\n\t};\r\n\tApp.prototype.router = function router ( options ) {\r\n\t\tthis.managers.router.set( options );\r\n\t};\r\n\tApp.prototype.start = function start ( selector ) {\r\n\t\tif ( this._isRunning ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._isRunning = true;\r\n\r\n\t\tthis.emit( 'before-start' );\r\n\t\tthis.managers.router.start( selector );\r\n\t\tthis.emit( 'after-start' );\r\n\t};\n\n\treturn App;\n}(eventemitter2));\n\nvar index = function() {\r\n\treturn new App();\r\n}\n\nreturn index;\n\n})));\n"],"names":["global","factory","exports","module","define","amd","reo","this","createCommonjsModule","fn","extend","o1","o2","i","undefined","wrapHander","handler","all","type","value","Lexer$1","input","opts","conflictTag","config$4","END","markStart","markEnd","trim","map","mode","map1","map2","states","expression","push","genMap","rules","rule","sign","len","length","links","setup","replaceFn","one","macro","_$2","escapeRegExp","String","slice","split","trunks","reg","retain","curIndex","j","typeOf","toString","replace","findSubCapture","TRUNK","RegExp","join","Parser$1","tokens","Lexer$2","lex","pos","wrap","k","supro","tmp","supr","ret","apply","arguments","process","what","o","hasOwnProperty","isFn","fnTest","test","simpleDiff","now","old","nlen","olen","equals","a","b","ld","array1","array2","equalFn","n","m","matrix","Math","min","diffArray","arr2","arr1","diff","diffFn","edits","current","northWest","west","north","unshift","LEAVE","ADD","DELELE","UPDATE","steps","step","index","add","removed","diffObject","last","nKeys","_$5","keys","lKeys","getMaxTimeout","node","styles","timeout","tDuration","tDelay","aDuration","aDelay","ratio","window","getComputedStyle","getMaxTime","transitionProperty","animationProperty","max","str","time","maxTimeout","forEach","parseFloat","Group$1","list","children","Event","Watcher$1","matchParent","ev","delegates","stop","pair","target","element","fire","parentNode","initSelect","elem","parsed","set","self","wc","$update","$watch","newValue","_$12","getElementsByTagName","selectedIndex","dom$3","on","get","off","initText","that","nextTick","msie","tNode","addEventListener","removeEventListener","initCheckBox","watcher","attr","checked","initRadio","createSeed","key","callback","_$13","noop","out","start","cb","uid","compelete","done","bind","pkey","processAnimate","reset","seed","seeds","whenCallback","animationDestroy","onenter","onleave","this$1","Component","constructor","isExpr","composite","command","param","animator","composites","destroies","WHEN_COMMAND","EVENT_COMMAND","animation","Error","call","_handleEvent","$on","$off","destroy","TimeoutModule","implement","$timeout","delay","setTimeout","$interval","interval","setInterval","walk","routes","route","components","component","walkComponents","commonjsGlobal","tstr","shim","prototype","Array","indexOf","obj","from","ctx","O","Object","TypeError","kValue","filter","fun","context","t","res","val","Function","preArgs","args","concat","isArray","arr","entities","quot","amp","apos","lt","gt","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","times","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","divide","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","fnof","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","bull","hellip","prime","Prime","oline","frasl","weierp","image","real","trade","alefsym","larr","uarr","rarr","darr","harr","crarr","lArr","uArr","rArr","dArr","hArr","forall","part","exist","empty","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","prop","infin","ang","and","or","cap","cup","int","there4","sim","cong","asymp","ne","equiv","le","ge","sub","sup","nsub","sube","supe","oplus","otimes","perp","sdot","lceil","rceil","lfloor","rfloor","lang","rang","loz","spades","clubs","hearts","diams","OElig","oelig","Scaron","scaron","Yuml","circ","tilde","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","permil","lsaquo","rsaquo","euro","entities_1","util","log","msg","console","_","o2str","win","_uid","override","varName","setName","ctxName","extName","rWord","rSimpleAccessor","setImmediate","prefix","end","item","toLowerCase","makePredicate","words","compareTo","f","cats","sort","cat","trackErrorPos","findLine","lines","tmpLen","lineLen","num","line","prev","next","formatLine","minRange","maxRange","remain","postfix","lb","lastIndex","ignoredRef","regStr","left","right","ignored","match","letter","charAt","rEntity","convertEntity","chr","hex","dec","capture","charCode","parseInt","fromCharCode","createObject","props","Foo","createProto","clone","cloned","isNaN","dash","camelCase","toUpperCase","throttle","func","wait","result","previous","later","Date","remaining","clearTimeout","escape","rAmp","rLt","rGt","rApos","rQuot","hChars","cache","shift","handleEvent","evaluate","data","$event","preventDefault","$emit","once","fixObjStr","array","isVoidTag","isBooleanAttr","isFalse","isTrue","expr","isGroup","group","inject","$inject","getCompileFn","source","options","$compile","svg","document","implementation","hasFeature","browser","nodeType","exprCache","isRunning","env","config$1","BEGIN","PRECOMPILE","}","]","NAME","IDENT","SPACE","exec","testSubCapure","lo","mlen","token","state","marks","error","_process","marched","link","enter","leave","pop","ENTER_JST","ENTER_TAG","TEXT","TAG_NAME","TAG_OPEN","TAG_CLOSE","TAG_PUNCHOR","TAG_ENTER_JST","TAG_UNQ_VALUE","TAG_STRING","TAG_SPACE","TAG_COMMENT","JST_OPEN","JST_CLOSE","JST_COMMENT","JST_EXPR_OPEN","JST_IDENT","JST_SPACE","JST_LEAVE","JST_NUMBER","JST_PUNCHOR","JST_STRING","ENTER_JST2","two","name","firstEnterStart","Lexer_1","node$1","attrs","tag","attribute","mdf","if","consequent","alternate","sequence","variable","body","track","setbody","constant","text","template","content","_$3","config$5","isPath","isKeyWord","op","parse","program","ll","la","eat","statements","statement","xml","directive","interplation","selfClosed","xentity","modifier","attvalue","isAttribute","inc","include","container","close","depend","buffer","setBuffer","assign","getset","condition","equal","relation","additive","multive","range","unary","member","base","pathes","prevBase","path","extValue","onlySimpleAccessor","primary","tmpName","object","paren","code","Parser_1","_$4","merged","extend$2","proto","__after__","_const","COMPONENT_TYPE","ELEMENT_TYPE","NAMESPACE","html","dom_1","fixEventName","dom","tagName","event","_fixed","srcElement","button","rMouseEvent","pageX","clientX","doc","scrollLeft","pageY","clientY","scrollTop","related","relatedTarget","wheelDelta","detail","which","keyCode","addEvent","removeEvent","env$$1","consts","createElement","namespaces","attachEvent","detachEvent","navigator","userAgent","find","sl","querySelector","e","getElementById","refer","position","fragment","appendChild","firstChild","insertBefore","nextSibling","id","create","ns","createElementNS","createDocumentFragment","specialAttr","class","namespaceURI","className","setAttribute","for","htmlFor","style","cssText","attributes","getNamedItem","specified","defaultChecked","removeAttribute","getAttribute","types","origin","textProp","innerHTML","replaced","replaceChild","remove","removeChild","css","currentStyle","addClass","delClass","hasClass","compatMode","documentElement","immediateStop","stopPropagation","returnValue","cancelBubble","stopImmediatePropagation","nextFrame","request","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","cancel","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","webkitCancelRequestAnimationFrame","tid","nextReflow","offsetWidth","_$6","dom$1","animate","env$3","transitionEnd","animationEnd","appName","direction","count","enterCallback","loop","removeDone","startClassAnimate","activeClassName","onceAnim","startStyleAnimate","animate_1","combine_1","combine","nodes","preParent","newParent","first","elements","_$7","combine$1","ondestroy","walkers_1","getListFromValue","walkAttributes","extra","bindings","binding","_walk","fromElement","Group","walkers","ast","removeRange","rlen","group$$1","splice","addRange","newList","rawNewValue","updateTarget","section","namespace","record","outer","insert","indexName","keyName","updateRange","updateLD","oldList","splices","minar","tIndex","keyOf","updateSimple","update","oldValue","nType","oType","altGroup","placeholder","extraObj","Regular","createComment","_touchExpr","init","deep","compiled","ii","nvalue","force","preValue","createTextNode","newval","eventReg","Constructor","$body","touched","a1","a2","d1","d2","priority","isolate","ref","is","events","etest","componentName","$get","eventName","reflink","definition","$parent","$root","$outer","_body","$refs","sync","ncomponent","slice$1","_$8","API","handles","_handles","calls","$one","mixTo","exprCache$1","Parser$2","parse$1","simple","_$9","parseExpression","diff$2","diffArray$1","diffObject$1","methods","__ext__","_watchers","tests","$expression","_records","prephase","$phase","_checkSingleWatch","$unwatch","wlen","watchers","$digest","_mute","dirty","_digest","watcherDirty","_children","child","tlast","tnow","eq","diff$$1","$set","detect","rootParent","_record","_release","filter$1","json","JSON","stringify","average","total","env$2","Lexer","Parser","config$3","_$1","extend$1","Watcher","Regular$1","prevRunning","usePrototyeString","computed","_append","handleComputed","config","$ready","_directives","__regexp__","_plugins","_protoInheritCache","_inheritConfig","cfg","directives","regexp","plugin","plugins","use","needGenLexer","_addProtoInheritCache","transform","cacheKey","defs","parent","records","preExt","$bind","expr1","expr2","_bind","$unbind","$mute","isMute","needupdate","wid1","wid2","arg1","rawget","ext","_f_","_sg_","defaults","computedProperty","_ss_","Regular_1","wrapGet","wrapSet","handle","parsedComputed","_$11","dom$2","Regular$2","delegateEvent","_delegates","root","delegate","Regular$3","modelHandlers","select","checkbox","radio","r-class","isNotHtml","r-style","r-hide","preBool","bool","display","r-html","accept","cval","refs","nval","oval","animate$1","Regular$4","rSpace","emit","evt","valid","pairs","Regular$5","index$1","eventemitter2","_events","_conf","configure","conf","delimiter","maxListeners","defaultMaxListeners","wildcard","newListener","listenerTree","logPossibleMemoryLeak","trace","EventEmitter","searchListenerTree","handlers","tree","leaf","branch","xTree","xxTree","isolatedBranch","endReached","listeners","typeLength","currentType","nextType","_listeners","**","growListenerTree","listener","warned","EventEmitter2","setMaxListeners","many","ttl","_origin","arguments$1","l","al","_all","emitAsync","Promise","resolve","promises","reject","onAny","addListener","recursivelyGarbageCollect","leafs","iLeaf","offAny","fns","removeListener","removeAllListeners","listenerCount","listenersAny","ALWAYS_NOTIFY_KEY","Store","app","_app","_models","_modelArray","_state","_subscribers","replaceState","nextState","models","notifyViews","getState","registerModel","model","subscribe","payload","notify","registerActions","actions","_actions","_get","getterKey","_getters","_commit","parts","truetype","commit","dispatch","cbs","i$1","_isFromView","names","toArray","Model","reducers","_reducers","_committing","prototypeAccessors","v","watch","reducer","subscribers","defineProperties","PulginManager","register","store","_store","ViewManager","Base","_Base","$config","regularRouter","createCommonjsModule$$1","State$1","option","_states","_pending","visited","Histery$1","location","html5","history","HISTORY","HASH","hash","QUIRK","rPrefix","rRoot","_fixInitState","autolink","curPath","StateMan$1","_stashCallback","strict","active","title","cur","baseTitle","each","currentName","digestComponentDeps","extendOptions","_Ctor","cps","isReady","Ctor","i$2","digestOne","getCtor","normalizePath","preIndex","matches","cleanPath","keyformat","mwild","swild","startAt","eql","t1","t2","emitable","norm","eventAndNamespace","_ns","rDbSlash","rEndSlash","isPromise","then","normalize","rCache","stateName","nextName","slen","stack","manager","hasNext","configUrl","_getConfig","url","pattern","pathAndQuery","encode","matched","sec","decode","async","browser$1","documentMode","getHref","getPath","_checkPath","checkPath","isStart","_fixHashProbelm","_checkLoop","_autolink","iframe","nav","silent","href","pathname","search","to","_setHash","open","hashInPathName","src","tabIndex","contentWindow","histery","State","Histery","stateFn","_afterPathChange","go","state$$1","_go","query","_findQuery","_findState","isStrict","matchPath","found","_notfound","success","over","pending","_popStash","baseState","_findBase","prepath","phase","notRejected","_checkQueryAndParam","stash","callForPermit","basckward","_transit","applied","back","method","_computeNext","_moveOn","isDone","isPending","retValue","_wrapPromise","promise","fname","tname","tsplit","fsplit","tlen","flen","querystr","queries","before","np","bp","stateman","StateMan","_Component","view","_commentInserted","$router","__phase__","_comment","clear","_prevcomponent","render","comment","setCtor","checkPurview","cmd","canTransition","redirect","Router","_options","selector","rootNode","routeMap","isRootRoute","routerViewStack","add-router-view","transformedRoutes","parentName","CtorMap","instanceMap","cp","__view__","routerViews","routerView","canEnter","canLeave","RouterManager","getters","c","router","devtoolsPlugin","devtools","__REO_DEVTOOLS_HOOK__","_devtools","action","App","_isRunning","$store","managers","__proto__"],"mappings":"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"}